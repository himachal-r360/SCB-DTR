<!-- Mobile -header navigation with back -->
<div  class="list-back-title-smartbuy" *ngIf="domainName=='SMARTBUY'"> 
    <span  class="list-back" (click)="goback()">
     <i  class="material-icons">arrow_back</i>
    </span>
    <div class="m-locations">{{travalfrom}} to {{travalto}}</div>  
    <span  class="train-avi-mobile"  data-toggle="modal" data-target=".train-availability">
        <i class="material-icons">error_outline</i>
    </span>
</div>
<div  class="list-back-title-diners" *ngIf="domainName=='DINERS'" > 
    <span  class="list-back" (click)="goback()">
     <i  class="material-icons">arrow_back</i>
    </span>
    <div class="m-locations">{{travalfrom}} to {{travalto}}</div>  
    <span  class="train-avi-mobile"  data-toggle="modal" data-target=".train-availability">
        <i class="material-icons">error_outline</i>
    </span>
</div>
<div  class="list-back-title-infinia" *ngIf="domainName=='INFINIA'" > 
        <span  class="list-back" (click)="goback()">
         <i  class="material-icons">arrow_back</i>
        </span>
        <div class="m-locations">{{travalfrom}} to {{travalto}}</div>  
        <span  class="train-avi-mobile"  data-toggle="modal" data-target=".train-availability">
            <i class="material-icons">error_outline</i>
        </span>
    </div>
    <div  class="list-back-title-regalia" *ngIf="domainName=='REGALIA'" > 
            <span  class="list-back" (click)="goback()">
             <i  class="material-icons">arrow_back</i>
            </span>
            <div class="m-locations">{{travalfrom}} to {{travalto}}</div>  
            <span  class="train-avi-mobile"  data-toggle="modal" data-target=".train-availability">
                <i class="material-icons">error_outline</i>
            </span>
        </div>
        <div  class="list-back-title-corporate" *ngIf="domainName=='CORPORATE'" > 
                <span  class="list-back" (click)="goback()">
                 <i  class="material-icons">arrow_back</i>
                </span>
                <div class="m-locations">{{travalfrom}} to {{travalto}}</div>  
                <span  class="train-avi-mobile"  data-toggle="modal" data-target=".train-availability">
                    <i class="material-icons">error_outline</i>
                </span>
            </div>
            <div  class="list-back-title-business" *ngIf="domainName=='BUSINESS'" > 
                    <span  class="list-back" (click)="goback()">
                     <i  class="material-icons">arrow_back</i>
                    </span>
                    <div class="m-locations">{{travalfrom}} to {{travalto}}</div>  
                    <span  class="train-avi-mobile"  data-toggle="modal" data-target=".train-availability">
                        <i class="material-icons">error_outline</i>
                    </span>
                </div>
    

<!-- Availability Pop Up Code  -->
<div class="modal fade train-availability" tabindex="-1" role="dialog" aria-labelledby="train-availability" aria-hidden="true">
        <div class="modal-dialog modal-lg mpop-0 pop-schedule">
                <div class="modal-content irctc-view-content" >
                        <div class="col-12 irctc-header-{{domainName}}">     
                            <div class="row">
                                <div class="col-10">
                                    <div class="modal-title">
                                          <div class="title">Availability</div>
                                    </div>
                                    
                                </div>
                                  <div class="col-2">
                                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                          <span aria-hidden="true">&times;</span>
                                        </button>
                                  </div>
                              </div>
                              </div>
                  <div class="irctc-view-body">
                      <div class="col-12 train-info">
                      <div class="row">
                         <p class="avi-info-data">The information set out in this article is based on the information made available by IRCTC Authorised Partner, which may be updated from time to time. Confirm the information set out in this article on <strong>IRCTC’s Authorised Partner website</strong>.</p>
                      </div>
                  </div>
                      <div class="table-responsive d-none d-sm-block">
                    <table class="table info-heading-{{domainName}} w-availibility ">
                        <thead>
                          <tr>
                            <th>Railway ticket code</th>
                            <th>Description</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td><b>AVAILABLE</b></td>
                            <td>Confirmed availability for your ticket.</td>
                          </tr>
                          <tr>
                              <td><b>CAN/MOD</b></td>
                              <td>Cancelled or modified passenger.</td>
                          </tr>
                          <tr>
                              <td><b>CNF/Confirmed</b></td>
                              <td>Confirmed (coach or berth number is available after chart preparation).</td>
                          </tr>
                          <tr>
                              <td><b>GNWL</b></td>
                              <td>General wait list. This is the most common type of wait list and has the highest chance to be confirmed. Upon confirmation, the status changes to RAC.</td>
                            </tr>
                            <tr>
                                <td><b>NOSB</b></td>
                                <td>No seat berth. This code is generally used for child passengers who aren’t assigned a berth as requested.</td>
                            </tr>
                            <tr>
                                <td><b>PQWL</b></td>
                                <td>Pooled quota wait list. This waitlist is shared by several small stations as opposed to a single station.</td>
                            </tr>
                            <tr>
                              <td><b>WL#</b></td>
                              <td>Waiting list number. Each time a confirmed ticket or wait list ticket is cancelled, this number goes down.</td>
                            </tr>
                            <tr>
                                <td><b>RAC</b></td>
                                <td>Reservation against cancellation. Your seat is guaranteed, but berth needs to be shared between 2 people. Individual berths will be allotted only if RAC becomes a CNF ticket.</td>
                            </tr>
                            <tr>
                                <td><b>R##</b></td>
                                <td>RAC coach number or berth number. The same berth will be allotted to 2 RAC passengers and they need to share it.</td>
                            </tr>
                            <tr>
                              <td><b>REGRET/WL</b></td>
                              <td>No more booking is permitted.</td>
                          </tr>
                          <tr>
                            <td><b>RELEASED</b></td>
                            <td>Ticket not cancelled, but alternative accommodation provided.</td>
                          </tr>
                          <tr>
                              <td><b>RQWL</b></td>
                              <td>Roadside quota wait list. If you book a ticket from one intermediate station to another that isn’t covered by any other quotas or wait lists, your request may be added to an RQWL.</td>
                          </tr>
                          <tr>
                              <td><b>TQWL</b></td>
                              <td>Tatkal wait list. When the waiting list moves up, you can expect confirmed berth instead of RAC.</td>
                          </tr>
                          
                        </tbody>
                      </table>
                    </div>
                      <div class="table-responsive table-bordered d-block d-sm-none">
                      <table class="table  info-heading-{{domainName}} w-availibility ">
                            <thead>
                              <tr>
                                <th>Railway ticket code</th>
                                <th>Description</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td><b>AVAILABLE</b></td>
                                <td>Confirmed availability for your ticket.</td>
                              </tr>
                              <tr>
                                  <td><b>CAN/MOD</b></td>
                                  <td>Cancelled or modified passenger.</td>
                              </tr>
                              <tr>
                                  <td><b>CNF/Confirmed</b></td>
                                  <td>Confirmed (coach or berth number is available after chart preparation).</td>
                              </tr>
                              <tr>
                                  <td><b>GNWL</b></td>
                                  <td>General wait list. This is the most common type of wait list and has the highest chance to be confirmed. Upon confirmation, the status changes to RAC.</td>
                                </tr>
                                <tr>
                                    <td><b>NOSB</b></td>
                                    <td>No seat berth. This code is generally used for child passengers who aren’t assigned a berth as requested.</td>
                                </tr>
                                <tr>
                                    <td><b>PQWL</b></td>
                                    <td>Pooled quota wait list. This waitlist is shared by several small stations as opposed to a single station.</td>
                                </tr>
                                <tr>
                                  <td><b>WL#</b></td>
                                  <td>Waiting list number. Each time a confirmed ticket or wait list ticket is cancelled, this number goes down.</td>
                                </tr>
                                <tr>
                                    <td><b>RAC</b></td>
                                    <td>Reservation against cancellation. Your seat is guaranteed, but berth needs to be shared between 2 people. Individual berths will be allotted only if RAC becomes a CNF ticket.</td>
                                </tr>
                                <tr>
                                    <td><b>R##</b></td>
                                    <td>RAC coach number or berth number. The same berth will be allotted to 2 RAC passengers and they need to share it.</td>
                                </tr>
                                <tr>
                                  <td><b>REGRET/WL</b></td>
                                  <td>No more booking is permitted.</td>
                              </tr>
                              <tr>
                                <td><b>RELEASED</b></td>
                                <td>Ticket not cancelled, but alternative accommodation provided.</td>
                              </tr>
                              <tr>
                                  <td><b>RQWL</b></td>
                                  <td>Roadside quota wait list. If you book a ticket from one intermediate station to another that isn’t covered by any other quotas or wait lists, your request may be added to an RQWL.</td>
                              </tr>
                              <tr>
                                  <td><b>TQWL</b></td>
                                  <td>Tatkal wait list. When the waiting list moves up, you can expect confirmed berth instead of RAC.</td>
                              </tr>
                              
                            </tbody>
                          </table>
                  </div>
                  </div>
                  
                </div>
              </div>
</div>

<div class="container list-gap list-gap-imp" id="list">
    <!-- web breadcrumb  -->
    <div class="d-none d-md-block">
        <nav aria-label="breadcrumb bg-white">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="javascript:;" (click)="goTo('/')">Home</a></li>
                <li class="breadcrumb-item"><a href="javascript:;"  (click)="goTo('travel')">Travel & stays</a></li>
                <li class="breadcrumb-item active" aria-current="page">Trains search</li>
            </ol>
        </nav>
    </div>
    <div class="row w-100 modify-search cust-m0 train-title">
       
    </div>
    <div class="row float-left pt-16 w-100 m-c-0" *ngIf="onHide">
        
        <div *ngIf="loading" class="col-md-12 col-lg-12 col-12">

                <app-layout-loader></app-layout-loader> 
                
        </div>
        <ng-container *ngIf="!loading">
            <div class="col-md-3 p0 bus-filter" [ngClass]="{'active':showFilter}">
                <app-trains-filter [departureTimeFilter] = "departureTimeFilter" (departEvent)="updateDeparture($event)"
                [arrivalTimeFilter] = "arrivalTimeFilter" (arriveEvent)="updateArrival($event)"
                [availableClasses] = "availableClasses"  (availableClassesEvent) = "updateAvailableClassFilter($event)"
                [trainTypes] = "trainTypes" (trainTypesEvent) = "updateTrainTypeFilter($event)"
                [fromStations] = "fromStations" (fromStationsEvent) = "updateFromStationFilter($event)"
                [toStations] = "toStations" (toStationsEvent) = "updateToStationFilter($event)"
                (removeallfilters) = "clearSelectionAll()"
                (searchboard) = "searchboarding($event)"
                (applyFilter) = "onFilter()">
                </app-trains-filter>
            </div>
            <!-- <div class="position-fixed footer-btn" *ngIf="!showSortbuy && domainName=='SMARTBUY'">
                <div class="w-50 float-left" >
                    <div class="btn-footer-cust" (click)="openDialog($event)">sort by</div>
                    <div class="blue-label">{{selectedOption}}</div>
                </div>
                <div class="w-50 float-left" (click)="onFilter()">
                    <div class="btn-footer-cust">FILTER by</div> 
                    <div class="blue-label"></div>
                </div>
            </div> -->
            <div class="position-fixed footer-btn mlite_footer_stick" *ngIf="!showSortbuy && domainName=='SMARTBUY'">
                <div class="w-50 float-left" >
                    <div class="btn-footer-cust" (click)="openDialog($event)">
                        <span class="pr-2">
                            <img src="{{cdnUrl}}images/smartbuy/icons/sort_icon.svg" > 
                        </span>
                    sort by</div>
                    <!-- <div class="blue-label">{{selectedOption}}</div> -->
                </div>
                <div class="w-50 float-left" (click)="openDialogFilter()" >
                    <div class="btn-footer-cust">
                        <span class="pr-2">
                            <img src="{{cdnUrl}}images/smartbuy/icons/filter_icon.svg" > 
                        </span>
                        FILTER by</div> 
                    <div class="blue-label"></div>
                </div>
            </div>

            <div class="position-fixed footer-btn-diners d-block d-sm-none" *ngIf="!showSortbuy && domainName=='DINERS'">
                    <div class="w-50 float-left" >
                        <div class="btn-footer-cust" (click)="openDialog($event)">sort by</div>
                        <div class="blue-label">{{selectedOption}}</div>
                    </div>
                    <div class="w-50 float-left" (click)="onFilter()">
                        <div class="btn-footer-cust">FILTER by</div> 
                        <div class="blue-label"></div>
                    </div>
                </div>
                <div class="position-fixed footer-btn-business d-block d-sm-none" *ngIf="!showSortbuy && domainName=='BUSINESS'">
                        <div class="w-50 float-left" >
                            <div class="btn-footer-cust" (click)="openDialog($event)">sort by</div>
                            <div class="blue-label">{{selectedOption}}</div>
                        </div>
                        <div class="w-50 float-left" (click)="onFilter()">
                            <div class="btn-footer-cust">FILTER by</div> 
                            <div class="blue-label"></div>
                        </div>
                    </div>

                <div class="position-fixed footer-btn-infinia d-block d-sm-none" *ngIf="!showSortbuy && domainName=='INFINIA'">
                        <div class="w-50 float-left" >
                            <div class="btn-footer-cust" (click)="openDialog($event)">sort by</div>
                            <div class="blue-label">{{selectedOption}}</div>
                        </div>
                        <div class="w-50 float-left" (click)="onFilter()">
                            <div class="btn-footer-cust">FILTER by</div> 
                            <div class="blue-label"></div>
                        </div>
                    </div>

                    <div class="position-fixed footer-btn-regalia d-block d-sm-none" *ngIf="!showSortbuy && domainName=='REGALIA'">
                            <div class="w-50 float-left" >
                                <div class="btn-footer-cust" (click)="openDialog($event)">sort by</div>
                                <div class="blue-label">{{selectedOption}}</div>
                            </div>
                            <div class="w-50 float-left" (click)="onFilter()">
                                <div class="btn-footer-cust">FILTER by</div> 
                                <div class="blue-label"></div>
                            </div>
                        </div>

                        <div class="position-fixed footer-btn-corporate d-block d-sm-none" *ngIf="!showSortbuy && domainName=='CORPORATE'">
                                <div class="w-50 float-left" >
                                    <div class="btn-footer-cust" (click)="openDialog($event)">sort by</div>
                                    <div class="blue-label">{{selectedOption}}</div>
                                </div>
                                <div class="w-50 float-left" (click)="onFilter()">
                                    <div class="btn-footer-cust">FILTER by</div> 
                                    <div class="blue-label"></div>
                                </div>
                            </div>



            <div class="col-md-9 pr-0 p-cut-0 pb-50-m">

                  

                <!--mobile date-->
                <div class="container mobile-date-carousel pl-0 pr-0"> 
                        <div id="carouselContent" class="carousel slide" data-ride="carousel">
                            <div class="carousel-inner" role="listbox">
                                <div class="carousel-item active text-center">
                                    <p class="custom-date-list"><span>{{journeyDate | date: 'dd MMM yyyy'}} </span></p> 
                                </div>
                                <!-- <div class="carousel-item text-center p-4">
                                    <p><span>Tue,</span><span>Mar 30</span></p>
                                </div> -->
                            </div>
                            <a class="carousel-control-prev custom-direction" role="button" data-slide="prev" *ngIf="datePreviousStatus">
                                <span aria-hidden="true" (click)="previousDay()" ><i class="material-icons right-arrow">keyboard_arrow_left</i></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next custom-direction" role="button" data-slide="next">
                                <span aria-hidden="true" (click)="nextDay()" ><i class="material-icons right-arrow">keyboard_arrow_right</i></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>


        <!-- card details start -->
            <div class="cardSelection">
                <div class="row">
                    <div class="col-md-3 col-12">
                        <div class="card_select" >
                        <select (change)="selectedCard($event)">
                        <option *ngFor="let each of customercards; let i = index;" value="{{i}}"   >{{each.card}}</option>
                        </select>
                            </div>
                        <p class="card_num">{{selectedCardValue}}</p>
                    </div>
                    <div class="col-md-3 col-6 text-center mt-sm-2">
                        <div class="pointsAccess">
                            <p>Redeemable points</p>
                            <p>{{customeravailablepoints}} Pts </p>
                        </div>
                    </div>
                  <div class="col-md-3 col-6 text-center mt-sm-2">
                         <!-- <div class="pointsAccess">
                            <p>VIP Lounge Access</p>
                            <p>3 of 6 remaining</p>
                        </div>-->
                    </div>
                    <div class="col-md-3 col-12 text-sm-right text-center mt-3">
                        <button class="bg-transparent border-white btn-outline radius_8 text-white w-70 w-m-100">View All Benifits</button> 
                    </div>
                </div>
            </div>
        <!-- Card Details End  -->
    <app-repeat-booking  searchDisplayForm="irctc" [trains]="trains"  [tag]="tag"  [quota] = "quota" [rowvalue] = "0" [passParam]="passParam" >  </app-repeat-booking>
    <div class="clearfix"></div>
 <div class="row train-avi pt-4" *ngIf="checkavlTrainslength != 0">
     <div class="col-12">
        <h5>All Results</h5>
     </div>
    <div class="col-4" >
         <div class="sort-by-w text-right float-left ">
            <!-- <mat-form-field>
                <mat-select placeholder="Selected Quota" [(ngModel)]="selectedQuota" (ngModelChange)="quotaSelect($event,mobile=false)" >
                    <mat-option *ngFor = "let quota of avlQuota " [value]="quota.quotaCode"><span>{{quota.quotaName}}</span></mat-option>
                </mat-select>
            </mat-form-field>   -->
            <p class="train_count">{{trains.length}} Trains Found</p>
        </div>
    </div>
                        <div class="col-4"> 
                            <!-- <p class="train-avi-info" data-toggle="modal" data-target=".train-availability">Availability <span class="avi-icon"><i class="material-icons">error_outline</i></span></p> -->
                        </div>
                        <div class="col-4">
                                <div class="sort-by-w text-right float-right ">
                                                              
                                        <div class="sort_sec">
                                            <span class="sort_text">Sort By</span>
                                            <select [(ngModel)]="selected" (ngModelChange)="orderBy(selected)">
                                                <option *ngIf = "avlQuota.length != 0" value="leave-early">Early Departure</option>
                                                <option *ngIf = "avlQuota.length != 0" value="leave-late">Late Departure</option>
                                            </select>
                                        </div>
                     
                                        </div>
                        </div>
                    </div>
            
            
                

                <div id="tab-seats-m" class="d-block d-sm-none my-3">
                    <mat-tab-group mat-align-tabs="center" animationDuration="0ms" [selectedIndex]="1" style="padding:0px;margin-top:10px;" (selectedTabChange)= "quotaSelect($event,mobile = true)" 
                    >
                        <!-- <span ></span> -->
                        <mat-tab *ngFor = "let quota of avlQuota"  [label]="quota.quotaCode">
                                <ng-template mat-tab-label>
                                        <span>{{quota.quotaName}}</span>
                                    </ng-template>
                        </mat-tab>
                          
                        
                        <!-- <mat-tab label="Lower Berth Quota">
                          
                        </mat-tab>
                        <mat-tab label="Ladies Quota">
                          
                        </mat-tab>
                        <mat-tab label="Physically Handicapped Quota">
                          
                        </mat-tab> -->
                      </mat-tab-group>
                </div>

                <trains-card *ngFor="let train of trains|irctcfilter:filterDeparture:filterArrival:filterClasses:filterTrainTypes:filterFromStations:filterToStations:sortBy ; let traintrow = index;let isFirstRow=first;" [train]="train" [stationsdump]="stationsdump" [tag]="tag"  [quota] = "quota" [rowvalue] = "traintrow" repeatBooking="0"  [repeatBookingData]=""  [fastestTrain]="fastestTrain" [passParam]="passParam"></trains-card> 
                <div class="clearfix"></div>
               
                <div class="clearfix"></div>
                <span *ngIf="(trains|irctcfilter:filterDeparture:filterArrival:filterClasses:filterTrainTypes:filterFromStations:filterToStations:sortBy).length==0"> 
                        <div class="not-found-img">
                                <div class="not-found">
                                    <img src="{{cdnUrl}}images/icon-no-train.svg" > 
                                    <p class="title">No Trains Found</p>
                                    <p class="caption">Try another route or date</p>
                                    <a href="{{trainUrl}}"><button class="btn-primary btn modify-btn">Go Back to Search Page

                                    </button></a>
                                </div>
                            </div> 
                </span>
            </div>
        </ng-container>
   
    </div>
</div>


