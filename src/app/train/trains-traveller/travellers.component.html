<div class="flight_mlite_process" *ngIf="REWARD_CUSTOMERID !='0000'">
    <section class="mob-flights-listing" *ngIf="searchData && isMobile">
        <div class="container">
            <div class="row">
                <div class="col-md-12 p-0">
                    <div class="mob-listing-header">
                        <div class="mob-listing-header-left">
                            <a href="javascript:;" (click)="goback()">
                                <img src="{{cdnUrl}}/images/icons/left.png" alt="" />
                            </a>
                        </div>
                        <div class="mob-listing-header-center">
                            <h6>{{searchData.fromCity}} - {{searchData.toCity}} <span *ngIf="searchData && searchData.flightdefault=='R'"> | {{searchData.toCity}} - {{searchData.fromCity}}</span></h6>

                        </div>
                        <div class="mob-listing-header-right">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- mlite fixed header  -->
    <div class="row d-md-none">
        <div class="col-md-12 p-0 fixed-top" *ngIf="isMobile">

            <div class="mlite_fixed_hdr">
                <!-- <div class="mob-listing-header-left">
                <a href="javascript:;" routerLink="/compare-fly" >
                    <img src="{{cdnUrl}}/images/icons/left.png" alt="" />
                </a>
            </div>
            <div class="mob-listing-header-center">
                <h6>{{fromstnDesc}} - {{tostnDesc}}</h6>
                <p>{{traveldate | date:'MMM dd, yyyy'}}  </p>
            </div> -->

                <div class="row ">
                    <div class="col-1 pr-0 text-center">
                        <a href="javascript:;" (click)="goback()">
                            <img src="{{cdnUrl}}/images/icons/left.png" alt="" />
                        </a>
                    </div>
                    <div class="col-10 p-0">
                        <div class="mob-listing-header-center">
                            <h6>{{fromstnDesc}} - {{tostnDesc}}</h6>
                            <p>{{traveldate | date:'MMM dd, yyyy'}} </p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <!-- end of mlite fixed header -->
    <section class="details-steps-area mb-40" [ngClass]="{'mt-140': !isMobile , 'mt-6rem':isMobile }">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="details-steps-box">
                        <ul class="m-0 details-steps-ul">
                            <li>
                                <a href="javascript:void(0)" [ngClass]="{'active1': completedSteps > 1 , 'active':steps==1 }" (click)="moveTab(1)">
                                    <span class="steps-icons"><img src="{{cdnUrl}}/images/flights_details/train.svg" alt="" /></span>
                                    <span class="steps-text">Train Details</span>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" [ngClass]="{'active1': completedSteps >2  , 'active':steps==2 }" (click)="moveTab(2)">
                                    <span class="steps-icons"><img src="{{cdnUrl}}/images/flights_details/user.svg" alt="" /></span>
                                    <span class="steps-text">Traveller Details</span>
                                </a>
                            </li>

                            <li>
                                <a href="javascript:void(0)" [ngClass]="{'active1': completedSteps > 3 , 'active':steps==3 }" (click)="moveTab(3)">
                                    <span class="steps-icons"><img src="{{cdnUrl}}/images/flights_details/review.svg" alt="" /></span>
                                    <span class="steps-text">Review Booking</span>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" [ngClass]="{'active1': completedSteps== 4 , 'active':steps==4 }" (click)="moveTab(4)">
                                    <span class="steps-icons"><img src="{{cdnUrl}}/images/flights_details/card.svg" alt="" /></span>
                                    <span class="steps-text">Payment</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<main class="site-main" *ngIf="REWARD_CUSTOMERID !='0000'">
    <section class="flight-details-area mt-10">
        <!-- Mlite Sesssion Timer Code -->
        <div class="d-block d-sm-none">
            <div class="sidebar-widget session-expires-widget text-center">
                <p><img src="{{cdnUrl}}/images/icons/sestion.svg" class="me-2" alt="">Booking Expires in <strong>
          <countdown [config]="{ leftTime: 900, format: 'mm:ss'}" (event)="bookingSessionExpires($event)"></countdown>
          min
        </strong></p>
            </div>
        </div>
        <div class="container">
            <div class="row mb-20">

                <!--Steps 1-->
                <div class="col-md-8" *ngIf="steps==1 && trainDetails">
                    <div class="booking-process-content">
                        <div class="booking-title-box">
                            <h4>Train Details</h4>
                        </div>
                        <form [formGroup]="idForm" name="idForm">
                            <div class="booking-inner-box from-to-box">

                                <!-- Webcode Train Details-->
                                <div class="d-none d-sm-block">
                                    <div class="row">

                                        <div class="col-sm-4">
                                            <p class="train_name">
                                                {{trainName}}<span class="train_numb">({{trainnumber}})</span>
                                            </p>
                                            <p class="daily_chart">
                                                <span class="text-small-gray" style="color:#000000;">Runs on:</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningSun=='Y' }">S</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningMon=='Y' }">M</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningTue=='Y' }">T</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningWed=='Y' }">W</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningThu=='Y' }">T</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningFri=='Y' }">F</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningSat=='Y' }">S</span>
                                            </p>
                                        </div>
                                        <div class="col-sm-8">
                                            <div class="trainTimeInfo">
                                                <div class="trainTimeInfo_div">
                                                    <p><span class="time">{{scheduletime}}, {{traveldate | date:'EEE'}}</span></p>
                                                    <p class="place">{{fromstnDesc}} Boarding: {{boardingstnName}} </p>
                                                    <p class="date">{{traveldate | date:'MMM dd, yyyy'}}</p>
                                                </div>
                                                <div class="trainTimeInfo_div align_center">
                                                    <div class="duration_train">
                                                        <p class="dur_time">{{travelDuration}}</p>
                                                        <div class="range m_range"></div>
                                                    </div>
                                                </div>
                                                <div class="trainTimeInfo_div">
                                                    <p><span class="time">{{arrivalTime}}, {{journeyArrivalDate | date:'EEE'}}</span> </p>
                                                    <p class="place">{{tostnDesc}}</p>
                                                    <p class="date">{{journeyArrivalDate | date:'MMM dd, yyyy'}}</p>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <!-- Mlitecode Train Details -->
                                <div class="d-block d-sm-none m-light">
                                    <div class="row">
                                        <div class="col-6">
                                            <p class="train_name">
                                                {{trainName}}<span class="train_numb">({{trainnumber}})</span>
                                            </p>
                                        </div>
                                        <div class="col-6 text-right">
                                            <p class="daily_chart">
                                                <!-- <span class="text-small-gray" style="color:#000000;">Runs on:</span> -->
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningSun=='Y' }">S</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningMon=='Y' }">M</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningTue=='Y' }">T</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningWed=='Y' }">W</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningThu=='Y' }">T</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningFri=='Y' }">F</span>
                                                <span [ngClass]="{'active': seacthResult.selectedTrain.runningSat=='Y' }">S</span>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="trainTimeInfo d-block">
                                        <div class="row my-2">
                                            <div class="col-3 pr-0">
                                                <div>
                                                    <p><span class="time">{{scheduletime}}, {{traveldate | date:'EEE'}}</span></p>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="duration_train">
                                                    <p class="dur_time">{{travelDuration}}</p>
                                                    <div class="range m_range"></div>
                                                </div>
                                            </div>
                                            <div class="col-3 text-right pl-0">
                                                <div>
                                                    <p><span class="time">{{arrivalTime}}, {{journeyArrivalDate | date:'EEE'}}</span> </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="trainTimeInfo d-block">
                                        <div class="row border-bottom pb-4">
                                            <div class="col-6">
                                                <p class="place">{{fromstnDesc}} Boarding: {{boardingstnName}} </p>
                                                <p class="date">{{traveldate | date:'MMM dd, yyyy'}}</p>
                                            </div>
                                            <div class="col-6 text-right">
                                                <p class="place">{{tostnDesc}}</p>
                                                <p class="date">{{journeyArrivalDate | date:'MMM dd, yyyy'}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="gx-md-5 gy-4 mt-1 row">

                                    <div class="col-sm-4">
                                        <p class="train_title_label"> Availability Status </p>
                                        <div class="common_box">
                                            <div>
                                                <p class="ava_status">
                                                    <span class="coach">{{enqClass}}</span>
                                                    <!-- <span class="list">
                                                    {{seacthResult.selectedAvailablityFare.availablityStatus}}
                                                   </span> -->
                                                    <span class="label-green" *ngIf="seacthResult.selectedAvailablityFare.availablityType!=0 && seacthResult.selectedAvailablityFare.availablityType!=4 && seacthResult.selectedAvailablityFare.availablityType!=5 && seacthResult.selectedAvailablityFare.availablityType!=8224 && seacthResult.selectedAvailablityFare.availablityType!=3">
                                                    {{seacthResult.selectedAvailablityFare.availablityStatus}}
                                                   </span>
                                                    <span class="label-red" *ngIf="seacthResult.selectedAvailablityFare.availablityType==0 || 
                                                    seacthResult.selectedAvailablityFare.availablityType==4 || seacthResult.selectedAvailablityFare.availablityType==5 || seacthResult.selectedAvailablityFare.availablityType==8224">
                                                    {{seacthResult.selectedAvailablityFare.availablityStatus}}
                                                   </span>
                                                    <span class="label-orange" *ngIf="seacthResult.selectedAvailablityFare.availablityType==3">
                                                    {{seacthResult.selectedAvailablityFare.availablityStatus}}
                                                   </span>



                                                </p>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-sm-8">
                                        <!--Show bording stations-->
                                        <p class="train_title_label"> Boarding station </p>
                                        <div class="">
                                            <div class="boarding_point">
                                                <p class="change_text">Change</p>

                                                <mat-form-field class="w-100 mlite_broading_pint_select" appearance="outline">
                                                    <mat-select placeholder="Select boarding station" formControlName="boardingStation" [(ngModel)]="defaultBoardingStation" (ngModelChange)="trainSchedlue(defaultBoardingStation)">
                                                        <mat-option *ngFor="let stationList of stationNames" [value]="stationList.stnNameCode">
                                                            {{stationList.stnNameCode}} </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <div *ngIf="submittedUserInfoForm && idForm.controls['boardingStation']['errors']" class="error">
                                                    <small *ngIf="idForm.controls['boardingStation']['errors']['required']">Please select boarding station.</small>
                                                </div>
                                            </div>
                                            <div class="train-schedule-time">
                                                <span>Scheduled time: <span>{{scheduletime}}</span> </span>
                                            </div>

                                        </div>
                                    </div>

                                </div>

                            </div>

                            <div class="booking-inner-box from-to-box">
                                <div class="booking-inner-title">
                                    <div class="booking-inner-title-left">

                                        <div class="">
                                            <div class="button-wrap">
                                                <div class="traveler-details mlr-15">
                                                    <div class=clearfix></div>
                                                    <div class="traveler-details-info">
                                                        <h4 class="default_title">IRCTC Username</h4>
                                                        <p class="warning_msg">IRCTC username will be required after Payment. Please ensure you have entered correct username.</p>
                                                        <div class="row">
                                                            <div class="col-md-12 my-3">
                                                                <div class="row">
                                                                    <div class="col-md-6 col-12 train_custom_input">
                                                                        <mat-form-field class="w-100" appearance="outline">
                                                                            <mat-label>IRCTC Authorized Partner User ID</mat-label>
                                                                            <input matInput placeholder="" formControlName="userID" value="{{IRCTCUserId}}" [(ngModel)]="IRCTCUserId" autocomplete="off" (keypress)="AvoidSpace($event);">
                                                                        </mat-form-field>
                                                                        <div class="error" *ngIf="userValidError">
                                                                            <small>{{IRCTCUserError}}</small>
                                                                        </div>
                                                                        <div *ngIf="(submittedUserInfoForm && idForm.controls['userID']['errors']) || (idForm.controls.userID.touched)" class="error">
                                                                            <small *ngIf="idForm.hasError('required','userID')">Please enter IRCTC Authorised Partner user id.</small>
                                                                            <small *ngIf="idForm.hasError('minlength','userID')">Please enter atleast 2 character.</small>
                                                                            <small *ngIf="idForm.hasError('pattern','userID')">Please enter valid user id.</small>
                                                                            <!-- <small *ngIf="userValidError">{{IRCTCUserError}}</small>  -->
                                                                            <!-- <small *ngIf="idForm.controls['userID']['errors']['required']">Please enter IRCTC user id.</small>
                                                            <small *ngIf="idForm.controls['userID']['errors']['pattern']">Please enter valid user id.</small>
                                                            <small *ngIf="idForm.controls['userID']['errors']['minlength']">Please enter atleast 2 character.</small> -->
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6 col-12">
                                                                        <div class="irctc_link">
                                                                            <a (click)="registration()" class="anchor">Create User ID</a> | <a (click)="forgotUserId()" class="anchor">Forgot User ID ?</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <p class="note_msg"><span>Note:</span> Please make sure that you remember your IRCTC Authorised Partner password as you need to confirm your booking. Incase you don't, you can <a href="javascript:void();" (click)="resetPassword()"
                                                                class="# anchor">Reset your password</a>. If the OTP validation is not completed at the time of registration, you could click <a href="javascript:void();" class="# anchor" (click)="validateOTP()">here to validate.</a></p>

                                                        <!-- <span class="# anchor" (click)="validateOTP()">Validate OTP</span> -->
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div class="traveler-details mb-100" *ngIf="!isMobile">
                            <div class="gap-2 d-md-block">
                                <button class="btn btn-primary btn-w" (click)="submitBookingInfo()">Continue</button>
                                <button class="btn btn-primary-outline btn-w ms-3" (click)="backClicked()">Back</button>
                            </div>
                        </div>





                    </div>
                </div>
                <div class="col-md-8" *ngIf="irctcRegister">
                    <div class="booking-process-content">
                        <div class="booking-title-box">
                            <h4>IRCTC Authorised Partner Registration</h4>
                        </div>
                    </div>
                    <div>
                        <app-irctcreg> </app-irctcreg>
                    </div>
                    <h5>hello</h5>
                </div>
                <!--Steps 1 Ends-->

                <!--Steps 2 Starts-->
                <div class="col-md-8" *ngIf="steps==2">
                    <div class="booking-title-box">
                        <h4> Traveller Details </h4>
                    </div>


                    <form [formGroup]="passengerForm" name="passengerForm">
                        <div class="booking-inner-box ">
                            <div class="traveller-person-title add-traveller-title">
                                <div class="traveller-person-left">
                                    <h6>Add Travellers</h6>
                                </div>
                                <div class="traveller-person-right">
                                    <p class="text-color">Name should be same as in Government ID proof</p>
                                </div>
                            </div>
                            <div class="traveller-addbox traveller-adults">
                                <div class="info_msg">
                                    <i class="material-icons me-2">error</i> You can add upto 6 travelers at a time.
                                </div>
                                <div class="traveller-addbox-details traveller-adults-details">
                                    <div class="traveller-adults-ul">
                                        <ul class="add-search-ul">
                                            <li class="custom-check-box" *ngFor="let passenger of adulttravellerlist | slice:0:3; ">
                                                <div class="form-check check_pass">
                                                    <input class="form-check-input pass_checkBox" id="travelPassenger_{{passenger.id}}" type="checkbox" name="travellerlist" (change)="clickPassenger($event,passenger,passenger.id)">
                                                    <label class="form-check-label" for="travelPassenger_{{passenger.id}}">
                                <div class="label_top_align">{{passenger.title?passenger.title+'.':''}}{{passenger.firstName}} {{passenger.lastName}}|  {{passenger.age}} Years |  {{(passenger.gender=="T") ? 'Transgender ': passenger.gender }}</div>
                                <!-- <a href="javascript:;" class="ps-3" (click)="editPassenger(passenger,passenger.id)"><img src="{{cdnUrl}}images/smartbuy/icons/edit_icon.svg" ></a> -->
                                </label>
                                                </div>
                                                <div id="passengerBox_{{passenger.id}}" class="">


                                                    <ng-container *ngIf="passenger && passenger.age < 5 && saveChildTravellerId[passenger.id] > 0">
                                                        <input type="hidden" value="{{saveChildTravellerId[passenger.id]}}" id="passengerChildBoxId_{{passenger.id}}" />
                                                        <div class=" contact-form edit_traveller_sec mt-20 row">
                                                            <div class="inner_input col-md-4 col-12">
                                                                <mat-form-field class="matField_full_width" appearance="outline">
                                                                    <mat-label>Name</mat-label>
                                                                    <input matInput placeholder="Name" formControlName="childName{{saveChildTravellerId[passenger.id]}}" (keypress)="flInput($event)" maxlength="{{maxNameLength}}" autocomplete="off" onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false">
                                                                </mat-form-field>
                                                                <div *ngIf="submitted && passengerForm.controls['childName'+saveChildTravellerId[passenger.id]]['errors'] && passengerForm.controls['childName'+saveChildTravellerId[passenger.id]]['touched'] " class="error">
                                                                    <small *ngIf="passengerForm.hasError('required','childName'+saveChildTravellerId[passenger.id])">Please enter
                              name.</small>
                                                                    <small *ngIf="passengerForm.hasError('pattern','childName'+saveChildTravellerId[passenger.id])">Please enter valid
                              name.</small>
                                                                    <small *ngIf="passengerForm.hasError('minlength','childName'+saveChildTravellerId[passenger.id])">Please enter atleast
                              {{minNameLength}} character.</small>
                                                                </div>
                                                            </div>
                                                            <div class="inner_input col-md-4 col-12 gender_sec">
                                                                <mat-form-field class="matField_full_width" appearance="outline">
                                                                    <mat-label>Gender</mat-label>
                                                                    <mat-select matNativeControl formControlName="childGender{{saveChildTravellerId[passenger.id]}}">
                                                                        <mat-option value="M">Male</mat-option>
                                                                        <mat-option value="F">Female</mat-option>
                                                                        <mat-option value="T">Transgender</mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>
                                                                <div *ngIf="submitted && passengerForm.controls['childGender'+saveChildTravellerId[passenger.id]]['errors'] && passengerForm.controls['childGender'+saveChildTravellerId[passenger.id]]['touched']" class="error">
                                                                    <small *ngIf="passengerForm.hasError('required','childGender'+saveChildTravellerId[passenger.id])">Please select
                                  gender.</small>
                                                                </div>
                                                            </div>
                                                            <div class="inner_input col-md-4 col-12 ">
                                                                <mat-form-field class="matField_full_width" appearance="outline">
                                                                    <mat-label>Age</mat-label>
                                                                    <mat-select matNativeControl formControlName="childAge{{saveChildTravellerId[passenger.id]}}">
                                                                        <mat-mat-option value="0">Below One Year</mat-mat-option>
                                                                        <mat-mat-option value="1">One year</mat-mat-option>
                                                                        <mat-mat-option value="2">Two years</mat-mat-option>
                                                                        <mat-mat-option value="3">Three years</mat-mat-option>
                                                                        <mat-mat-option value="4">Four years</mat-mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>
                                                                <div *ngIf="submitted && passengerForm.controls['childAge'+saveChildTravellerId[passenger.id]]['errors'] && passengerForm.controls['childAge'+saveChildTravellerId[passenger.id]]['touched']" class="error">
                                                                    <small *ngIf="passengerForm.hasError('required','childAge'+saveChildTravellerId[passenger.id])">Please select
                                  age.</small>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </ng-container>

                                                    <ng-container *ngIf="passenger && passenger.age > 4 && saveTravellerId[passenger.id] > 0">
                                                        <input type="hidden" value="{{saveTravellerId[passenger.id]}}" id="passengerBoxId_{{passenger.id}}" />
                                                        <div class="mt-20">
                                                            <div class=" contact-form edit_traveller_sec g-3 row">
                                                                <div class="inner_input col-md-4 col-12">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Passenger Name</mat-label>
                                                                        <input matInput placeholder="Name" formControlName="passengerName{{saveTravellerId[passenger.id]}}" (keypress)="flInput($event)" maxlength="{{maxNameLength}}" autocomplete="off" onDrag="return false" onDrop="return false">
                                                                    </mat-form-field>
                                                                    <div *ngIf="submitted && 'passengerName'+saveTravellerId[passenger.id].errors && 'passengerName'+saveTravellerId[passenger.id].touched" class="error">
                                                                        <small *ngIf="passengerForm.hasError('required','passengerName'+saveTravellerId[passenger.id])">Please enter
                                            name.</small>
                                                                        <small *ngIf="passengerForm.hasError('pattern','passengerName'+saveTravellerId[passenger.id])">Please enter
                                            valid name.</small>
                                                                        <small *ngIf="passengerForm.hasError('minlength','passengerName'+saveTravellerId[passenger.id])">Please enter
                                            atleast {{minNameLength}} character.</small>
                                                                        <small *ngIf="passengerForm.hasError('maxlength','passengerName'+saveTravellerId[passenger.id])">Please enter
                                            atleast {{maxNameLength}} character.</small>
                                                                    </div>
                                                                </div>
                                                                <div class="inner_input col-md-4 col-12 gender_sec">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Gender</mat-label>
                                                                        <mat-select matNativeControl [(ngModel)]="genderSelectArr[saveTravellerId[passenger.id]]" (ngModelChange)="seniorCitizenArr(genderSelectArr[saveTravellerId[passenger.id]],saveTravellerId[passenger.id])" formControlName="passengerGender{{saveTravellerId[passenger.id]}}">
                                                                            <mat-option value="M">Male</mat-option>
                                                                            <mat-option value="F">Female</mat-option>
                                                                            <mat-option value="T">Transgender</mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                    <div *ngIf="submitted && 'passengerGender'+saveTravellerId[passenger.id].errors && 'passengerGender'+saveTravellerId[passenger.id].touched" class="error">
                                                                        <small *ngIf="passengerForm.hasError('required','passengerGender'+saveTravellerId[passenger.id])">Please
                                            select gender.</small>
                                                                    </div>
                                                                </div>
                                                                <div class="inner_input col-md-4 col-12 age_sec">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Age</mat-label>
                                                                        <input matInput placeholder="Age" formControlName="passengerAge{{saveTravellerId[passenger.id]}}" maxlength="3" (keypress)="numberInput($event)" (keyup)="maxAgeLimitArr(saveTravellerId[passenger.id])" autocomplete="off" onCopy="return false" onDrag="return false"
                                                                            onDrop="return false" onPaste="return false">
                                                                    </mat-form-field>
                                                                    <div *ngIf="submitted && 'passengerAge'+saveTravellerId[passenger.id].errors && 'passengerAge'+saveTravellerId[passenger.id].touched" class="error">
                                                                        <small *ngIf="passengerForm.hasError('required','passengerAge'+saveTravellerId[passenger.id])">Please
                                            enter age.</small>
                                                                        <small *ngIf="passengerForm.hasError('pattern','passengerAge'+saveTravellerId[passenger.id])">Age should
                                            be numeric.</small>
                                                                        <small *ngIf="passengerForm.hasError('min','passengerAge'+saveTravellerId[passenger.id])">{{ageValidErrorArr[saveTravellerId[passenger.id]]}}</small>
                                                                        <small *ngIf="passengerForm.hasError('max','passengerAge'+saveTravellerId[passenger.id])">{{ageValidErrorArr[saveTravellerId[passenger.id]]}}</small>
                                                                    </div>
                                                                </div>
                                                                <div class="inner_input col-md-4 col-12">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Passenger Birth Choice</mat-label>
                                                                        <mat-select matNativeControl formControlName="passengerBerthChoice{{saveTravellerId[passenger.id]}}">
                                                                            <mat-option value="">No Preference</mat-option>
                                                                            <mat-option *ngFor="let each of applicableBerthTypes" value="{{each}}">{{masterBerth[each]}}</mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="inner_input col-md-4 col-12">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Nationality</mat-label>
                                                                        <mat-select matNativeControl [(ngModel)]="defaultCountryArr[saveTravellerId[passenger.id]]" (ngModelChange)="countrySelectAddMore(saveTravellerId[passenger.id])" formControlName="passengerNationality{{saveTravellerId[passenger.id]}}">
                                                                            <mat-option *ngFor="let each of countries" [value]="each.countryCode"> {{each.country}}</mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="traveler-details-info">
                                                            <div class="row contact-form">
                                                                <div class="col-12 col-md-6" *ngIf="showTravelDocumentAddMore[saveTravellerId[passenger.id]]">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Travel Document</mat-label>
                                                                        <mat-select placeholder="" formControlName="passengerTravelDocument{{saveTravellerId[passenger.id]}}">
                                                                            <mat-option value="PASSPORT"> PASSPORT/TRAVEL DOCUMENT</mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                    <div *ngIf="submitted && passengerForm.controls['passengerTravelDocument'+saveTravellerId[passenger.id]]['errors'] &&passengerForm.controls['passengerTravelDocument'+saveTravellerId[passenger.id]]['touched']" class="error">
                                                                        <small *ngIf="passengerForm.hasError('required','passengerTravelDocument'+saveTravellerId[passenger.id])">Please
                                            enter travel document.</small>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6 col-12" *ngIf="showTravelDocumentAddMore[saveTravellerId[passenger.id]]">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Passport No</mat-label>
                                                                        <input matInput placeholder="" formControlName="passengerTravelDocCardNo{{saveTravellerId[passenger.id]}}" maxlength="{{maxPassportLength}}" autocomplete="off" onDrag="return false" onDrop="return false" (keypress)="specialcharInput($event)" (keyup)="convertToUpperCase($event)">
                                                                    </mat-form-field>
                                                                    <div *ngIf="submitted && passengerForm.controls['passengerTravelDocCardNo'+saveTravellerId[passenger.id]]['errors'] &&passengerForm.controls['passengerTravelDocCardNo'+saveTravellerId[passenger.id]]['touched']" class="error">
                                                                        <small *ngIf="passengerForm.hasError('required','passengerTravelDocCardNo'+saveTravellerId[passenger.id])">Please
                                            enter passport number.</small>
                                                                        <small *ngIf="passengerForm.hasError('minlength','passengerTravelDocCardNo'+saveTravellerId[passenger.id])">Please
                                            enter atleast {{minPassportLength}} characters.</small>
                                                                        <small *ngIf="passengerForm.hasError('pattern','passengerTravelDocCardNo'+saveTravellerId[passenger.id])">Please
                                            enter valid passport number.</small>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row contact-form" *ngIf="showTravelDocumentAddMore[saveTravellerId[passenger.id]]">
                                                                <div class="col-md-6">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Date of Birth(DD-MM-YYYY)</mat-label>
                                                                        <input matInput [matDatepicker]="picker2" disabled formControlName="foreignPassengerDOB{{saveTravellerId[passenger.id]}}" [min]="calenderminDate" [max]="calendermaxDate">
                                                                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                                                        <mat-datepicker #picker2 disabled="false"></mat-datepicker>
                                                                    </mat-form-field>
                                                                </div>
                                                            </div>
                                                            <div class="row contact-form">
                                                                <div class="col-12 col-md-6" *ngIf="foodChoiceEnabled">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Meal Preference</mat-label>
                                                                        <mat-select placeholder="" formControlName="passengerMealPreference{{saveTravellerId[passenger.id]}}">
                                                                            <mat-option *ngFor="let each of foodDetails" [value]="each"> {{masterFood[each]}}
                                                                            </mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                    <div *ngIf="submitted && passengerForm.controls['passengerMealPreference'+saveTravellerId[passenger.id]]['errors']" class="error">
                                                                        <small *ngIf="passengerForm.controls['passengerMealPreference'+saveTravellerId[passenger.id]]['errors']['required']">Food
                                            Choice is required.</small>
                                                                    </div>
                                                                </div>
                                                                <div class="col-12 col-md-6" *ngIf="seniorCitizenEnabledArr[saveTravellerId[passenger.id]] && seniorCitizenApplicableArr[saveTravellerId[passenger.id]]">
                                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                                        <mat-label>Senior Citizen Concession</mat-label>
                                                                        <mat-select placeholder="" formControlName="passengerSeniorCitizen{{saveTravellerId[passenger.id]}}">
                                                                            <mat-option value="1"> Avail Concession </mat-option>
                                                                            <mat-option value="2"> Forgo 50% Concession </mat-option>
                                                                            <mat-option value="3"> Forgo full Concession </mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                    <div *ngIf="submitted && passengerForm.controls['passengerSeniorCitizen'+saveTravellerId[passenger.id]]['errors']" class="error">
                                                                        <small *ngIf="passengerForm.controls['passengerSeniorCitizen'+saveTravellerId[passenger.id]]['errors']['required']">Please select Senior citizen concession.</small>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-check mt-3">
                                                                <span *ngIf="optChildBerthStatusArr[saveTravellerId[passenger.id]]"> <label class="form-check-label">
                                                                    <input type="checkbox" (click)="optChildBerth($event)" [checked]="ladiesQuotaTrue"
                                                                        formControlName="optChildBerth{{saveTravellerId[passenger.id]}}" id="optChildBerth{{saveTravellerId[passenger.id]}}" class="ps-1 form-check-input pass_checkBox"> 
                                                                        <div class="label_top_align">Opt Child Berth check</div>
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                                </span>
                                                            </div>
                                                            <p *ngIf="optBedRollStatus"> <label class="checkbox">Opt Bed Roll
                                    <input type="checkbox" (change)="optBedRoll($event,i)"
                                        formControlName="optBedRoll{{saveTravellerId[passenger.id]}}">
                                    <span class="checkmark"></span>
                                    </label>
                                                            </p>
                                                        </div>


                                                    </ng-container>
                                                </div>
                                            </li>

                                            <span *ngIf="adulttravellerlist && adulttravellerlist.length >3 && isAdultExpanded " class="w-100">
                        <li  class="custom-check-box" *ngFor="let passenger of adulttravellerlist  | slice:4; "> 
                          <div class="form-check check_pass">
                                <input class="form-check-input pass_checkBox"  id="travelPassenger_{{passenger.id}}" type="checkbox" name="travellerlist" (change)="clickPassenger($event,passenger,passenger.id)" >
                                <label class="form-check-label" for="travelPassenger_{{passenger.id}}">
                                {{passenger.title?passenger.title+'.':''}}{{passenger.firstName}} {{passenger.lastName}}|  {{passenger.age}} Years |  {{(passenger.gender=="T") ? 'Transgender ': passenger.gender }}
                                  <!-- <a href="javascript:;" class="ps-3" (click)="editPassenger(passenger,passenger.id)"><img src="{{cdnUrl}}images/smartbuy/icons/edit_icon.svg"></a> -->
                                </label>
                            </div>
                              <!-- <div class="edit_pass">
                                <a href="javascript:;" (click)="editPassenger(passenger,passenger.id)"><img src="{{cdnUrl}}images/smartbuy/icons/edit_icon.svg"></a>
                              </div> -->
                              <div id="passengerBox_{{passenger.id}}" class="" >
                              
                              
                                <ng-container *ngIf="passenger && passenger.age < 5 && saveChildTravellerId[passenger.id] > 0" >  
                              <input type="hidden" value="{{saveChildTravellerId[passenger.id]}}" id="passengerChildBoxId_{{passenger.id}}" />
                              <div class=" contact-form edit_traveller_sec mt-20 row">
                                <div class="inner_input col-md-4 col-12">
                                    <mat-form-field class="matField_full_width" appearance="outline">
                                        <mat-label>Name</mat-label>
                                        <input matInput placeholder="Name" formControlName="childName{{saveChildTravellerId[passenger.id]}}" (keypress)="flInput($event)" maxlength="{{maxNameLength}}" autocomplete="off" onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false">
                                    </mat-form-field>
                                    <div *ngIf="submitted && passengerForm.controls['childName'+saveChildTravellerId[passenger.id]]['errors'] && passengerForm.controls['childName'+saveChildTravellerId[passenger.id]]['touched'] " class="error">
                                                        <small *ngIf="passengerForm.hasError('required','childName'+saveChildTravellerId[passenger.id])">Please enter
                              name.</small>
                                                        <small *ngIf="passengerForm.hasError('pattern','childName'+saveChildTravellerId[passenger.id])">Please enter valid
                              name.</small>
                                                        <small *ngIf="passengerForm.hasError('minlength','childName'+saveChildTravellerId[passenger.id])">Please enter atleast
                              {{minNameLength}} character.</small>
                                                    </div>
                                </div>
                                <div class="inner_input col-md-4 col-12 gender_sec">
                                  <mat-form-field class="matField_full_width" appearance="outline">
                                        <mat-label>Gender</mat-label>
                                        <mat-select matNativeControl formControlName="childGender{{saveChildTravellerId[passenger.id]}}">
                                          <mat-option value="M">Male</mat-option>
                                          <mat-option value="F">Female</mat-option>
                                        <mat-option value="T">Transgender</mat-option> 
                                        </mat-select>
                                      </mat-form-field>
                                    <div *ngIf="submitted && passengerForm.controls['childGender'+saveChildTravellerId[passenger.id]]['errors'] && passengerForm.controls['childGender'+saveChildTravellerId[passenger.id]]['touched']" class="error">
                                                                <small *ngIf="passengerForm.hasError('required','childGender'+saveChildTravellerId[passenger.id])">Please select
                                  gender.</small>
                                                            </div>
                                </div>
                                <div class="inner_input col-md-4 col-12 ">
                                  <mat-form-field class="matField_full_width" appearance="outline">
                                        <mat-label>Age</mat-label>
                                        <mat-select matNativeControl formControlName="childAge{{saveChildTravellerId[passenger.id]}}">
                                          <mat-option value="0">Below One Year</mat-option>
                                          <mat-option value="1">One year</mat-option>
                                          <mat-option value="2">Two years</mat-option>
                                          <mat-option value="3">Three years</mat-option>
                                            <mat-option value="4">Four years</mat-option>
                                        </mat-select>
                                      </mat-form-field>
                                    <div *ngIf="submitted && passengerForm.controls['childAge'+saveChildTravellerId[passenger.id]]['errors'] && passengerForm.controls['childAge'+saveChildTravellerId[passenger.id]]['touched']" class="error">
                                                                <small *ngIf="passengerForm.hasError('required','childAge'+saveChildTravellerId[passenger.id])">Please select
                                  age.</small>
                                                            </div>  
                                </div>
                                
                            </div>
                            </ng-container> 
                            
                            
                              <ng-container *ngIf="passenger && passenger.age > 4 && saveTravellerId[passenger.id] > 0" >
                              <input type="hidden" value="{{saveTravellerId[passenger.id]}}" id="passengerBoxId_{{passenger.id}}" />

                                    <div>
                                        <div class=" contact-form edit_traveller_sec g-3 row">
                                        <div class="inner_input col-md-4 col-12">

                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Passenger Name</mat-label>
                                                <input matInput placeholder="Name" formControlName="passengerName{{saveTravellerId[passenger.id]}}" (keypress)="flInput($event)" maxlength="{{maxNameLength}}" autocomplete="off" onDrag="return false" onDrop="return false">
                                            </mat-form-field>
                                            <div *ngIf="submitted && 'passengerName'+saveTravellerId[passenger.id].errors && 'passengerName'+saveTravellerId[passenger.id].touched" class="error">
                                                <small *ngIf="passengerForm.hasError('required','passengerName'+saveTravellerId[passenger.id])">Please enter
                                                name.</small>
                                                <small *ngIf="passengerForm.hasError('pattern','passengerName'+saveTravellerId[passenger.id])">Please enter
                                                valid name.</small>
                                                <small *ngIf="passengerForm.hasError('minlength','passengerName'+saveTravellerId[passenger.id])">Please enter
                                                atleast {{minNameLength}} character.</small>
                                                <small *ngIf="passengerForm.hasError('maxlength','passengerName'+saveTravellerId[passenger.id])">Please enter
                                                atleast {{maxNameLength}} character.</small>
                                            </div>
                                        </div>
                                        <div class="inner_input col-md-4 col-12 gender_sec">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Gender</mat-label>
                                                <mat-select matNativeControl [(ngModel)]="genderSelectArr[saveTravellerId[passenger.id]]" (ngModelChange)="seniorCitizenArr(genderSelectArr[saveTravellerId[passenger.id]],saveTravellerId[passenger.id])" formControlName="passengerGender{{saveTravellerId[passenger.id]}}">
                                                <mat-option value="M">Male</mat-option>
                                                <mat-option value="F">Female</mat-option>
                                                <mat-option value="T">Transgender</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <div *ngIf="submitted && 'passengerGender'+saveTravellerId[passenger.id].errors && 'passengerGender'+saveTravellerId[passenger.id].touched" class="error">
                                                <small *ngIf="passengerForm.hasError('required','passengerGender'+saveTravellerId[passenger.id])">Please
                                                select gender.</small>
                                            </div>
                                        </div>
                                        <div class="inner_input col-md-4 col-12 age_sec">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Age</mat-label>
                                                <input matInput placeholder="Age" formControlName="passengerAge{{saveTravellerId[passenger.id]}}" maxlength="3" (keypress)="numberInput($event)" (keyup)="maxAgeLimitArr(saveTravellerId[passenger.id])" autocomplete="off" onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false">
                                            </mat-form-field>
                                            <div *ngIf="submitted && 'passengerAge'+saveTravellerId[passenger.id].errors && 'passengerAge'+saveTravellerId[passenger.id].touched" class="error">
                                                <small *ngIf="passengerForm.hasError('required','passengerAge'+saveTravellerId[passenger.id])">Please
                                                enter age.</small>
                                                <small *ngIf="passengerForm.hasError('pattern','passengerAge'+saveTravellerId[passenger.id])">Age should
                                                be numeric.</small>
                                                <small *ngIf="passengerForm.hasError('min','passengerAge'+saveTravellerId[passenger.id])">{{ageValidErrorArr[saveTravellerId[passenger.id]]}}</small>
                                                <small *ngIf="passengerForm.hasError('max','passengerAge'+saveTravellerId[passenger.id])">{{ageValidErrorArr[saveTravellerId[passenger.id]]}}</small>
                                            </div>
                                        </div>
                                        <div class="inner_input col-md-4 col-12">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Seat Preference</mat-label>
                                                <mat-select matNativeControl formControlName="passengerBerthChoice{{saveTravellerId[passenger.id]}}">
                                                    <mat-option value="">No Preference</mat-option>
                                                    <mat-option *ngFor="let each of applicableBerthTypes" value="{{each}}">{{masterBerth[each]}}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                        <div class="inner_input col-md-4 col-12">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Country</mat-label>
                                                <mat-select matNativeControl  [(ngModel)]="defaultCountryArr[saveTravellerId[passenger.id]]" (ngModelChange)="countrySelectAddMore(saveTravellerId[passenger.id])" formControlName="passengerNationality{{saveTravellerId[passenger.id]}}">
                                                <mat-option *ngFor="let each of countries" [value]="each.countryCode"> {{each.country}}</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </div>
                                        </div>
                                    </div>
                                    <div class="traveler-details-info">
                                        <div class="row contact-form">
                                        <div class="col-12 col-md-6" *ngIf="showTravelDocumentAddMore[saveTravellerId[passenger.id]]">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Travel Document</mat-label>
                                                <mat-select placeholder="" formControlName="passengerTravelDocument{{saveTravellerId[passenger.id]}}">
                                                    <mat-option value="PASSPORT"> PASSPORT/TRAVEL DOCUMENT</mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <div *ngIf="submitted && passengerForm.controls['passengerTravelDocument'+saveTravellerId[passenger.id]]['errors'] &&passengerForm.controls['passengerTravelDocument'+saveTravellerId[passenger.id]]['touched']" class="error">
                                                <small *ngIf="passengerForm.hasError('required','passengerTravelDocument'+saveTravellerId[passenger.id])">Please
                                                enter travel document.</small>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-12" *ngIf="showTravelDocumentAddMore[saveTravellerId[passenger.id]]">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Passport No</mat-label>
                                                <input matInput placeholder="" formControlName="passengerTravelDocCardNo{{saveTravellerId[passenger.id]}}" maxlength="{{maxPassportLength}}" autocomplete="off" onDrag="return false" onDrop="return false" (keypress)="specialcharInput($event)" (keyup)="convertToUpperCase($event)">
                                            </mat-form-field>
                                            <div *ngIf="submitted && passengerForm.controls['passengerTravelDocCardNo'+saveTravellerId[passenger.id]]['errors'] &&passengerForm.controls['passengerTravelDocCardNo'+saveTravellerId[passenger.id]]['touched']" class="error">
                                                <small *ngIf="passengerForm.hasError('required','passengerTravelDocCardNo'+saveTravellerId[passenger.id])">Please
                                                enter passport number.</small>
                                                <small *ngIf="passengerForm.hasError('minlength','passengerTravelDocCardNo'+saveTravellerId[passenger.id])">Please
                                                enter atleast {{minPassportLength}} characters.</small>
                                                <small *ngIf="passengerForm.hasError('pattern','passengerTravelDocCardNo'+saveTravellerId[passenger.id])">Please
                                                enter valid passport number.</small>
                                            </div>
                                        </div>
                                        </div>
                                        <div class="row contact-form" *ngIf="showTravelDocumentAddMore[saveTravellerId[passenger.id]]">
                                        <div class="col-md-6">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Date of Birth(DD-MM-YYYY)</mat-label>
                                                <input matInput [matDatepicker]="picker2" disabled formControlName="foreignPassengerDOB{{saveTravellerId[passenger.id]}}" [min]="calenderminDate" [max]="calendermaxDate">
                                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                                <mat-datepicker #picker2 disabled="false"></mat-datepicker>
                                            </mat-form-field>
                                        </div>
                                        </div>
                                        <div class="row contact-form">
                                        <div class="col-12 col-md-6" *ngIf="foodChoiceEnabled">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Meal Preference</mat-label>
                                                <mat-select placeholder="" formControlName="passengerMealPreference{{saveTravellerId[passenger.id]}}">
                                                    <mat-option *ngFor="let each of foodDetails" [value]="each"> {{masterFood[each]}}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <div *ngIf="submitted && passengerForm.controls['passengerMealPreference'+saveTravellerId[passenger.id]]['errors']" class="error">
                                                <small *ngIf="passengerForm.controls['passengerMealPreference'+saveTravellerId[passenger.id]]['errors']['required']">Food
                                                Choice is required.</small>
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-6" *ngIf="seniorCitizenEnabledArr[saveTravellerId[passenger.id]] && seniorCitizenApplicableArr[saveTravellerId[passenger.id]]">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Senior Citizen Concession</mat-label>
                                                <mat-select placeholder="" formControlName="passengerSeniorCitizen{{saveTravellerId[passenger.id]}}">
                                                    <mat-option value="1"> Avail Concession </mat-option>
                                                    <mat-option value="2"> Forgo 50% Concession </mat-option>
                                                    <mat-option value="3"> Forgo full Concession </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <div *ngIf="submitted && passengerForm.controls['passengerSeniorCitizen'+saveTravellerId[passenger.id]]['errors']" class="error">
                                                <small *ngIf="passengerForm.controls['passengerSeniorCitizen'+saveTravellerId[passenger.id]]['errors']['required']">Please select Senior citizen concession.</small>
                                            </div>
                                        </div>
                                        </div>

                                            <div class="form-check mt-3">
                                                <span *ngIf="optChildBerthStatusArr[saveTravellerId[passenger.id]]"> <label class="form-check-label">
                                                    <input type="checkbox" (click)="optChildBerth($event)" [checked]="ladiesQuotaTrue"
                                                    formControlName="optChildBerth{{saveTravellerId[passenger.id]}}" id="optChildBerth{{saveTravellerId[passenger.id]}}" class="ps-1 form-check-input pass_checkBox"> 
                                                        <div class="label_top_align">Opt Child Berth</div>
                                                    <span class="checkmark"></span>
                                            </label>
                                            </span>
                                    </div>

                                    <p *ngIf="optBedRollStatus"> <label class="checkbox">Opt Bed Roll
                                        <input type="checkbox" (change)="optBedRoll($event,i)"
                                            formControlName="optBedRoll{{saveTravellerId[passenger.id]}}">
                                        <span class="checkmark"></span>
                                        </label>
                                    </p>
                                </div>



                                </ng-container>
                            </div>
                            </li>
                            </span>
                            </ul>
                            <div>
                                <p class="view_more_btn" *ngIf="!isAdultExpanded && adulttravellerlist && adulttravellerlist.length >3 "><a href="javascript:;" (click)="expandItemsAdult()">View More</a></p>
                            </div>




                            <div class="my-2 p-3">

                                <div class="add_new_traveler mb-10" *ngIf="travellersArrayM.length>0 && !isMobile">
                                    <p class="title pb-10">Traveller Adult details</p>


                                    <div class="row">
                                        <!-- radio buttons male/female-->
                                        <!--   <div class="col-12">
                                              <div class="trip_select">
                                                  <div class="buttonTrip">
                                                      <input type="radio" id="male" name="" value="M" />
                                                      <label class="btn btn-default" for="male">Male</label>
                                                  </div>
                                                  <div class="buttonTrip">
                                                      <input type="radio" id="female" name="" value="F" />
                                                      <label class="btn btn-default" for="female">Female</label>
                                                  </div>
                                                  <div class="buttonTrip">
                                                    <input type="radio" id="transgender" name="" value="T" />
                                                    <label class="btn btn-default" for="transgender">Transgender</label>
                                                </div>
                                              </div>
                                            </div> -->
                                        <!-- end of radio buttons male/female -->
                                    </div>

                                    <!--Manaual Passenger Adult-->
                                    <ng-container *ngFor="let traveller of travellersArrayM; index as i; trackBy: trackByTraveller;let last = last;">
                                        <p class="my-2">Traveller {{i+1}}
                                            <span class="remove-traveller float-right text-right" (click)="removeTraveller(traveller,-1)" *ngIf="travellersArray.length > 1"><i class="material-icons" style="color: #007bff;position: relative;top: -7px;">close</i> </span>
                                        </p>

                                        <div>
                                            <div class="row contact-form edit_traveller_sec g-3">
                                                <div class="inner_input col-md-4 col-12">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Passenger Name</mat-label>
                                                        <input matInput placeholder="Name" formControlName="passengerName{{traveller}}" (keypress)="flInput($event)" maxlength="{{maxNameLength}}" autocomplete="off" onDrag="return false" onDrop="return false">
                                                    </mat-form-field>
                                                    <div *ngIf="submitted && 'passengerName'+traveller.errors && 'passengerName'+traveller.touched" class="error">
                                                        <small *ngIf="passengerForm.hasError('required','passengerName'+traveller)">Please enter
                                    name.</small>
                                                        <small *ngIf="passengerForm.hasError('pattern','passengerName'+traveller)">Please enter
                                    valid name.</small>
                                                        <small *ngIf="passengerForm.hasError('minlength','passengerName'+traveller)">Please enter
                                    atleast {{minNameLength}} character.</small>
                                                        <small *ngIf="passengerForm.hasError('maxlength','passengerName'+traveller)">Please enter
                                    atleast {{maxNameLength}} character.</small>
                                                    </div>
                                                </div>
                                                <div class="inner_input col-md-4 col-6 gender_sec">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Gender</mat-label>
                                                        <mat-select matNativeControl [(ngModel)]="genderSelectArr[traveller]" (ngModelChange)="seniorCitizenArr(genderSelectArr[traveller],traveller)" formControlName="passengerGender{{traveller}}" class="custom_select">
                                                            <mat-option value="M" class="custom_option">Male</mat-option>
                                                            <mat-option value="F">Female</mat-option>
                                                            <mat-option value="T">Transgender</mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                    <div *ngIf="submitted && 'passengerGender'+traveller.errors && 'passengerGender'+traveller.touched" class="error">
                                                        <small *ngIf="passengerForm.hasError('required','passengerGender'+traveller)">Please
                                    select gender.</small>
                                                    </div>
                                                </div>
                                                <div class="inner_input col-md-4 col-6 age_sec">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Age</mat-label>
                                                        <input matInput placeholder="Age" formControlName="passengerAge{{traveller}}" maxlength="3" (keypress)="numberInput($event)" (keyup)="maxAgeLimitArr(traveller)" autocomplete="off" onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false">
                                                    </mat-form-field>
                                                    <div *ngIf="submitted && 'passengerAge'+traveller.errors && 'passengerAge'+traveller.touched" class="error">
                                                        <small *ngIf="passengerForm.hasError('required','passengerAge'+traveller)">Please
                                    enter age.</small>
                                                        <small *ngIf="passengerForm.hasError('pattern','passengerAge'+traveller)">Age should
                                    be numeric.</small>
                                                        <small *ngIf="passengerForm.hasError('min','passengerAge'+traveller)">{{ageValidErrorArr[traveller]}}</small>
                                                        <small *ngIf="passengerForm.hasError('max','passengerAge'+traveller)">{{ageValidErrorArr[traveller]}}</small>
                                                    </div>
                                                </div>
                                                <div class="inner_input col-md-4 col-12">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Passenger Seat Preference</mat-label>
                                                        <mat-select matNativeControl formControlName="passengerBerthChoice{{traveller}}">
                                                            <mat-option value="">No Preference</mat-option>
                                                            <mat-option *ngFor="let each of applicableBerthTypes" value="{{each}}">{{masterBerth[each]}}</mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                </div>

                                                <div class="inner_input col-md-4 col-12">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Nationality</mat-label>
                                                        <mat-select matNativeControl [(ngModel)]="defaultCountryArr[traveller]" (ngModelChange)="countrySelectAddMore(traveller)" formControlName="passengerNationality{{traveller}}">
                                                            <mat-option *ngFor="let each of countries" [value]="each.countryCode"> {{each.country}}</mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="traveler-details-info">
                                            <div class="row contact-form">
                                                <div class="col-12 col-md-6" *ngIf="showTravelDocumentAddMore[traveller]">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Travel Document</mat-label>
                                                        <mat-select placeholder="" formControlName="passengerTravelDocument{{traveller}}">
                                                            <mat-option value="PASSPORT"> PASSPORT/TRAVEL DOCUMENT</mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                    <div *ngIf="submitted && passengerForm.controls['passengerTravelDocument'+traveller]['errors'] &&passengerForm.controls['passengerTravelDocument'+traveller]['touched']" class="error">
                                                        <small *ngIf="passengerForm.hasError('required','passengerTravelDocument'+traveller)">Please
                                       enter travel document.</small>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-12" *ngIf="showTravelDocumentAddMore[traveller]">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Passport No</mat-label>
                                                        <input matInput placeholder="" formControlName="passengerTravelDocCardNo{{traveller}}" maxlength="{{maxPassportLength}}" autocomplete="off" onDrag="return false" onDrop="return false" (keypress)="specialcharInput($event)" (keyup)="convertToUpperCase($event)">
                                                    </mat-form-field>
                                                    <div *ngIf="submitted && passengerForm.controls['passengerTravelDocCardNo'+traveller]['errors'] &&passengerForm.controls['passengerTravelDocCardNo'+traveller]['touched']" class="error">
                                                        <small *ngIf="passengerForm.hasError('required','passengerTravelDocCardNo'+traveller)">Please
                                       enter passport number.</small>
                                                        <small *ngIf="passengerForm.hasError('minlength','passengerTravelDocCardNo'+traveller)">Please
                                       enter atleast {{minPassportLength}} characters.</small>
                                                        <small *ngIf="passengerForm.hasError('pattern','passengerTravelDocCardNo'+traveller)">Please
                                       enter valid passport number.</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row contact-form" *ngIf="showTravelDocumentAddMore[traveller]">
                                                <div class="col-md-6">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Date of Birth(DD-MM-YYYY)</mat-label>
                                                        <input matInput [matDatepicker]="picker2" disabled formControlName="foreignPassengerDOB{{traveller}}" [min]="calenderminDate" [max]="calendermaxDate">
                                                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                                        <mat-datepicker #picker2 disabled="false"></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                            <div class="row contact-form">
                                                <div class="col-12 col-md-6" *ngIf="foodChoiceEnabled">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Meal Preference</mat-label>
                                                        <mat-select placeholder="" formControlName="passengerMealPreference{{traveller}}">
                                                            <mat-option *ngFor="let each of foodDetails" [value]="each"> {{masterFood[each]}}
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                    <div *ngIf="submitted && passengerForm.controls['passengerMealPreference'+traveller]['errors']" class="error">
                                                        <small *ngIf="passengerForm.controls['passengerMealPreference'+traveller]['errors']['required']">Food
                                       Choice is required.</small>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-md-6" *ngIf="seniorCitizenEnabledArr[traveller] && seniorCitizenApplicableArr[traveller]">
                                                    <mat-form-field class="matField_full_width" appearance="outline">
                                                        <mat-label>Senior Citizen Concession</mat-label>
                                                        <mat-select placeholder="" formControlName="passengerSeniorCitizen{{traveller}}">
                                                            <mat-option value="1"> Avail Concession </mat-option>
                                                            <mat-option value="2"> Forgo 50% Concession </mat-option>
                                                            <mat-option value="3"> Forgo full Concession </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>
                                                    <div *ngIf="submitted && passengerForm.controls['passengerSeniorCitizen'+traveller]['errors']" class="error">
                                                        <small *ngIf="passengerForm.controls['passengerSeniorCitizen'+traveller]['errors']['required']">Please select Senior citizen concession.</small>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-check mt-3">
                                                <span *ngIf="optChildBerthStatusArr[traveller]"> <label class="form-check-label">
                                                        <input type="checkbox" (click)="optChildBerth($event)" [checked]="ladiesQuotaTrue"
                                                        formControlName="optChildBerth{{traveller}}" id="optChildBerth{{traveller}}" class="ps-1 form-check-input pass_checkBox"> 
                                                            <div class="label_top_align">Opt Child Berth</div>
                                                        <span class="checkmark"></span>
                                                </label>
                                                </span>
                                            </div>
                                            <p *ngIf="optBedRollStatus"> <label class="checkbox">Opt Bed Roll
                                 <input type="checkbox" (change)="optBedRoll($event,i)"
                                    formControlName="optBedRoll{{traveller}}">
                                 <span class="checkmark"></span>
                                 </label>
                                            </p>
                                        </div>

                                    </ng-container>

                                </div>
                                <div *ngIf="isMobile && travellersArrayM.length>0 " class="table-responsive">
                                    <table class="table  traveller_table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Name</th>
                                                <th scope="col">Age</th>
                                                <th scope="col">Gender</th>
                                                <th scope="col"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let traveller of travellersArrayM;">
                                                <tr>
                                                    <td>{{ passengerForm.value['passengerName' + traveller] }}
                                                    </td>
                                                    <td *ngIf="passengerForm.value['passengerAge' + traveller] ">
                                                        {{ passengerForm.value['passengerAge' + traveller] }}
                                                    </td>
                                                    <td>
                                                        <div [ngSwitch]="passengerForm.value['passengerGender' + traveller]">
                                                            <ng-template [ngSwitchCase]="'M'">Male</ng-template>
                                                            <ng-template [ngSwitchCase]="'F'">Female</ng-template>
                                                            <ng-template [ngSwitchCase]="'T'">Transgender</ng-template>

                                                        </div>
                                                    </td>
                                                    <td>
                                                        <span><button type="button" class="btn-close"
                                      (click)="removeMobileAdult(traveller,-1)"></button></span>
                                                    </td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="row">
                                    <div class="">
                                        <!-- <div class=" add-traveller-btn">
                                                <a class="" (click)="manualAddTraveller(1)"> + Add New Traveller</a>
                                            </div> -->
                                        <div class="add-traveller-btn">
                                            <div class="d-none d-sm-block w-50"><a href="javascript:void(0);" class="Addnew-Adult-btn" (click)="manualAddTraveller(1)">+ Add New Adult</a></div>
                                            <div class="d-block d-sm-none w-50"><a href="javascript:void(0);" class="Addnew-Adult-btn" (click)="manualAddTraveller(1)">+ Add New Adult</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>





                            </div>
                        </div>
                </div>



                <div class="traveller-addbox-details traveller-infants-details mt-20">
                    <p class="title pb-10 mt-20 p-3 "><b>Infants</b></p>
                    <div class="info_msg my-3 m-3">
                        <i class="material-icons me-2">error</i> Children under the age of 5 travel free of cost, but information is mandatory.
                    </div>
                    <div class="p-3">
                        <div class="add_new_traveler mb-10" *ngIf="!isMobile &&childrenArrayM.length>0">
                            <p class="title pb-10">Traveller Infant details</p>

                            <div *ngIf="childrenArrayM.length>0">
                                <div *ngIf="childrenArrayM && childrenArrayM.length > 0">

                                    <div class="row">
                                        <!-- radio buttons male/female-->
                                        <!--   <div class="col-12">
                                                  <div class="trip_select">
                                                      <div class="buttonTrip">
                                                          <input type="radio" id="male" name="" value="M" formControlName="childGender{{traveller}}"/>
                                                          <label class="btn btn-default" for="male">Male</label>
                                                      </div>
                                                      <div class="buttonTrip">
                                                          <input type="radio" id="female" name="" value="F" formControlName="childGender{{traveller}}"/>
                                                          <label class="btn btn-default" for="female">Female</label>
                                                      </div>
                                                      <div class="buttonTrip">
                                                        <input type="radio" id="transgender" name="" value="T" formControlName="childGender{{traveller}}"/>
                                                        <label class="btn btn-default" for="transgender">Transgender</label>
                                                    </div>
                                                  </div>
                                                </div> -->
                                        <!-- end of radio buttons male/female -->
                                    </div>

                                    <ng-container *ngFor="let traveller of childrenArrayM; index as i; trackBy: trackByTraveller;let last = last;">
                                        <p class="my-2">Infant {{i+1}}
                                            <span class="remove-traveller float-right text-right" (click)="removeChild(traveller,-1)"><i class="material-icons" style="color: #007bff;position: relative;top: -7px;">close</i> </span>
                                        </p>
                                        <div class="row contact-form edit_traveller_sec">
                                            <div class="inner_input col-md-4 col-12">
                                                <mat-form-field class="matField_full_width" appearance="outline">
                                                    <mat-label>Name</mat-label>
                                                    <input matInput placeholder="Name" formControlName="childName{{traveller}}" (keypress)="flInput($event)" maxlength="{{maxNameLength}}" autocomplete="off" onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false">
                                                </mat-form-field>
                                                <div *ngIf="submitted && passengerForm.controls['childName'+traveller]['errors'] && passengerForm.controls['childName'+traveller]['touched'] " class="error">
                                                    <small *ngIf="passengerForm.hasError('required','childName'+traveller)">Please enter
                                    name.</small>
                                                    <small *ngIf="passengerForm.hasError('pattern','childName'+traveller)">Please enter valid
                                    name.</small>
                                                    <small *ngIf="passengerForm.hasError('minlength','childName'+traveller)">Please enter atleast
                                    {{minNameLength}} character.</small>
                                                </div>
                                            </div>
                                            <div class="inner_input col-md-4 col-12 gender_sec">
                                                <mat-form-field class="matField_full_width" appearance="outline">
                                                    <mat-label>Gender</mat-label>
                                                    <mat-select matNativeControl formControlName="childGender{{traveller}}">
                                                        <mat-option value="M">Male</mat-option>
                                                        <mat-option value="F">Female</mat-option>
                                                        <mat-option value="T">Transgender</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <div *ngIf="submitted && passengerForm.controls['childGender'+traveller]['errors'] && passengerForm.controls['childGender'+traveller]['touched']" class="error">
                                                    <small *ngIf="passengerForm.hasError('required','childGender'+traveller)">Please select
                                        gender.</small>
                                                </div>
                                            </div>
                                            <div class="inner_input col-md-4 col-12 ">

                                                <mat-form-field class="matField_full_width w-100" appearance="outline">
                                                    <mat-label>Age</mat-label>
                                                    <mat-select matNativeControl formControlName="childAge{{traveller}}">
                                                        <mat-option value="0">Below One Year</mat-option>
                                                        <mat-option value="1">One year</mat-option>
                                                        <mat-option value="2">Two years</mat-option>
                                                        <mat-option value="3">Three years</mat-option>
                                                        <mat-option value="4">Four years</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <div *ngIf="submitted && passengerForm.controls['childAge'+traveller]['errors'] && passengerForm.controls['childAge'+traveller]['touched']" class="error">
                                                    <small *ngIf="passengerForm.hasError('required','childAge'+traveller)">Please select
                                        age.</small>
                                                </div>
                                            </div>

                                        </div>
                                    </ng-container>
                                </div>

                            </div>
                        </div>
                        <div *ngIf="isMobile && childrenArrayM.length>0 " class="table-responsive">
                            <table class="table  traveller_table">
                                <thead>
                                    <tr>
                                        <th scope="col">Name</th>
                                        <th scope="col">Age</th>
                                        <th scope="col">Gender</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container *ngFor="let traveller of childrenArrayM;">
                                        <tr>
                                            <td>
                                                {{ passengerForm.value['childName' + traveller] }}
                                            </td>
                                            <td>
                                                {{ passengerForm.value['childAge' + traveller] }}
                                            </td>
                                            <td>
                                                <div [ngSwitch]="passengerForm.value['childGender' + traveller]">
                                                    <ng-template [ngSwitchCase]="'M'">Male</ng-template>
                                                    <ng-template [ngSwitchCase]="'F'">Female</ng-template>
                                                    <ng-template [ngSwitchCase]="'T'">Transgender</ng-template>
                                                </div>
                                            </td>
                                            <td><span><button type="button" class="btn-close"
                                      (click)="removeMobileInfant(traveller,-1)"></button></span></td>
                                        </tr>
                                    </ng-container>
                                </tbody>
                            </table>
                        </div>

                        <div class="row">
                            <div class="">
                                <!-- <div class=" add-traveller-btn">
                                            <a class="" (click)="manualAddTraveller(2)">+ Add New Infant</a>
                                        </div> -->
                                <div class="add-traveller-btn">
                                    <div class="d-none d-sm-block w-50">
                                        <a href="javascript:void(0);" class="Addnew-Adult-btn" (click)="manualAddTraveller(2)">+ Add New Infant</a>
                                    </div>

                                    <div class="d-block d-sm-none w-50">
                                        <div class="d-block d-sm-none"><a href="javascript:void(0);" class="Addnew-Adult-btn" (click)="manualAddTraveller(2)">+ Add New Infant </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="othertraveller" *ngIf="saveTravllerShow">
                <ul class="add-search-ul d-block">
                    <li class="custom-check-box">
                        <div class="custom-controls-stacked">
                            <label class="custom-control material-checkbox">
                          <input type="checkbox" class="material-control-input" formControlName="saveTraveller"
                            name="saveGST" id="save_traveller" [checked]="checked" value="true">
                          <span class="material-control-indicator"></span>
                          <span class="description fs_12 text-black">Add these travellers to Travellers list.</span>
                          <span class="description fs_12"><span class="save_consent">I give consent to Reward360 to
                              store personal information. Please <a href="javascript:;" (click)="saveTravellerConsent()"
                                class="link_text">click here</a> for more information.</span></span>
                        </label>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div>


            <div class="contact-details booking-inner-box destination_details_train" *ngIf="showDestAddressBox">
                <div class="contact-header traveller-person-left">
                    <h6 class="des_title mb-20">Your Destination Address</h6>
                    <!-- <p>Your ticket and PNR number will be sent to</p> -->
                </div>
                <div class="row g-3">
                    <div class="col-lg-4 col-md-4 col-12">
                        <mat-form-field class="matField_full_width w-100" appearance="outline">
                            <mat-label>Address 1 </mat-label>
                            <input matInput placeholder="Enter Address1" formControlName="destAddressOne" autocomplete="nope">
                        </mat-form-field>
                        <div *ngIf="(submitted && passengerForm.controls.destAddressOne.errors) || (passengerForm.controls.destAddressOne.touched)" class="error">
                            <small *ngIf="passengerForm.hasError('required','destAddressOne')">Please enter address 1</small>
                            <small *ngIf="passengerForm.hasError('pattern','destAddressOne')">Please enter a valid address</small>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-12">
                        <mat-form-field class="matField_full_width w-100" appearance="outline">
                            <mat-label>Address 2 (Optional)</mat-label>
                            <input matInput placeholder="Enter Address2" formControlName="destAddressTwo" autocomplete="nope">
                        </mat-form-field>
                        <div *ngIf="(submitted && passengerForm.controls.destAddressTwo.errors) || (passengerForm.controls.destAddressTwo.touched)" class="error">
                            <small *ngIf="passengerForm.hasError('pattern','destAddressTwo')">Please enter a valid address</small>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-12">
                        <mat-form-field class="matField_full_width w-100" appearance="outline">
                            <mat-label>Address 3 (Optional)</mat-label>
                            <input matInput placeholder="Enter Address3" formControlName="destAddressThree" autocomplete="nope">
                        </mat-form-field>
                        <div *ngIf="(submitted && passengerForm.controls.destAddressThree.errors) || (passengerForm.controls.destAddressThree.touched)" class="error">
                            <small *ngIf="passengerForm.hasError('pattern','destAddressThree')">Please enter a valid address</small>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-12">
                        <mat-form-field class="matField_full_width w-100" appearance="outline">
                            <mat-label>PIN</mat-label>
                            <input matInput placeholder="Enter Pin" formControlName="destAddressPin" maxlength="6" (keypress)="numberInput($event)" autocomplete="off" onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false" (keyup)="getDestCity($event)">
                        </mat-form-field>
                        <div *ngIf="(submitted && passengerForm.controls.destAddressPin.errors) || (passengerForm.controls.destAddressPin.touched)" class="error">
                            <small *ngIf="passengerForm.hasError('required','destAddressPin')">Please enter PIN code.</small>
                            <small *ngIf="passengerForm.hasError('minlength','destAddressPin')">Please enter a valid PIN code.</small>
                        </div>
                        <div *ngIf="destpincodeError" class="error">
                            <small>{{destpincodeError}}</small>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-12">
                        <mat-form-field class="matField_full_width w-100" appearance="outline">
                            <mat-label>State</mat-label>
                            <input matInput placeholder="" formControlName="destAddressState" autocomplete="nope" [(ngModel)]="destState" readonly value={{destState}}>
                        </mat-form-field>
                        <div *ngIf="(submitted && passengerForm.controls.destAddressState.errors) || (passengerForm.controls.destAddressState.touched)" class="error">
                            <small *ngIf="passengerForm.hasError('required','destAddressState')">Please select a state.</small>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-12">
                        <mat-form-field class="matField_full_width w-100" appearance="outline">
                            <mat-label>Select city</mat-label>
                            <mat-select placeholder="" formControlName="destAddressCity" autocomplete="nope" [(ngModel)]="destAddressCity">
                                <mat-option *ngFor="let city of destCityList" [value]="city" (onSelectionChange)="getcitypostoffice(city)"> {{city}} </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <div *ngIf="(submitted && passengerForm.controls.destAddressCity.errors) || (passengerForm.controls.destAddressCity.touched)" class="error">
                            <small *ngIf="passengerForm.hasError('required','destAddressCity')">Please select a city.</small>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-12">
                        <mat-form-field class="matField_full_width w-100" appearance="outline">
                            <mat-label>Post Office</mat-label>
                            <mat-select placeholder="" formControlName="destAddressPost" autocomplete="nope">
                                <mat-option *ngFor="let post of postofficeList" [value]="post"> {{post}} </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <div *ngIf="(submitted && passengerForm.controls.destAddressPost.errors) || (passengerForm.controls.destAddressPost.touched)" class="error">
                            <small *ngIf="passengerForm.hasError('required','destAddressPost')">Please select a post office.</small>
                        </div>
                    </div>
                </div>
            </div>







            <div class="contact_sec booking-inner-box caontact_sec_label_highlight">
                <div class="mb-3 traveller-person-left">
                    <h6 class="title">Contact details</h6>
                    <p class="note_text">Your booking details will be sent here.</p>
                </div>
                <div class="row contact-form ">
                    <div class="col-sm-6 col-12">
                        <div class="">
                            <mat-form-field class="matField_full_width w-100" appearance="outline">
                                <mat-label>Email</mat-label>
                                <input matInput formControlName="passengerEmail" name="passengerEmail" id="passengerEmail" (keypress)="AvoidSpace($event)" autocomplete="off">
                            </mat-form-field>
                            <div *ngIf="(submitted && passengerForm.controls.passengerEmail.errors) || (passengerForm.controls.passengerEmail.touched)" class="error">
                                <small *ngIf="passengerForm.hasError('required','passengerEmail')">Please enter email
                          address.</small>
                                <small *ngIf="passengerForm.hasError('pattern','passengerEmail')">Please enter a valid email id.
                        </small>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-12">
                        <div class="">
                            <mat-form-field class="matField_full_width w-100" appearance="outline">
                                <mat-label>Mobile Number</mat-label>
                                <input matInput formControlName="passengerMobile" (keypress)="numberInput($event)" autocomplete="off" maxlength="10">
                            </mat-form-field>
                            <div *ngIf="(submitted && passengerForm.controls.passengerMobile.errors) || (passengerForm.controls.passengerMobile.touched)" class="error">
                                <small *ngIf="passengerForm.hasError('required','passengerMobile')">Please enter mobile
                          number.</small>
                                <small *ngIf="passengerForm.hasError('minlength','passengerMobile')">Please enter min 10
                          Digits.</small>
                                <small *ngIf="passengerForm.hasError('pattern','passengerMobile')">Please enter a valid ten
                          digits mobile number.</small>

                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="contact-whatsapp mt-20 mb-30" *ngIf="whatsappFeature==1">
                        <div class="contact-whatsapp-info me-2">
                            <span>Send my booking information through</span>
                            <img src="{{cdnUrl}}/images/icons/whatsapp.png" class="ms-2 mlite-whatsapp-img" alt="">
                            <span class="fw_7 mlite-whatsapp-ct">WhatsApp</span>
                        </div>
                        <div class="form-check form-switch m-0 ">
                            <input class="form-check-input" type="checkbox" role="switch" formControlName="whatsappFlag" name="whatsappFlag" id="whatsappFlag" [checked]="whatsAppCheck" />
                        </div>
                    </div>
                </div>
                <div>


                </div>
            </div>

            <div class="booking-inner-box additional_preference_sec">
                <!-- <p class="mt-3">
                        <label class="checkbox pl-0">
                  <input type="checkbox" (click)="autoUpgrade($event)" formControlName="AdditionalPreference" class="gst_cls">
                  <span class="ps-2 check_title">Additional Preferences (Optional)</span>
                  <span class="checkmark"></span>
                </label>
                    </p> -->

                <div class="form-check mt-3">
                    <label class="form-check-label">
                            <input type="checkbox" (click)="autoUpgrade($event)" formControlName="AdditionalPreference" class="ps-1 form-check-input pass_checkBox"> 
                                <div class="label_top_align">Additional Preferences (Optional)</div>
                            <span class="checkmark"></span>
                            </label>
                </div>


                <div class="gst-optional-data" *ngIf="addshow">
                    <div class="">
                        <div>
                            <p> <label class="checkbox pl-0">
                         <input type="checkbox" formControlName="passengerAutoUpgradation" value="0" class="gst_cls">
                         <span class="ps-2 check_title">Consider for Auto Upgradation</span> 
                         <span class="checkmark"></span>
                         </label>
                            </p>
                        </div>
                        <div *ngIf="vikalpInSpecialTrainsAccomFlag" class="">
                            <p> <label class="checkbox pl-0">
                         <input type="checkbox" formControlName="vikalpInSpecialTrainsAccomFlag">
                         <span class="ps-2 check_title">Opted for VIKALP</span>
                         <span class="checkmark"></span>
                         </label>
                            </p>
                        </div>
                        <div class="add-title-reserve pl-0">Preference choice</div>
                        <div class="res-area">


                            <div class="form-check res_radio  pl-0">
                                <input class="form-check-input" type="radio" formControlName="passengerReservationCh" name="passengerReservationCh" value="99" class="" id="res-none" checked (change)="passengerReservationChoiceFun($event)">
                                <label class="form-check-label ps-2 " for="res-none">
                          None
                        </label>
                            </div>

                            <div class="form-check res_radio pl-0">
                                <input class="form-check-input" type="radio" formControlName="passengerReservationCh" name="passengerReservationCh" value="1" class="" id="res-all" (change)="passengerReservationChoiceFun($event)">
                                <label class="form-check-label ps-2" for="res-all">
                          Book only if all berths are alloted in same coach
                        </label>
                            </div>

                            <div class="form-check res_radio pl-0">
                                <input class="form-check-input" type="radio" formControlName="passengerReservationCh" name="passengerReservationCh" value="2" class="" id="res-one" (change)="passengerReservationChoiceFun($event)">
                                <label class="form-check-label ps-2" for="res-one">
                          Book only if atleast 1 lower berth is allotted
                        </label>
                            </div>

                            <div class="form-check res_radio pl-0">
                                <input class="form-check-input" type="radio" formControlName="passengerReservationCh" name="passengerReservationCh" value="3" class="" id="res-two" (change)="passengerReservationChoiceFun($event)">
                                <label class="form-check-label ps-2" for="res-two">
                          Book only if  2 lower berths is  allotted
                        </label>
                            </div>

                            <div class="form-check res_radio pl-0">
                                <input class="form-check-input" type="radio" formControlName="passengerReservationCh" name="passengerReservationCh" value="4" class="" id="res-three" (change)="passengerReservationChoiceFun($event)">
                                <label class="form-check-label ps-2" for="res-three">
                          Book only if tickets are confirmed
                        </label>
                            </div>


                            <div class="contact-form m-contact-form my-2">
                                <mat-form-field class="matField_full_width w-100" appearance="outline">
                                    <mat-label>Coach Preference</mat-label>
                                    <input matInput (keypress)="AvoidSpace($event);specialcharInput($event)" placeholder="Enter Coach No" (keyup)="convertToUpperCase($event)" formControlName="coachId" autocomplete="off" maxlength="4">
                                </mat-form-field>
                            </div>
                            <div *ngIf="(submitted && passengerForm.controls['coachId']['errors']) || passengerForm.controls['coachId']['touched']" class="error">
                                <small *ngIf="passengerForm.hasError('pattern','coachId')" class="pl-3">Please enter valid coach
                         number.</small>
                                <small *ngIf="passengerForm.hasError('minlength','coachId')" class="pl-3">Please enter atleast 2
                         characters.</small>
                                <small *ngIf="passengerForm.hasError('maxlength','coachId')" class="pl-3">Please enter maximum 4
                         characters.</small>
                            </div>
                        </div>
                        <div class="imp-note">
                            <p><span class="note-one"> IMPORTANT </span> <span class="note-two"> The booking will fail if
                         the specified berth choice or coach number is not available.</span>
                            </p>
                        </div>
                    </div>
                </div>

            </div>

            <div class="booking-inner-box travel_insurance">
                <div class=" traveller-person-left">
                    <h6 class="">Travel Insurance</h6>
                </div>
                <!-- <div class="form-check mt-3">
                        <input class="form-check-input checkbox p-0" type="checkbox" formControlName="travelInsurence" name="travelInsurence" id="travelInsurence" [checked]="travelInsuranceOpted" />
                        <label class="form-check-label" for="travelInsurence">
                  Include travel Insurance
                </label>
                    </div> -->
                <div class="form-check mt-3">
                    <label class="form-check-label" for="travelInsurence">
                            <input type="checkbox" formControlName="travelInsurence" name="travelInsurence" id="travelInsurence" [checked]="travelInsuranceOpted" class="ps-1 form-check-input pass_checkBox"> 
                                <div class="label_top_align">Include travel Insurance</div>
                            </label>
                </div>
            </div>

            <div class="booking-inner-box gst-number-box">
                <!-- <h6> <span class="form-switch m-0  pl-0"> -->
                <div class="form-check mt-3">
                    <label class="form-check-label" for="gst_num">
                                <input type="checkbox"  (click)="gstToggle()" id="gst_num"  class="ps-1 form-check-input pass_checkBox"> 
                                    <div class="label_top_align"><h6>GST number for business travel (Optional)</h6></div>
                                    <p>To claim credit of GST charged by airlines / SmartBuy, please enter your company’s GST number
                                    </p>
                                </label>
                </div>
                <!-- <input class="form-check-input1 gst_cls-new checkbox p-0" type="checkbox" role="switch" (click)="gstToggle()" id="gst_num" />
              </span><label class="form-check-label" for="gst_num">GST number for business travel (Optional)</label></h6>
                    <p>To claim credit of GST charged by airlines / SmartBuy, please enter your company’s GST number
                    </p> -->



                <ng-template #content let-modal>
                    <div class="modal-header modal-inside-header justify-content-center border-0">
                        <h5 class="modal-title gstTitle">Saved GST Details</h5>
                    </div>
                    <div class="modal-body">
                        <div class="">
                            <div class="savedGst_sec">
                                <div *ngFor="let data of GSTList | slice:0:5;let GSTIndex = index">
                                    <div class="form-check pl-0">
                                        <input class="form-check-input" type="radio" name="GSTList" id="gst{{GSTIndex}}" (change)="fillupGSTDetailOnCheck($event,data,GSTIndex)" [checked]="gstmodalcheckedvalue[GSTIndex]" style="display: none;">
                                        <label class="travel-card-details" for="gst{{GSTIndex}}" [ngClass]="{'active': isCheckedGST[GSTIndex]}">
                                                 <div class="gstHeading">{{data.gstNumber}}</div>
                                                 <div class="gstName">{{data.gstName}}</div>
                                                 <div class="gstAddress">{{data.address}}</div>
                                                 <div class="d-flex gap-3">
                                                     <div class="gstAddress">{{data.city}}</div>
                                                     <div class="gstAddress">{{data.state}}</div>
                                                     <div class="gstAddress">{{data.pinCode}}</div>
                                                 </div>
                                             </label>
                                    </div>
                                </div>
                                <ng-container *ngIf="isGstExpanded">
                                    <ng-container *ngFor="let gstexpandedItem of GSTList; let j = index">
                                        <ng-container *ngIf="j>=5">
                                            <div class="form-check pl-0">
                                                <input class="form-check-input" type="radio" name="GSTList" id="gstL{{j}}" (change)="fillupGSTDetailOnCheck($event,gstexpandedItem,j)" [checked]="gstmodalcheckedvalue[j]" style="display: none;">
                                                <label class="travel-card-details" style="border: 1px solid #ededed;padding: 15px;" for="gstL{{j}}" [ngClass]="{'active': isCheckedGST[j]}">
                                                    <div  class="gstHeading">{{gstexpandedItem.gstNumber}}</div>
                                                    <div class="gstName">{{gstexpandedItem.gstName}}</div>
                                                    <div class="gstAddress">{{gstexpandedItem.address}}</div>
                                                    <div class="d-flex gap-3">
                                                        <div class="gstAddress">{{gstexpandedItem.city}}</div>
                                                        <div class="gstAddress">{{gstexpandedItem.state}}</div>
                                                        <div class="gstAddress">{{gstexpandedItem.pinCode}}</div>
                                                    </div>
                                                </label>
                                            </div>

                                        </ng-container>
                                    </ng-container>
                                </ng-container>
                            </div>

                            <p *ngIf="GSTList.length > 5" class="text-center my-2">
                                <a (click)="gstExpandItems()">
                                            {{!isGstExpanded ? 'View More &#x25BC;' : 'View Less &#x25B2;'}}
                                        </a>
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" (click)="gstReset()">Reset</button>
                        <button type="button" class="btn btn-primary" (click)="modal.close()">Close</button>
                    </div>
                </ng-template>

                <div class="row" *ngIf="gstSelected">
                    <div class="col-xl-5 col-lg-5 col-md-5">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>GST Number</mat-label>
                            <input matInput placeholder="" formControlName="gstNumber" name="gstNumber" id="gstNumber" minlength="15" maxlength="15" autocomplete="off" (keypress)="AvoidSpace($event)" (keypress)="specialcharInputAddress($event)" (keyup)="convertToUpperCase($event);">


                        </mat-form-field>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('required','gstNumber')">Please enter gst number.
                        </mat-error>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('pattern','gstNumber')">Please enter valid gst number.
                        </mat-error>

                    </div>
                    <div class="col-xl-5 col-lg-5 col-md-5">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Business Name</mat-label>
                            <input matInput placeholder="Business Name" formControlName="gstBusinessName" name="gstBusinessName" id="gstBusinessName" maxlength="30" autocomplete="off" (keypress)="specialcharInputAddress($event)" pattern="[a-zA-Z][a-zA-Z ]+">

                        </mat-form-field>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('required','gstBusinessName')">Please enter business name.
                        </mat-error>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('pattern','gstBusinessName')">Please enter valid name.
                        </mat-error>
                    </div>

                </div>

                <div class="row" *ngIf="gstSelected">

                    <div class="col-lg-5 col-md-5">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Business Address</mat-label>
                            <input matInput placeholder="Business Address" formControlName="gstAddress" name="gstAddress" id="gstAddress" maxlength="100" (keypress)="specialcharInputAddress($event)" autocomplete="off">

                        </mat-form-field>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('required','gstAddress')">Please enter business address.
                        </mat-error>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('pattern','gstAddress')">Please enter valid address.No special characters allowed except / - ,</mat-error>
                    </div>
                    <div class="col-lg-5 col-md-5">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Pincode</mat-label>
                            <input matInput placeholder="Pincode" formControlName="gstPincode" name="gstPincode" id="gstPincode" (keypress)="AvoidSpace($event);numberInput($event)" (keyup)="getCityResidence($event)" minlength="6" maxlength="6" autocomplete="nope">

                        </mat-form-field>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('required','gstPincode')">Please enter pincode.
                        </mat-error>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('minlength','gstPincode')">Please enter 6 digits [0-9] pincode.
                        </mat-error>
                    </div>
                </div>
                <div class="row" *ngIf="gstSelected">
                    <div class="col-lg-5 col-md-5">
                        <!-- <mat-form-field appearance="outline" class="w-100">
                                <mat-label>City / Town</mat-label>
                                <input matInput placeholder="" formControlName="gstCity" name="gstCity" id="gstCity" autocomplete="nope">
<<<<<<< HEAD
                                <mat-error class="error-flight-checkout" *ngIf="passengerForm.hasError('required','gstCity')">Please enter city name.
                                </mat-error>
                                <mat-error class="error-flight-checkout" *ngIf="passengerForm.hasError('pattern','gstCity')">Please enter valid city name. </mat-error>
                            </mat-form-field> -->


                        <mat-form-field class="matField_full_width w-100" appearance="outline">
                            <mat-label>Select city</mat-label>
                            <mat-select placeholder="" formControlName="gstCity" autocomplete="nope" name="gstCity" id="gstCity" autocomplete="nope">
                                <mat-option *ngFor="let city of cityList" [value]="city" (onSelectionChange)="getcitypostoffice(city)"> {{city}} </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('required','gstCity')">Please enter city name.
                        </mat-error>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('pattern','gstCity')">Please enter valid city name. </mat-error>
                    </div>

                    <div class="col-lg-5 col-md-5">
                        <mat-form-field appearance="outline" class="w-100">
                            <mat-label>State</mat-label>
                            <input matInput placeholder="State" formControlName="gstState" name="gstState" id="gstState" (keypress)="flInput($event)" maxlength="20" autocomplete="off" [(ngModel)]="state" readonly="stateCheck" value={{state}}>

                        </mat-form-field>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('required','gstState')">Please enter state name.
                        </mat-error>
                        <mat-error class="error-flight-checkout train_gst_err_msg" *ngIf="passengerForm.hasError('pattern','gstState')">Please enter valid state name.
                        </mat-error>
                    </div>
                </div>
                <div class="row">
                    <div class="othertraveller1 col-md-7" *ngIf="gstSelected && customerInfo['guestLogin']==false">
                        <ul class="add-search-ul d-block">
                            <li class="custom-check-box">
                                <div class="custom-controls-stacked">
                                    <label class="custom-control material-checkbox">
                                            <input type="checkbox" class="material-control-input" formControlName="saveGST"
                                              name="saveGST" id="saveGST" [checked]="checked">
                                            <span class="material-control-indicator"></span>
                                            <span class="description fs_12 text-black">Save
                                              Gst Details </span>
                                            <!-- <span class="description fs_12">You won't have to fill gst info on your next visit</span> -->
                                          </label>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="text-lg-end1  col-md-5 " *ngIf="gstSelected">
                        <ng-container *ngIf="getGSTShow">
                            <div class="add-traveller-btn">
                                <a href="javascript:void(0);" class="Addnew-Adult-btn" class="Addnew-Adult-btn" (click)="openmodal(content)">Select from Saved GST</a>
                            </div>

                        </ng-container>
                    </div>
                </div>
            </div>

        </div>


        <div class="agree_conditions">
            <ul class="add-search-ul d-block">
                <li class="custom-check-box">
                    <div class="custom-controls-stacked pl-20">
                        <label class="custom-control material-checkbox">
                          <input type="checkbox" class="material-control-input" formControlName="passengerAgree"               name="passengerAgree" id="agree_terms"  >
                          <span class="material-control-indicator"></span>
                          <!-- <span class="description fs_12 text-black">Add these travellers to  Travellers list.</span> -->
                          <span class="description fs_12">I agree to the <a href="{{domainRedirect}}terms_conditions" target="_blank" class="link_text" >Terms & Conditions</a> and <a href="{{domainRedirect}}privacy_policy" target="_blank" class="link_text" >Privacy Policy</a></span>
                        </label>
                    </div>
                </li>
            </ul>
            <div *ngIf="submitted && passengerForm.controls['passengerAgree']['errors']" class="error pl-20">
                <small *ngIf="passengerForm.controls['passengerAgree']['errors']['required'] || passengerForm.controls['passengerAgree']['errors']['pattern']">Please accept Terms and Conditions.</small>
            </div>
        </div>
        <!-- mlite model -->
        <!-- Mlite Infant Add  -->

        <div *ngIf="isMobile">
            <!-- Mlite Add Traveller Popup -->
            <div class=" modal coupon_mlite_popup" id="addInfant_mlite" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="add_new_traveler pt-0">
                            <!--Manaual Passenger Infant-->
                            <ng-container *ngFor="let infanttraveller of childrenArrayM; index as i;">
                                <div *ngIf="infanttraveller==childrenArrayM.length">

                                    <div class="modal-header">
                                        <h5 class="modal-title">Add New Infant </h5>
                                        <button type="button" class="btn-close" (click)="removeMobileInfant(infanttraveller,-1)"></button>
                                    </div>
                                    <div class="modal-body pt-0">
                                        <div *ngIf="childrenArrayM && childrenArrayM.length > 0">
                                            <div>
                                                <!-- <div *ngIf="travellersArrayM.length>0">
                            <div *ngIf="childrenArrayM && childrenArrayM.length > 0"> -->
                                                <!-- <ng-container *ngFor="let traveller of childrenArrayM; index as i;"> -->
                                                <div>
                                                    <div>

                                                        <div class="row">
                                                            <!-- radio buttons male/female-->
                                                            <div class="col-12">
                                                                <div class="trip_select">
                                                                    <div class="buttonTrip">
                                                                        <input type="radio" id="male" name="childGender{{infanttraveller}}" value="M" formControlName="childGender{{infanttraveller}}" checked/>
                                                                        <label class="btn btn-default" for="male">Male</label>
                                                                    </div>
                                                                    <div class="buttonTrip">
                                                                        <input type="radio" id="female" name="childGender{{infanttraveller}}" value="F" formControlName="childGender{{infanttraveller}}" />
                                                                        <label class="btn btn-default" for="female">Female</label>
                                                                    </div>
                                                                    <div class="buttonTrip">
                                                                        <input type="radio" id="transgender" name="childGender{{infanttraveller}}" value="T" formControlName="childGender{{infanttraveller}}" />
                                                                        <label class="btn btn-default" for="transgender">Transgender</label>
                                                                    </div>


                                                                </div>

                                                                <span *ngIf="mlitechildformsubmit && passengerForm.controls['childGender'+infanttraveller]['errors'] && 
                                       passengerForm.controls['childGender'+infanttraveller]['touched']" class="error">

                                                    <mat-error class="error_bus" *ngIf="passengerForm.controls['childGender'+infanttraveller]['errors']['required']">Gender is required</mat-error>
                                                
                                                    </span>
                                                            </div>
                                                            <!-- end of radio buttons male/female -->
                                                        </div>

                                                        <!-- <ng-container *ngFor="let traveller of childrenArrayM; index as i; trackBy: trackByTraveller;let last = last;"> -->

                                                        <div class="contact-form edit_traveller_sec">
                                                            <div class="inner_input col-md-4 col-12">
                                                                <mat-form-field class="matField_full_width" appearance="outline">
                                                                    <mat-label>Name</mat-label>
                                                                    <input matInput placeholder="Name" id="childname" formControlName="childName{{infanttraveller}}" (keypress)="flInput($event)" maxlength="{{maxNameLength}}" autocomplete="off" onCopy="return false" onDrag="return false" onDrop="return false" onPaste="return false">
                                                                </mat-form-field>
                                                                <div *ngIf="mlitechildformsubmit && passengerForm.controls['childName'+infanttraveller]['errors'] && passengerForm.controls['childName'+infanttraveller]['touched'] " class="error">
                                                                    <small *ngIf="passengerForm.hasError('required','childName'+infanttraveller)">Please enter
                        name.</small>
                                                                    <small *ngIf="passengerForm.hasError('pattern','childName'+infanttraveller)">Please enter valid
                        name.</small>
                                                                    <small *ngIf="passengerForm.hasError('minlength','childName'+infanttraveller)">Please enter atleast
                        {{minNameLength}} character.</small>
                                                                </div>
                                                            </div>
                                                            <!--   <div class="inner_input col-md-4 col-12 gender_sec">
                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                <mat-label>Gender</mat-label>
                                                <mat-select matNativeControl formControlName="childGender{{traveller}}">
                                    <mat-option value="M">Male</mat-option>
                                    <mat-option value="F">Female</mat-option>
                                   <mat-option value="T">Transgender</mat-option> 
                                  </mat-select>
                                            </mat-form-field>
                                            <div *ngIf="submitted && passengerForm.controls['childGender'+traveller]['errors'] && passengerForm.controls['childGender'+traveller]['touched']" class="error">
                                                <small *ngIf="passengerForm.hasError('required','childGender'+traveller)">Please select
                            gender.</small>
                                            </div>
                                        </div> -->
                                                            <div class="inner_input col-md-4 col-12 ">
                                                                <mat-form-field class="matField_full_width" appearance="outline">
                                                                    <mat-label>Age</mat-label>
                                                                    <mat-select matNativeControl formControlName="childAge{{infanttraveller}}">
                                                                        <mat-option value="0">Below One Year</mat-option>
                                                                        <mat-option value="1">One year</mat-option>
                                                                        <mat-option value="2">Two years</mat-option>
                                                                        <mat-option value="3">Three years</mat-option>
                                                                        <mat-option value="4">Four years</mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>
                                                                <div *ngIf="mlitechildformsubmit &&  passengerForm.controls['childAge'+infanttraveller]['errors'] && passengerForm.controls['childAge'+infanttraveller]['touched']" class="error">
                                                                    <small *ngIf="passengerForm.hasError('required','childAge'+infanttraveller)">Please select
                            age.</small>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <button (click)="validateMliteForm('infant',infanttraveller)" type="submit" class="add_new_submit_btn">Add</button>
                                                            </div>
                                                        </div>
                                                        <!-- </ng-container> -->
                                                    </div>

                                                </div>
                                                <!-- </ng-container> -->
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- mlite add new adult -->
        <div *ngIf="isMobile">
            <!-- Mlite Add Traveller Popup -->
            <div class=" modal coupon_mlite_popup" id="addTraveller_mlite" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="add_new_traveler pt-0">
                            <ng-container *ngFor="let adulttraveller of travellersArrayM; index as i;">
                                <div *ngIf="adulttraveller==travellersArrayM.length">

                                    <!--Manaual Passenger Adult-->
                                    <div class="modal-header">
                                        <h5 class="modal-title">Add New Adult </h5>
                                        <button type="button" class="btn-close" (click)="removeMobileAdult(adulttraveller,-1)"></button>
                                    </div>
                                    <div class="modal-body pt-0 mlite_add_traveller_popupbody">
                                        <div *ngIf="travellersArrayM && travellersArrayM.length>0 ">
                                            <div>
                                                <!-- add traveller popup form -->
                                                <div class="row">
                                                    <!-- radio buttons male/female-->
                                                    <div class="col-12">
                                                        <div class="trip_select">
                                                            <div class="buttonTrip">
                                                                <input type="radio" id="male" name="passengerGender{{adulttraveller}}" formControlName="passengerGender{{adulttraveller}}" checked value="M" />
                                                                <label class="btn btn-default" for="male">Male</label>
                                                            </div>
                                                            <div class="buttonTrip">
                                                                <input type="radio" id="female" name="passengerGender{{adulttraveller}}" formControlName="passengerGender{{adulttraveller}}" value="F" />
                                                                <label class="btn btn-default" for="female">Female</label>
                                                            </div>
                                                            <div class="buttonTrip">
                                                                <input type="radio" id="transgender" name="passengerGender{{adulttraveller}}" formControlName="passengerGender{{adulttraveller}}" value="T" />
                                                                <label class="btn btn-default" for="transgender">Transgender</label>
                                                            </div>
                                                        </div>
                                                        <span *ngIf="mlitetravellerformsubmit && passengerForm.controls['passengerGender'+adulttraveller]['errors'] && 
                                       passengerForm.controls['passengerGender'+adulttraveller]['touched']" class="error">

                                                    <mat-error class="error_bus" *ngIf="passengerForm.controls['passengerGender'+adulttraveller]['errors']['required']">Gender is required</mat-error>
                                                
                                                    </span>

                                                    </div>
                                                    <!-- end of radio buttons male/female -->
                                                </div>

                                                <!--Manaual Passenger Adult-->
                                                <!-- <ng-container *ngFor="let traveller of travellersArrayM; index as i; trackBy: trackByTraveller;let last = last;"> -->

                                                <div>
                                                    <div class="row contact-form edit_traveller_sec g-3">
                                                        <div class="inner_input col-md-4 col-12">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Passenger Name </mat-label>
                                                                <input matInput placeholder="Name" formControlName="passengerName{{adulttraveller}}" (keypress)="flInput($event)" maxlength="{{maxNameLength}}" autocomplete="off" onDrag="return false" onDrop="return false" value=''>
                                                            </mat-form-field>
                                                            <div *ngIf="mlitetravellerformsubmit && passengerForm.controls['passengerName'+adulttraveller] && passengerForm.controls['passengerName'+adulttraveller]['errors'] && passengerForm.controls['passengerName'+adulttraveller]['touched']" class="error">
                                                                <small *ngIf="passengerForm.hasError('required','passengerName'+adulttraveller)">Please enter
                    name.</small>
                                                                <small *ngIf="passengerForm.hasError('pattern','passengerName'+adulttraveller)">Please enter
                    valid name.</small>
                                                                <small *ngIf="passengerForm.hasError('minlength','passengerName'+adulttraveller)">Please enter
                    atleast {{minNameLength}} character.</small>
                                                                <small *ngIf="passengerForm.hasError('maxlength','passengerName'+adulttraveller)">Please enter
                    atleast {{maxNameLength}} character.</small>
                                                            </div>
                                                        </div>
                                                        <!--   <div class="inner_input col-md-4 col-12 gender_sec">
                                        <mat-form-field class="matField_full_width" appearance="outline">
                                            <mat-label>Gender</mat-label>
                                            <mat-select matNativeControl [(ngModel)]="genderSelectArr[adulttraveller]" (ngModelChange)="seniorCitizenArr(genderSelectArr[adulttraveller],adulttraveller)" formControlName="passengerGender{{adulttraveller}}">
                    <mat-option value="M">Male</mat-option>
                    <mat-option value="F">Female</mat-option>
                    <mat-option value="T">Transgender</mat-option>
                    </mat-select>
                                        </mat-form-field>
                                        <div *ngIf="submitted && 'passengerGender'+adulttraveller.errors && 'passengerGender'+adulttraveller.touched" class="error">
                                            <small *ngIf="passengerForm.hasError('required','passengerGender'+adulttraveller)">Please
                    select gender.</small>
                                        </div>
                                    </div> -->
                                                        <div class="inner_input col-md-4 col-12 age_sec">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Age</mat-label>
                                                                <input matInput placeholder="Age" id="adultage" formControlName="passengerAge{{adulttraveller}}" maxlength="3" (keypress)="numberInput($event)" (keyup)="maxAgeLimitArr(adulttraveller)" autocomplete="off" onCopy="return false" onDrag="return false" onDrop="return false"
                                                                    onPaste="return false" value=''>
                                                            </mat-form-field>
                                                            <div *ngIf="mlitetravellerformsubmit &&  'passengerAge'+adulttraveller.errors && 'passengerAge'+adulttraveller.touched" class="error">
                                                                <small *ngIf="passengerForm.hasError('required','passengerAge'+adulttraveller)">Please
                    enter age.</small>
                                                                <small *ngIf="passengerForm.hasError('pattern','passengerAge'+adulttraveller)">Age should
                    be numeric.</small>
                                                                <small *ngIf="passengerForm.hasError('min','passengerAge'+adulttraveller)">{{ageValidErrorArr[traveller]}}</small>
                                                                <small *ngIf="passengerForm.hasError('max','passengerAge'+adulttraveller)">{{ageValidErrorArr[traveller]}}</small>
                                                            </div>
                                                        </div>
                                                        <div class="inner_input col-md-4 col-12">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Seat Preference</mat-label>
                                                                <mat-select matNativeControl formControlName="passengerBerthChoice{{adulttraveller}}">
                                                                    <mat-option value="">No Preference</mat-option>
                                                                    <mat-option *ngFor="let each of applicableBerthTypes" value="{{each}}">{{masterBerth[each]}}</mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                        </div>

                                                        <div class="inner_input col-md-4 col-12">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Country</mat-label>
                                                                <mat-select matNativeControl [(ngModel)]="defaultCountryArr[adulttraveller]" (ngModelChange)="countrySelectAddMore(adulttraveller)" formControlName="passengerNationality{{adulttraveller}}">
                                                                    <mat-option *ngFor="let each of countries" [value]="each.countryCode"> {{each.country}}</mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="traveler-details-info">
                                                    <div class="row contact-form">
                                                        <div class="col-12 col-md-6" *ngIf="showTravelDocumentAddMore[adulttraveller]">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Travel Document</mat-label>
                                                                <mat-select placeholder="" formControlName="passengerTravelDocument{{adulttraveller}}">
                                                                    <mat-option value="PASSPORT"> PASSPORT/TRAVEL DOCUMENT</mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                            <div *ngIf="mlitetravellerformsubmit && passengerForm.controls['passengerTravelDocument'+adulttraveller]['errors'] &&passengerForm.controls['passengerTravelDocument'+adulttraveller]['touched']" class="error">
                                                                <small *ngIf="passengerForm.hasError('required','passengerTravelDocument'+adulttraveller)">Please
                       enter travel document.</small>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-12" *ngIf="showTravelDocumentAddMore[adulttraveller]">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Passport No</mat-label>
                                                                <input matInput placeholder="" formControlName="passengerTravelDocCardNo{{adulttraveller}}" maxlength="{{maxPassportLength}}" autocomplete="off" onDrag="return false" onDrop="return false" (keypress)="specialcharInput($event)" (keyup)="convertToUpperCase($event)">
                                                            </mat-form-field>
                                                            <div *ngIf="mlitetravellerformsubmit &&  passengerForm.controls['passengerTravelDocCardNo'+adulttraveller]['errors'] &&passengerForm.controls['passengerTravelDocCardNo'+adulttraveller]['touched']" class="error">
                                                                <small *ngIf="passengerForm.hasError('required','passengerTravelDocCardNo'+adulttraveller)">Please
                       enter passport number.</small>
                                                                <small *ngIf="passengerForm.hasError('minlength','passengerTravelDocCardNo'+adulttraveller)">Please
                       enter atleast {{minPassportLength}} characters.</small>
                                                                <small *ngIf="passengerForm.hasError('pattern','passengerTravelDocCardNo'+adulttraveller)">Please
                       enter valid passport number.</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row contact-form" *ngIf="showTravelDocumentAddMore[adulttraveller]">
                                                        <div class="col-md-6">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Date of Birth(DD-MM-YYYY)</mat-label>
                                                                <input matInput [matDatepicker]="picker2" disabled formControlName="foreignPassengerDOB{{adulttraveller}}" [min]="calenderminDate" [max]="calendermaxDate">
                                                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                                                <mat-datepicker #picker2 disabled="false"></mat-datepicker>
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                    <div class="row contact-form">
                                                        <div class="col-12 col-md-6" *ngIf="foodChoiceEnabled">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Meal Preference</mat-label>
                                                                <mat-select placeholder="" formControlName="passengerMealPreference{{adulttraveller}}">
                                                                    <mat-option *ngFor="let each of foodDetails" [value]="each"> {{masterFood[each]}}
                                                                    </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                            <div *ngIf="mlitetravellerformsubmit &&  passengerForm.controls['passengerMealPreference'+adulttraveller]['errors']" class="error">
                                                                <small *ngIf="passengerForm.controls['passengerMealPreference'+adulttraveller]['errors']['required']">Food
                       Choice is required.</small>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-md-6" *ngIf="seniorCitizenEnabledArr[adulttraveller] && seniorCitizenApplicableArr[traveller]">
                                                            <mat-form-field class="matField_full_width" appearance="outline">
                                                                <mat-label>Senior Citizen Concession</mat-label>
                                                                <mat-select placeholder="" formControlName="passengerSeniorCitizen{{adulttraveller}}">
                                                                    <mat-option value="1"> Avail Concession </mat-option>
                                                                    <mat-option value="2"> Forgo 50% Concession </mat-option>
                                                                    <mat-option value="3"> Forgo full Concession </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                            <div *ngIf="mlitetravellerformsubmit &&  passengerForm.controls['passengerSeniorCitizen'+adulttraveller]['errors']" class="error">
                                                                <small *ngIf="passengerForm.controls['passengerSeniorCitizen'+adulttraveller]['errors']['required']">Please select Senior citizen concession.</small>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="form-check mt-3">
                                                        <span *ngIf="optChildBerthStatusArr[adulttraveller]"> <label class="form-check-label">
                                                            <input type="checkbox" (click)="optChildBerth($event)" [checked]="ladiesQuotaTrue"
                                                            formControlName="optChildBerth{{adulttraveller}}" id="optChildBerth{{adulttraveller}}" class="ps-1 form-check-input pass_checkBox"> 
                                                                <div class="label_top_align">Opt Child Berth</div>
                                                            <span class="checkmark"></span>
                                                        </label>
                                                        </span>
                                                    </div>
                                                    <p *ngIf="optBedRollStatus"> <label class="checkbox">Opt Bed Roll
                 <input type="checkbox" (change)="optBedRoll($event,i)"
                    formControlName="optBedRoll{{adulttraveller}}">
                 <span class="checkmark"></span>
                 </label>
                                                    </p>
                                                    <div class="row">
                                                        <div class="col-12">
                                                            <button type="submit" (click)="validateMliteForm('adult',adulttraveller)" class="add_new_submit_btn">Add</button>
                                                        </div>
                                                    </div>
                                                </div>









                                                <!-- end of traveller popup form -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        </form>
        </div>
        <!--Step2 Ends-->
        <!--Step3 Starts-->
        <div class="col-md-8" *ngIf="steps==3">
            <div class="">
                <h4 class="heading_text train_main_hdr">{{travalfrom}} to {{travalto}}
                    <p class="sub_head_text ps-3"><span class="ps-1"> <a href="javascript:void(0)" (click)="moveTab(1)"><img
                      src="{{cdnUrl}}/images/icons/edit.png" alt=""></a></span></p>
                </h4>
                <div class="booking-process-content">
                    <div class="booking-inner-box from-to-box">

                        <!-- Webcode Train Details-->
                        <div class="d-none d-sm-block">
                            <div class="row">

                                <div class="col-sm-4">
                                    <p class="train_name">
                                        {{trainName}}<span class="train_numb">({{trainnumber}})</span>
                                    </p>
                                    <p class="daily_chart">
                                        <span class="text-small-gray" style="color:#000000;">Runs on:</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningSun=='Y' }">S</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningMon=='Y' }">M</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningTue=='Y' }">T</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningWed=='Y' }">W</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningThu=='Y' }">T</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningFri=='Y' }">F</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningSat=='Y' }">S</span>
                                    </p>
                                </div>
                                <div class="col-sm-8">
                                    <!-- <div class="trainTimeInfo">
                                        <div class="">
                                            <p><span class="time">{{scheduletime}}, {{traveldate | date:'EEE'}} check</span></p>
                                            <p class="place">{{fromstnDesc}} Boarding: {{boardingstnName}} </p>
                                            <p class="date">{{traveldate | date:'MMM dd, yyyy'}}</p>
                                        </div>
                                        <div>
                                            <div class="duration_train">
                                                <p class="dur_time">{{travelDuration}}</p>
                                                <div class="range m_range"></div>
                                            </div>
                                        </div>
                                        <div>
                                            <p><span class="time">{{arrivalTime}}, {{journeyArrivalDate | date:'EEE'}}</span> </p>
                                            <p class="place">{{tostnDesc}}</p>
                                            <p class="date">{{journeyArrivalDate | date:'MMM dd, yyyy'}}</p>
                                        </div>
                                    </div> -->
                                    <div class="trainTimeInfo">
                                        <div class="trainTimeInfo_div">
                                            <p><span class="time">{{scheduletime}}, {{traveldate | date:'EEE'}} check</span></p>
                                            <p class="place">{{fromstnDesc}} Boarding: {{boardingstnName}} </p>
                                            <p class="date">{{traveldate | date:'MMM dd, yyyy'}}</p>
                                        </div>
                                        <div class="trainTimeInfo_div align_center">
                                            <div class="duration_train">
                                                <p class="dur_time">{{travelDuration}}</p>
                                                <div class="range m_range"></div>
                                            </div>
                                        </div>
                                        <div class="trainTimeInfo_div">
                                            <p><span class="time">{{arrivalTime}}, {{journeyArrivalDate | date:'EEE'}}</span> </p>
                                            <p class="place">{{tostnDesc}}</p>
                                            <p class="date">{{journeyArrivalDate | date:'MMM dd, yyyy'}}</p>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <!-- Mlitecode Train Details -->
                        <div class="d-block d-sm-none m-light">
                            <div class="row">
                                <div class="col-6">
                                    <p class="train_name">
                                        {{trainName}}<span class="train_numb">({{trainnumber}})</span>
                                    </p>
                                </div>
                                <div class="col-6 text-right">
                                    <p class="daily_chart">
                                        <!-- <span class="text-small-gray" style="color:#000000;">Runs on:</span> -->
                                        <span class="text-small-gray" style="color:#000000;"></span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningSun=='Y' }">S</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningMon=='Y' }">M</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningTue=='Y' }">T</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningWed=='Y' }">W</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningThu=='Y' }">T</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningFri=='Y' }">F</span>
                                        <span [ngClass]="{'active': seacthResult.selectedTrain.runningSat=='Y' }">S</span>
                                    </p>
                                </div>
                            </div>
                            <div class="trainTimeInfo d-block">
                                <div class="row my-2">
                                    <div class="col-3 pr-0">
                                        <div>
                                            <p><span class="time">{{scheduletime}}, {{traveldate | date:'EEE'}}</span></p>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="duration_train">
                                            <p class="dur_time">{{travelDuration}}</p>
                                            <div class="range m_range"></div>
                                        </div>
                                    </div>
                                    <div class="col-3 text-right pl-0">
                                        <div>
                                            <p><span class="time">{{arrivalTime}}, {{journeyArrivalDate | date:'EEE'}}</span> </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="trainTimeInfo d-block">
                                <div class="row border-bottom pb-4">
                                    <div class="col-6">
                                        <p class="place">{{fromstnDesc}} Boarding: {{boardingstnName}} </p>
                                        <p class="date">{{traveldate | date:'MMM dd, yyyy'}}</p>
                                    </div>
                                    <div class="col-6 text-right">
                                        <p class="place">{{tostnDesc}}</p>
                                        <p class="date">{{journeyArrivalDate | date:'MMM dd, yyyy'}}</p>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="row mt-1 gy-4">

                            <div class="col-sm-4">
                                <p class="train_title_label"> Availability Status </p>
                                <div class="common_box">
                                    <div>
                                        <p class="ava_status">
                                            <span class="coach">{{enqClass}}</span>
                                            <!-- <span class="list">
                                                    {{seacthResult.selectedAvailablityFare.availablityStatus}}
                                                   </span> -->
                                            <span class="label-green" *ngIf="seacthResult.selectedAvailablityFare.availablityType!=0 && seacthResult.selectedAvailablityFare.availablityType!=4 && seacthResult.selectedAvailablityFare.availablityType!=5 && seacthResult.selectedAvailablityFare.availablityType!=8224 && seacthResult.selectedAvailablityFare.availablityType!=3">
                                                    {{seacthResult.selectedAvailablityFare.availablityStatus}}
                                                   </span>
                                            <span class="label-red" *ngIf="seacthResult.selectedAvailablityFare.availablityType==0 || 
                                                    seacthResult.selectedAvailablityFare.availablityType==4 || seacthResult.selectedAvailablityFare.availablityType==5 || seacthResult.selectedAvailablityFare.availablityType==8224">
                                                    {{seacthResult.selectedAvailablityFare.availablityStatus}}
                                                   </span>
                                            <span class="label-orange" *ngIf="seacthResult.selectedAvailablityFare.availablityType==3">
                                                    {{seacthResult.selectedAvailablityFare.availablityStatus}}
                                                   </span>



                                        </p>
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-8">
                                <!--Show bording stations-->
                                <p class="train_title_label"> Boarding Station </p>
                                <div class="common_box">
                                    <div>
                                        <p class="ava_status">
                                            <span class="coach">{{defaultBoardingStation}}</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="train-schedule-time">
                                    <span>Scheduled time: <span>{{scheduletime}}</span> </span>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>





            </div>

            <div class="booking-process-content contact_review">
                <div class="booking-title-box mb-0">
                    <h4 class="heading_text">Contact Details
                        <p class="sub_head_text ps-3">(for all communication) <span class="ps-1"> <a href="javascript:void(0)" (click)="moveTab(2)"><img
                          src="{{cdnUrl}}/images/icons/edit.png" alt=""></a></span></p>
                    </h4>
                </div>
                <div class="booking-inner-box from-to-box">
                    <div class="">
                        <div class="row gy-4">
                            <div class="col-xl-6 col-lg-6 col-md-6">
                                <p class="label_text">Email</p>
                                <p class="label_value">{{passengerItineraryDetails.email}}</p>
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-6">
                                <p class="label_text">Mobile Number</p>
                                <p class="label_value">{{passengerItineraryDetails.mobileNumber}}</p>
                            </div>
                        </div>

                        <div class="contact-whatsapp">
                            <div class="contact-whatsapp-info me-2">
                                <span>Send my booking information through</span>
                                <img src="{{cdnUrl}}/images/icons/whatsapp.png" class="ms-2 " alt="">
                                <span class="fw_7 ">WhatsApp</span>
                            </div>
                            <div class="form-check form-switch m-0 ">
                                <input class="form-check-input" type="checkbox" role="switch" disabled [checked]="whatsAppCheck" />
                            </div>
                        </div>
                    </div>

                </div>

            </div>
            <div class="booking-process-content traveller_review">

                <div class="booking-title-box mb-0">


                    <h4 class="heading_text">Traveller Details
                        <p class="sub_head_text">
                            <span class="sub_head_text">{{travellerListArray.length}}
                                Adults<span *ngIf="infantListArray.length > 0">, {{infantListArray.length}} infant</span>
                            </span>
                            <a href="javascript:void(0)" (click)="moveTab(2)"><img src="{{cdnUrl}}/images/icons/edit.png" class="ps-3" alt=""></a>

                        </p>

                    </h4>
                    <!-- <p class="sub_head_text ps-3"><span>{{travellerListArray.length}}
                      Adults</span><span *ngIf="infantListArray.length > 0">, {{infantListArray.length}} infant</span>
                         <span
                      *ngIf="travelerDetails.infants > 0">, {{travelerDetails.infants}} infant</span> </p> -->

                </div>
                <div class="booking-inner-box from-to-box">
                    <div class="p-2">
                        <div *ngIf="travellerListArray.length > 0">
                            <h6>{{travellerListArray.length}} Adults</h6>
                            <table class="table  traveller_table">
                                <thead>
                                    <tr>
                                        <th scope="col" width="50%">Name</th>
                                        <th scope="col" width="10%">Age</th>
                                        <th scope="col" width="20%">Gender</th>
                                        <th scope="col" width="20%">Berth Preference</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container *ngFor="let adult of travellerListArray;let i = index">
                                        <tr>
                                            <td>{{adult.passengerName}}</td>
                                            <td>{{adult.passengerAge}}</td>
                                            <td>{{(adult.passengerGender=="M") ? 'Male ': (adult.passengerGender=="F") ? 'Female' : 'Transgender'}}</td>
                                            <td>{{(adult.passengerBerthChoice !='') ? adult.passengerBerthChoice : '-' }}</td>
                                        </tr>
                                    </ng-container>
                                </tbody>
                            </table>
                        </div>

                        <div *ngIf="infantListArray.length > 0">
                            <h6>{{infantListArray.length}} Infant</h6>
                            <table class="table  traveller_table">
                                <thead>
                                    <tr>
                                        <th scope="col" width="50%">Name</th>
                                        <th scope="col" width="10%">Age</th>
                                        <th scope="col" width="20%">Gender</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <ng-container *ngFor="let infant of infantListArray;let i = index">
                                        <tr>
                                            <td>{{infant.name}}</td>
                                            <td>{{infant.age}}</td>
                                            <td>{{infant.gender}}</td>
                                            <td></td>
                                        </tr>
                                    </ng-container>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!--Step3 Ends-->

        <!--Steps 4-->
        <div class="col-md-8" *ngIf="steps==4">
            <div class="booking-process-content" *ngIf="totalCollectibleAmount">
                <div class="booking-title-box">
                    <h4>Choose Payment mode</h4>
                </div>

                <app-payment (sendCouponEvent)="receiveCouponDetails($event)" [remove_Coupon]="remove_Coupon" [passSavedCardsData]="savedCards" [passSessionKey]="searchTrainKey" (sendflexiAmount)='reciveflexiAmount($event)' [passTotalFare]="totalCollectibleAmount" [passActualFare]="totalCollectibleAmountFromPartnerResponse"
                    [passConvinenceFee]="convenience_fee" [passServiceId]="serviceId" [passXSRFTOKEN]="XSRFTOKEN" [passIsDcemiEligibleFlag]="IsDcemiEligibleFlag" [passREWARD_MOBILE]="REWARD_MOBILE" [passFlexipayEligibleFlag]="isFlexipayEligibleFlag" (sendtotalfare)="recivetotalFare($event)"
                    (sendPointsPlusEvent)="receivePointsPlus($event)" [passflexiFare]="sendflexiFare" [partnerToken]="partnerToken" [isMobile]="isMobile" [retryPay]="1">
                </app-payment>
            </div>
        </div>
        <!--Step4 Ends-->

        <div class="col-md-4" *ngIf="totalCollectibleAmount">
            <!-- <app-fare-summary></app-fare-summary> -->
            <div class="sticky_scroll_sidebar">
                <div class="default-sidebar">
                    <div class="d-none d-sm-block">
                        <div class="sidebar-widget session-expires-widget">
                            <p><img src="{{cdnUrl}}/images/icons/sestion.png" class="me-2" alt="">Booking Expires in <strong>
                    <countdown [config]="{ leftTime: 900, format: 'mm:ss'}" (event)="bookingSessionExpires($event)">
                    </countdown> min
                  </strong></p>
                        </div>
                        <div class="sidebar-widget fare-summary-widget">
                            <div class="widget-title">
                                <h4>Fare Summary</h4>
                                <img src="{{cdnUrl}}/images/smartbuy/partner/svg/irctc.svg" alt="IRCTC">
                            </div>
                            <div class="widget-content">
                                <ul class="widget-list clearfix">
                                    <li class="fare-list-item">
                                        <div class="fare-list-box">
                                            <div class="fare-list-left">
                                                <div (click)="isCollapseShow('BaseFare')">
                                                    <div data-bs-toggle="collapse" class="collapse_text" href="#base-collpase" role="button" aria-expanded="false" aria-controls="base-collpase">

                                                        <!-- <img class="me-2" src="{{cdnUrl}}/images/icons/expand.png" alt="" *ngIf="!isCollapseBasefare">

                                                        <img class="me-2" src="{{cdnUrl}}/images/icons/remove.png" alt="" *ngIf="isCollapseBasefare">  -->
                                                        Ticket Fare</div>

                                                </div>
                                            </div>
                                            <div class="fare-list-right">
                                                <p>₹ {{(totalTicketFare-0) | number : '1.2-2'}}</p>
                                            </div>

                                        </div>
                                        <!--<div *ngIf="AdtBaseFare>0">
                        <div class="collapse base_fare_collapse" id="base-collpase">
                          <div class="row ">
                            <div class="col-md-11 offset-md-1">
  
                              <div class="row collapse_row" *ngIf="AdtBaseFare>0">
                                <div class="col-8 fare-list-left">
                                   <p>Adult(s) ({{AdtQuantity}} X ₹ {{AdtBaseFare | number}})</p>
                                </div>
                                <div class="col-4 fare-list-right">
                                   <p>₹ {{AdtBaseFare * AdtQuantity | number}}</p>
                                </div>
                             </div>
                            </div>
                          </div>
                          </div>
                        </div>-->

                                    </li>

                                    <ng-container *ngIf="steps > 2">
                                        <li class="fare-list-item">
                                            <div class="fare-list-box">
                                                <div class="fare-list-left">
                                                    <p>Travel Insurance Charges (Incl. GST)
                                                    </p>
                                                </div>
                                                <div class="fare-list-right">
                                                    <p>&#8377; {{((travel_ins_charge-0)+(travel_ins_charge_tax-0)) | number : '1.2-2'}}</p>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="fare-list-item">
                                            <div class="fare-list-box">
                                                <div class="fare-list-left">
                                                    <p>Convenience fee (Incl. of GST)
                                                    </p>
                                                </div>
                                                <div class="fare-list-right">
                                                    <p>&#8377; {{(wp_charge-0)+(wp_charge_tax-0) | number : '1.2-2'}}</p>
                                                </div>
                                            </div>
                                        </li>

                                        <li class="fare-list-item" *ngIf="campiagn_agent_charges==0">
                                            <div class="fare-list-box">
                                                <div class="fare-list-left">
                                                    <p>SmartBuy Charges (Incl. of GST)</p>
                                                </div>
                                                <div class="fare-list-right">
                                                    <p> <span class="value-free dash_line"><del>&#8377; {{agent_charges | number : '1.2-2'}}</del></span> <span class="text-free">FREE</span></p>
                                                </div>
                                            </div>
                                        </li>


                                        <li class="fare-list-item" *ngIf="campiagn_agent_charges < agent_charges && campiagn_agent_charges != 0">
                                            <div class="fare-list-box">
                                                <div class="fare-list-left">
                                                    <p>SmartBuy Charges (Incl. of GST)</p>
                                                </div>
                                                <div class="fare-list-right">
                                                    <p> <span class="value-free"><del>&#8377; {{agent_charges | number : '1.2-2'}}</del></span> <span class="text-free">&#8377; {{campiagn_agent_charges | number : '1.2-2'}}</span></p>
                                                </div>
                                            </div>
                                        </li>

                                        <li class="fare-list-item" *ngIf="campiagn_agent_charges == agent_charges">
                                            <div class="fare-list-box">
                                                <div class="fare-list-left">
                                                    <p>SmartBuy Charges (Incl. of GST)</p>
                                                </div>
                                                <div class="fare-list-right">
                                                    <p> <span class="value-free">&#8377; {{agent_charges | number : '1.2-2'}}</span> </p>
                                                </div>
                                            </div>
                                        </li>


                                        <li class="fare-list-item" *ngIf="pgCharges>0.00">
                                            <div class="fare-list-box">
                                                <div class="fare-list-left">
                                                    <p>PG Charges</p>
                                                </div>
                                                <div class="fare-list-right">
                                                    <p>&#8377; <b class="value-free">&#8377; {{pgCharges | number : '1.2-2'}}</b> </p>
                                                </div>
                                            </div>
                                        </li>



                                        <li class="fare-list-item" *ngIf="coupon_amount>0.00">
                                            <div class="fare-list-box">
                                                <div class="fare-list-left" data-bs-toggle="collapse" class="collapse_text" href="#coupon-collpase" role="button" aria-expanded="false" aria-controls="coupon-collpase" (click)="isCollapseShow('discount')">

                                                    <div>
                                                        <img class="me-2" src="{{cdnUrl}}/images/icons/expand.svg" alt="" *ngIf="!isCollapseDiscount">

                                                        <img class="me-2" src="{{cdnUrl}}/images/icons/remove.svg" alt="" *ngIf="isCollapseDiscount"> Discounts
                                                    </div>
                                                </div>
                                                <div class="fare-list-right">
                                                    <p class="text-green">- &#8377; {{coupon_amount}}</p>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="collapse base_fare_collapse" id="coupon-collpase">
                                                    <div class="row ">
                                                        <div class="col-md-11 offset-md-1">

                                                            <div class="row collapse_row">
                                                                <div class="col-5 fare-list-left">
                                                                    <p>Coupoun Code</p>
                                                                </div>
                                                                <div class="col-7 fare-list-right">
                                                                    <p>{{coupon_code}}</p>
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>
                                                </div>

                                            </div>


                                        </li>


                                        <li class="fare-list-item" *ngIf="flexipaysummry">
                                            <div class="fare-list-box">
                                                <div class="fare-list-left">
                                                    <p>FlexiPay Discount</p>
                                                </div>
                                                <div class="fare-list-right">
                                                    <p>&#8377; <b class="value-free">Rs. {{flexiDiscount | number : '1.2-2'}}</b> </p>
                                                </div>
                                            </div>
                                        </li>

                                        <li class="fare-list-item">
                                            <div class="fare-list-box pt-30">
                                                <div class="fare-list-left">
                                                    <h6 class="fw_7">Grand Total</h6>
                                                    <p class="payment-text pt-1">*PG charges as applicable.</p>
                                                </div>
                                                <div class="fare-list-right">
                                                    <h6 class="fw_7">₹ {{(totalCollectibleAmount-0)+(pgCharges-0) | number : '1.2-2'}}</h6>
                                                </div>

                                            </div>
                                        </li>
                                    </ng-container>
                                </ul>
                            </div>
                        </div>
                        <div class="continue-widget mb-20">
                            <a href="javascript:void(0);" class="button-style w-100 mb-20" (click)="createTrainItinerary()" *ngIf="steps==2">Continue</a>
                            <a href="javascript:void(0);" class="button-style w-100 mb-20" (click)="opencovidconfirmationDialog()" *ngIf="steps==3">Continue</a>

                        </div>
                    </div>
                    <div *ngIf="steps==3 && !isMobile">
                        <app-coupons (sendCouponEvent)="receiveCouponDetails($event)" [passSessionKey]="searchBusKey" [orderReferenceNumber]="orderReferenceNumber" [remove_Coupon]="remove_Coupon" [passTotalFare]="totalFare" [passActualFare]="totalCollectibleAmount" [passConvinenceFee]="convenience_fee"
                            passServiceToken="Train" passPartnerToken="IRCTC" (sendtotalfare)="recivetotalFare($event)" [customerInfo]="customerInfo">
                        </app-coupons>
                    </div>
                </div>
            </div>

        </div>
        </div>
        </div>
    </section>



    <div class="modal fade bookingprocess" id="bookingprocessFailed" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body " style="padding: 25px;">
                    <div class="bookingprocess-items">
                        <div class="bookingprocess-content">
                            An Error occurred during fetching details. Do Not Worry! <br><br> Click on Retry
                        </div>
                        <div class="refresh-text text-center pt-2">
                            <button type="button" class="btn btn-primary" (click)="triggerBack()">Retry</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade bookingprocess" id="bookingprocessPriceChange" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body " style="padding: 25px;">
                    <div class="bookingprocess-items">
                        <div class="bookingprocess-title text-center mb-30">
                            <h5><strong>Fare has changed</strong></h5>
                        </div>
                        <div class="bookingprocess-content p-20 border-0 m-0">
                            <p>The fare of the itinerary you have chosen has changed</p>
                            <div><b>Old Price</b> : ₹{{old_fare}}</div>
                            <hr>
                            <div>
                                <div class="row">
                                    <div class="col-6">
                                        <b>New Price</b>
                                    </div>
                                    <div class="col-6 text-end">
                                        <b class="new_fare_flight">₹{{new_fare}}</b>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="refresh-text text-center pt-2">
                            <button type="button" class="btn btn-primary" (click)="continueWithNewFare(continueWithNewFareInterval)">Continue with New
              Fare</button>
                        </div>
                        <div class="refresh-text text-center pt-2">
                            <button type="button" class="btn" (click)="triggerBack()">Choose Different Itinerary</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mlite Footer Price Section  -->
    <div class="d-block d-sm-none">
        <div class="footer-sticky-mlite">
            <div>
                <div class="apply_fare row" *ngIf="steps==3">
                    <!--  <p *ngIf="steps<5" class="w-75"></p> -->
                    <div class="col-6 text-left">
                        <p><a href="javascript:;" type="button" class="" data-bs-toggle="modal" data-bs-target="#applyCoupon_mlite">Apply Coupon</a></p>
                    </div>
                    <div class="col-6 text-right">
                        <p><a href="javascript:;" type="button" class="" data-bs-toggle="modal" data-bs-target="#fareSummary_mlite">Fare Summary</a></p>
                    </div>
                </div>
                <div class="price_sec">
                    <div class="row">
                        <div class="col-5">
                            <div class="">
                                <h6 class="price">₹{{totalCollectibleAmount|number}}</h6>
                                <p class="emi" *ngIf="TotalFare > EMIAvailableLimit">EMI @ {{calculateEMI(totalCollectibleAmount)|number: '.2'}}/month</p>

                            </div>
                        </div>
                        <div class="col-7">
                            <div>
                                <a href="javascript:void(0);" class="button-style w-100" (click)="submitBookingInfo()" *ngIf="steps==1">Continue</a>
                                <a href="javascript:void(0);" class="button-style w-100" (click)="createTrainItinerary()" *ngIf="steps==2">Continue</a>
                                <a href="javascript:void(0);" class="button-style w-100" (click)="opencovidconfirmationDialog()" *ngIf="steps==3">Continue</a>
                                <a href="javascript:void(0);" class="button-style btn_pay chkout-btn_pay" (click)="continuePayment()" *ngIf="steps==4">Pay now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mlite Apply Coupon Popup -->
    <div class="modal coupon_mlite_popup" id="applyCoupon_mlite" tabindex="-1" aria-labelledby="applyCoupon_mliteLabel" aria-hidden="true" *ngIf="steps==3 && isMobile">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Coupon Code</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <app-coupons (sendCouponEvent)="receiveCouponDetails($event)" [passSessionKey]="searchBusKey" [orderReferenceNumber]="orderReferenceNumber" [remove_Coupon]="remove_Coupon" [passTotalFare]="totalFare" [passActualFare]="totalCollectibleAmount" [passConvinenceFee]="convenience_fee"
                        passServiceToken="Train" passPartnerToken="IRCTC" (sendtotalfare)="recivetotalFare($event)" [customerInfo]="customerInfo">
                    </app-coupons>
                </div>
                <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div> -->
            </div>
        </div>
    </div>

    <!-- Mlite Fare Summary Popup -->
    <div class="modal coupon_mlite_popup" id="fareSummary_mlite" tabindex="-1" aria-labelledby="fareSummary_mliteLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header pb-0">
                    <h5 class="modal-title">Fare Summary</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body pt-0">
                    <div>
                        <img *ngIf="selectedOnwardVendor" src="{{cdnUrl}}images/flight_partners/{{selectedOnwardVendor.partnerName}}.png" alt="{{selectedOnwardVendor.partnerName}}">
                    </div>
                    <div class="widget-content">
                        <ul class="widget-list clearfix">
                            <li class="fare-list-item">
                                <div class="fare-list-box">
                                    <div class="fare-list-left">
                                        <span>
                    <!-- <img class="me-2" src="{{cdnUrl}}/images/icons/add.png" alt=""> -->
                    Ticket Fare
                  </span>
                                    </div>
                                    <div class="fare-list-right">
                                        <p>&#8377;{{(totalTicketFare-0) | number : '1.2-2'}}</p>
                                    </div>
                                </div>
                            </li>
                            <li class="fare-list-item">
                                <div class="fare-list-box">
                                    <div class="fare-list-left">
                                        <span>
                    <!-- <img class="me-2" src="{{cdnUrl}}/images/icons/add.png" alt=""> -->
                    Travel Insurance Charges (Incl. GST)
                  </span>
                                    </div>
                                    <div class="fare-list-right">
                                        <p>&#8377;{{((travel_ins_charge-0)+(travel_ins_charge_tax-0)) | number : '1.2-2'}}</p>
                                    </div>
                                </div>
                            </li>

                            <li class="fare-list-item">
                                <div class="fare-list-box">
                                    <div class="fare-list-left">
                                        <span>
                    <!-- <img class="me-2" src="{{cdnUrl}}/images/icons/add.png" alt=""> -->
                    Convenience fee (Incl. of GST)
                  </span>
                                    </div>
                                    <div class="fare-list-right">
                                        <p>&#8377;{{(wp_charge-0)+(wp_charge_tax-0) | number : '1.2-2'}}</p>
                                    </div>
                                </div>
                            </li>
                            <li class="fare-list-item" *ngIf="campiagn_agent_charges==0">
                                <div class="fare-list-box">
                                    <div class="fare-list-left">
                                        <p>SmartBuy Charges (Incl. of GST)</p>
                                    </div>
                                    <div class="fare-list-right">
                                        <p> <span class="value-free dash_line"><del>&#8377; {{agent_charges | number : '1.2-2'}}</del></span> <span class="text-free">FREE</span></p>
                                    </div>
                                </div>
                            </li>


                            <li class="fare-list-item" *ngIf="campiagn_agent_charges < agent_charges && campiagn_agent_charges != 0">
                                <div class="fare-list-box">
                                    <div class="fare-list-left">
                                        <p>SmartBuy Charges (Incl. of GST)</p>
                                    </div>
                                    <div class="fare-list-right">
                                        <p> <span class="value-free"><del>&#8377; {{agent_charges | number : '1.2-2'}}</del></span> <span class="text-free">&#8377; {{campiagn_agent_charges | number : '1.2-2'}}</span></p>
                                    </div>
                                </div>
                            </li>

                            <li class="fare-list-item" *ngIf="campiagn_agent_charges == agent_charges && campiagn_agent_charges !=0">
                                <div class="fare-list-box">
                                    <div class="fare-list-left">
                                        <p>SmartBuy Charges (Incl. of GST)</p>
                                    </div>
                                    <div class="fare-list-right">
                                        <p> <span class="value-free">&#8377; {{agent_charges | number : '1.2-2'}}</span> </p>
                                    </div>
                                </div>
                            </li>


                            <li class="fare-list-item" *ngIf="pgCharges>0.00">
                                <div class="fare-list-box">
                                    <div class="fare-list-left">
                                        <p>PG Charges</p>
                                    </div>
                                    <div class="fare-list-right">
                                        <p>&#8377; <b class="value-free">&#8377; {{pgCharges | number : '1.2-2'}}</b> </p>
                                    </div>
                                </div>
                            </li>
                            <li class="fare-list-item" *ngIf="coupon_amount>0.00">
                                <div class="fare-list-box">
                                    <div class="fare-list-left" data-bs-toggle="collapse" class="collapse_text" href="#coupon-collpase" role="button" aria-expanded="false" aria-controls="coupon-collpase" (click)="isCollapseShow('discount')">

                                        <div>
                                            <img class="me-2" src="{{cdnUrl}}/images/icons/expand.svg" alt="" *ngIf="!isCollapseDiscount">

                                            <img class="me-2" src="{{cdnUrl}}/images/icons/remove.svg" alt="" *ngIf="isCollapseDiscount"> Discounts
                                        </div>
                                    </div>
                                    <div class="fare-list-right">
                                        <p class="text-green">- &#8377; {{coupon_amount}}</p>
                                    </div>
                                </div>

                                <div>
                                    <div class="collapse base_fare_collapse" id="coupon-collpase">
                                        <div class="row ">
                                            <div class="col-md-11 offset-md-1">

                                                <div class="row collapse_row">
                                                    <div class="col-5 fare-list-left">
                                                        <p>Coupoun Code</p>
                                                    </div>
                                                    <div class="col-7 fare-list-right">
                                                        <p>{{coupon_code}}</p>
                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                    </div>

                                </div>


                            </li>


                            <li class="fare-list-item" *ngIf="flexipaysummry">
                                <div class="fare-list-box">
                                    <div class="fare-list-left">
                                        <p>FlexiPay Discount</p>
                                    </div>
                                    <div class="fare-list-right">
                                        <p>&#8377; <b class="value-free">Rs. {{flexiDiscount | number : '1.2-2'}}</b> </p>
                                    </div>
                                </div>
                            </li>

                            <li class="fare-list-item">
                                <div class="fare-list-box pt-30">
                                    <div class="fare-list-left">
                                        <h6 class="fw_7">Grand Total</h6>
                                        <p class="payment-text pt-1">*PG charges as applicable.</p>
                                    </div>
                                    <div class="fare-list-right">
                                        <h6 class="fw_7">₹ {{(totalCollectibleAmount-0)+(pgCharges-0) | number : '1.2-2'}}</h6>
                                    </div>

                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div> -->
            </div>
        </div>
    </div>


    <div class="modal fade bookingprocess" id="bookingprocessExpires" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body " style="padding: 25px;">
                    <div class="bookingprocess-items">
                        <div class="" id="after-expiry">
                            <div class="">
                                <div class="text-center ">
                                    <div><img src="{{cdnUrl}}images/alert.png" /></div>
                                </div>
                                <div class="session-title text-center ">
                                    <h2>Sorry!</h2>
                                </div>
                                <div class="alert-box-msg  plr50"> This session has expired due to inactivity</div>
                            </div>
                            <div class="">
                                <div class="continue-btn-div">
                                    <button type="button" data-bs-dismiss="modal" class="btn btn-normal btn-animated btn-session-expired" (click)="triggerBack()"><span>Start over</span></button>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

</main>
<div class="modal fade bookingprocess" id="bookingprocessFailed1" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body " style="padding: 25px;">
                <div class="bookingprocess-items">
                    <div class="bookingprocess-content">
                        An Error occurred during fetching details. Do Not Worry! <br><br> Click on Retry
                    </div>
                    <div class="refresh-text text-center pt-2">
                        <button type="button" class="btn btn-primary" (click)="goBack()">Retry</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="ball-running-dots" [fullScreen]="true">
    <p style="color: white"> Loading... </p>
</ngx-spinner>


<!-- Mlite Adult Add  -->