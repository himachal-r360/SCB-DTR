<div class="list-row" *ngIf="showrow && bus.availableSeats > 0" id="bus-{{busId}}">
    <div class="card_details_row card_brdr_btm">
    <div class="row">
        <div class="col-md-3">
            <div class="float-left label-name">
                {{bus.travels}}
            </div>
            <div class="label-gray float-left">{{bus.busType}}</div>
        </div>
        <div class="col-md-6 p0-cut">
            <div class="row">
                <div class="float-left col-md-3 w-15-r">
                    <div class="label-name">{{bus.departureTime | date:'HH:mm'}}</div>

                    <div class="label-gray hide-m">{{busHelper.getBoarding(bus.boardingTimes,bus.departureTime| date:'HH:mm')}}</div>
                    <div class="text-left" *ngIf="nextDayFlag">
                        <span class="next_flag">Next Day</span>
                    </div>

                </div>
                <div class="col-md-3 text-center px-0 durations position-relative">
                    <div class="range"></div>
                    <div class="label-gray label-pos">{{busHelper.timeDifferMin(bus.arrivalTime,bus.departureTime)}}</div>
                </div>
                <div class="float-left col-md-3 w-15-r">
                    <div class="label-name">{{bus.arrivalTime | date:'HH:mm'}}</div>
                    <div class="label-gray hide-m">{{busHelper.getDropping(bus.droppingTimes,bus.arrivalTime| date:'HH:mm')}}</div>
                </div>
                <div class="col-md-3 float-right w-33">
                    <div class="float-left">
                        <div class="label-gray">From</div>
                        <div class="label-name"> ₹ {{bus.fareDetails[0].baseFare | commaSeparator}}</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="float-left col-md-3 text-right hide-m show_seats_btndiv">
            <span *ngIf="bus.availableSeats > 0; else soldout">
                
                <div><button class="btn-primary w-80 showBtn" *ngIf="!showSeatLayout" (click)="onSeats(bus.id,rowvalue,bus,mobile=false);">Show Seats</button></div>
                <div><button class="btn-primary w-80 hideBtn" *ngIf="showSeatLayout" (click)="HideSeats(bus.id,rowvalue,bus,mobile=false);">Hide Seats</button></div>
                <div class="label-black-small text-right pb5">{{bus.availableSeats}} available <ng-container *ngIf="bus.avlWindowSeats > 0"> ({{bus.avlWindowSeats}} Window) </ng-container> </div>
                </span>
            <ng-template #soldout><button class="btn-primary w-80 bkred">Sold Out</button></ng-template>
        </div>
    </div>
    </div>
    <div class="card_details_row max_h_65">
    <div class="row">
        <div class="float-left col-md-9 amenities">
            <div>
                <span *ngIf="bus.rating > 0">
                    <span class="rating " [ngClass]="bus.rating >= 4 ? 'rating-green' : (bus.rating >= 3 ? 'rating-orange' : 'rating-red')"><i class="material-icons">star_rate</i>
                        <span class="rate-value">{{bus.rating}}</span>
                </span>
                </span>
                <div class="float-left pl-6">
                    <!-- <span class="re-schedule"> 
                            <span class="rat-im g"><img src="{{cdnUrl}}images/icons/Reschedulable.svg" ></span>
                            <span class="rat-title">Reschedulable</span>
                        </span> -->
                    <span class="w-rate-count px-2" *ngIf="bus.total_rating_count > 0">{{bus.total_rating_count | number}} Ratings</span>
                    <span class="live-tracking" *ngIf="bus.liveTrackingAvailable"> 
                            <span class="rat-img"><img src="{{cdnUrl}}images/icons/live track.svg" ></span>
                    <span class="rat-title">Live Tracking</span>
                    </span>
                    <span class="live-tracking" *ngIf="bus.mTicketEnabled"> 
                            <span class="rat-img"><img src="{{cdnUrl}}images/icons/mTicketEnabled.svg" ></span>
                    <span class="rat-title">M-ticket Supported</span>
                    </span>

                </div>
            </div>
        </div>
        <div class="col-md-3 text-right">
            <a class="collapse_exp_btn" (click)="showBusDetails(bus.amenities,bus.id,mobile=false)" >
                <span class="mx-3">Bus Details</span>
              </a>
        </div>
    </div>
    </div>
    <div class="collapse details_collpase" id="collapseExample_{{busId}}">
        <div class="">
          
            <ul class="more-details w-33 bus_collapse_ul" id="mat-accordion-tab-details">

                <li id="onAmenities_{{busId}}" (click)="onAmenities(bus.amenities,bus.id,mobile=false)" [ngClass]="{'active': showAmenities}">Amenities</li>
                <li (click)="onCancellation(mobile=false)" [ngClass]="{'active': showCancellation}">Cancellation policy</li>
                <li (click)="onDropping(bus.boardingTimes,bus.droppingTimes)" [ngClass]="{'active': showDropping}">Boarding & dropping points</li>
                <!-- <li *ngIf="show_earnpoints" ><button class="bus-cashback d-show">{{show_earnpoints_text}}</button></li> -->

                <!-- <li *ngIf="!showSeatLayout" (click)="onSeats(bus.id,rowvalue,bus,mobile=true)" [ngClass]="{'active': showSeatLayout}">Seats</li>
                    <li *ngIf="showSeatLayout" (click)="HideSeats(bus.id,rowvalue,bus)" [ngClass]="{'active': showSeatLayout}">Seats</li> -->
            </ul>
            <div class="row amenities-list" *ngIf="showAmenities">
                <ul class="amenities-container">
                    <li *ngIf="busamenities.length <= 0">No Amenities Found</li>
                    <li *ngFor="let amen of busamenities">
                        <i><img src="{{cdnUrl}}images/icons/{{amen|removespace}}.svg" class="px-2"></i>{{amen}}</li>
                </ul>
            
            </div>
            <div class="row amenities-list" *ngIf="showDropping">
                <ul class="amenities-container">
            
                    <table class="table table-borderless">
                        <thead>
                            <tr class="can-header">
                                <th scope="col">Boarding Points</th>
                                <th scope="col">Dropping Points</th>
                            </tr>
                        </thead>
                        <tbody class="can-body">
                            <!-- <tr> -->
                            <td style="padding: .75em .75em .75em 0.48em;">
                                <table>
                                    <tr *ngFor="let boardingpoin of boardingtimes">
                                        <span><i class="material-icons time-circle">panorama_fish_eye</i></span>
                                        <span class="bor-time">{{boardingpoin.ctime }} </span>
                                        <span class="bor-place"><b>{{boardingpoin.location}}</b>
                                            <br>
                                            <span class="bor-text">{{boardingpoin.address}}</span>
                                        </span>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table>
                                    <tr *ngFor="let droppingtim of droppingtimes">
                                        <span><i class="material-icons time-circle">panorama_fish_eye</i>
                                                </span><span class="bor-time">{{droppingtim.ctime }} </span>
                                        <span class="bor-place"><b>{{droppingtim.location}}</b> <br>
                                            <span class="bor-text">{{droppingtim.address}}</span></span>
                                    </tr>
            
                                    <tr *ngIf="droppingtimes==0">
                                        <span><i class="material-icons time-circle">panorama_fish_eye</i>
                                                </span><span class="bor-time"> </span>
                                        <span class="bor-place"><b>*</b>Right now we do not have any information about the dropping point. <br>Please contact bus service</span>
                                    </tr>
                                </table>
                            </td>
                            <!-- </tr> -->
            
                        </tbody>
                    </table>
                </ul>
            
            </div>
            <div class="row amenities-list" *ngIf="showCancellation">
                <ul class="amenities-container">
                    <table class="table table-borderless bus_collapse_tbl">
                        <thead>
                            <tr class="can-header">
                                <th scope="col" width="50%">Time of Cancellation</th>
                                <th scope="col" class="text-center" width="25%">Deduction %</th>
                                <th scope="col" width="25%">Cancellation Charges</th>
                            </tr>
                        </thead>
                        <tbody class="can-body">
                            <tr *ngFor="let cancel of retvalues">
                                <td><span *ngIf="cancel.from">After </span>{{cancel.from | date:'dd MMM y HH:mm a'}} <span *ngIf="cancel.from">& </span>Before {{cancel.to | date:'dd MMM y HH:mm a'}}</td>
                                <td class="text-center">{{cancel.amount}}<span *ngIf="cancel.amountType == 'Percentage'">%</span></td>
                                <td class="text-left"> ₹ {{cancel.cancharges }}</td>
                            </tr>
                            <tr> </tr>
                        </tbody>
                    </table>
                    <ul>
                        <li style="width: 100%;list-style: circle;margin-left: 25px;" class="cancel-text"><b>Refund amount shown above is indicative and calculated on ticket price ₹ {{bus.fareDetails[0].baseFare | commaSeparator }}</b></li>
                        <li style="width: 100%;list-style: circle;margin-left: 25px;" class="cancel-text" *ngIf="bus.partialCancellationAllowed; else noPartial"><b>Partial cancellation is allowed for this ticket. Please note that primary passenger booking cannot be cancelled.</b></li>
                        <ng-template #noPartial>
                            <li class="cancel-text" style="width: 100%;list-style: circle;margin-left: 25px;">
                                <b>Partial cancellation is not allowed for this ticket.</b>
                            </li>
                        </ng-template>
                        <li style="width: 100%;list-style: circle;margin-left: 25px;" class="cancel-text"><b>Ticket cannot be cancelled after scheduled bus departure time from the first boarding point.</b></li>
                    </ul>
                    <!-- <li class="text-bold">Time Before Departure</li>
                        <li>Before 24 hrs</li>
                        <li>Between 12 - 24 hrs</li>
                        <li class="text-bold">Refund Percentage</li>
                        <li> 70%</li>
                        <li>70%</li>
                        <li class="text-bold">Refund Amount</li>
                        <li> ₹  225</li>
                        <li> ₹  225</li> -->
                </ul>
            </div>
        </div>
      </div>

      <!-- Web Bus Layout -->
      <ng-container>
        <div class="seat-layout " [ngClass]="rowvalue==seatlayout ? 'active' : 'hide'" id="seat-layout{{bus.id}}" *ngIf="showSeatLayout">
            
            <div class="row">
                <div id="tab-seats-new">
                    <div class="bus_seat_details">
                    <div class="w-100">
                        <div class="black_text_medium">{{bus.availableSeats}} Seats Available</div>
                        <div class="gray_text_small">Click on seat to select/ deselect</div>
                    </div>
                    <!-- static filter button -->
                    <div class="row ">
                        <div class="col-md-12">
                           <ul class="bus_details_filter nav nav-tabs" role="tablist">
                                <li><button class="bus_details_filter_btn active"  data-bs-target="#seat-{{bus.id}}-0" aria-controls="seat" (click)="showSeatsFilter(bus.id,0)" role="tab" data-bs-toggle="tab" aria-expanded="true">All ({{bus.availableSeats | number }})</button></li>
                                <ng-container *ngIf="pricesplit.length > 1">
                                <li *ngFor="let price of pricesplit;let index=index;"><button class="bus_details_filter_btn" (click)="showSeatsFilter(bus.id,price.actfare)"  attr.data-bs-target="#seat-{{bus.id}}-{{index}}" aria-controls="seat-{{bus.id}}-{{price.actfare}}" role="tab" data-bs-toggle="tab" >₹{{price.actfare | number }} ({{price.seattotal}}) </button></li>
                                </ng-container>
                            </ul>
                        </div>
                    </div>
                    <!-- end of static filter button -->
                    <div class="row mt-3">
                        <div class="col text-center">
                            <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/available_seats.svg" class="check_status_img"></div>
                            <div class="check_status_txt">Available
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/sleeper_seats.svg" class="check_status_img"></div>
                            <div class="check_status_txt">Sleeper
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/others_seats.svg" class="check_status_img"></div>
                            <div class="check_status_txt">Booked By Others
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/selected_seats.svg" class="check_status_img"></div>
                            <div class="check_status_txt"> Selected By You</div>
                        </div>
                        <div class="col text-center">
                            <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/ladies_seats.svg" class="check_status_img"></div>
                            <div class="check_status_txt"> Available only for 
                                female passenger</div>
                        </div>
    
                        <div class="col text-center">
                            <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/male_seats.svg" class="check_status_img"></div>
                            <div class="check_status_txt">Available for male 
                                passenger
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
    
            <div class="row mt-15">
                <div class="col-md-8">

                    <div class=" layout-w" *ngIf="loading; else listng">
                        <div class="mt-150 d-flex justify-content-center">
                        <div class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                        </div>
                        </div>
                    </div>
    
                    <ng-template #listng>
                        <div class=" layout-w" *ngIf="searchParam.tripId == bus.id" [ngClass]="{'active': showDetails}">
    
                            <!-- <div class="seatLayout_structure">
                                <div class="layout">
                                   new layout
                                </div>
                                <div class="layout">
                                    
                                </div>
                            </div> -->
                            <!-- <ng-container *ngIf="show_dialog"> -->
                              <div class="tab-content">
                                    <div role="tabpanel" class="tab-pane-seat-{{bus.id}} tab-pane fade active show" id="seat-{{bus.id}}-0">
                                        <!-- <div class="errorMessage">{{maxSeatMessage}}</div> -->
                                        <!-- <p class="errorMessage" *ngIf="maxSeatMessageStatus"> <img src="{{cdnUrl}}images/vector/warning.png" alt="Error">{{maxSeatMessage}} </p> -->
                                        <span *ngIf="totalUpperDeck">
                                            <div class="label-small">Lower Berth</div>
                                        </span>
                                        <div class="lower-bus ">
                                            <label class="seat-driver"><img src="{{cdnUrl}}images/icons/icon_steering.svg"></label>
                                            <table class="cabin fuselage" align="left">
                                                <tr class="row-no" *ngFor="let LD of Lowerdecks;let index=index; " style="width:100%">
                                                    <td *ngIf="LD && LD.length > 0" [attr.align]="(index==2 || LD.length > 10 ) ? 'right' : 'left'">
                                                        <table align="left" style="width:100%">
                                                            <tr>
                                                                <td *ngFor="let seat of LD;">
                                                                    <span *ngIf="seat && seat.length==0 " class="seat noSeats">&nbsp;</span>
                                                                    <span *ngIf="seat && seat.length>0" class="seat {{seat.seattype}}"> 
                                                                        <span>
                                                                            <label class="seat_label"  (click)="seat.available == true && selectseat(seat,bus.id,bus.maxSeatsPerTicket,mobile=false)"   >
                                                                                <!--<img  src="{{cdnUrl}}images/icons/bus/{{seat.newseattype}}.svg" class="{{seat.newseattype}}" *ngIf="selectedseats.indexOf(seat) != -1;else other_content" >-->
                                                                                <div class="s-{{seat.newseattype}}" *ngIf="selectedseats.indexOf(seat) != -1;else other_content"></div>
                                                                                <ng-template #other_content>
                                                                                <!--<img class="{{seat.seattype}}" src="{{cdnUrl}}images/icons/bus/{{seat.seattype}}.svg" >-->
                                                                                 <div class="s-{{seat.seattype}}"></div>
                                                                                </ng-template>
                                                                            </label>
                                                                        </span> 
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        
                                        <div class="clearfix"></div>
                                        <span *ngIf="totalUpperDeck;">
                                            <div class="label-small">Upper Berth</div>
                                            <div class="upper-bus">
                                              <label class="seat-driver">&nbsp;</label>
                                                <table class="cabin fuselage" align="left">
                                                    <tr  class="row-no" *ngFor="let UD of Upperdecks;let index=index; " >
                                                        <td *ngIf="UD && UD.length > 0"   [attr.align]="(index==2 || UD.length > 10 ) ? 'right' : 'left'" > 
                                                            <table align="left" style="width:100%">
                                                                <tr>
                                                                    <td *ngFor="let seat of UD">
                                                                        <span *ngIf="seat && seat.length==0" class="seat noSeats" >&nbsp;</span>
                                                                        <span *ngIf="seat && seat.length>0" class="seat {{seat.seattype}}"> 
                                                                            <span >
                                                                                <label class="seat_label"  (click)="seat.available == true && selectseat(seat,bus.id,bus.maxSeatsPerTicket,mobile=false)"   >
                                                                                <div class="s-{{seat.newseattype}}" *ngIf="selectedseats.indexOf(seat) != -1;else other_content"></div>
                                                                                <ng-template #other_content>
                                                                                <div class="s-{{seat.seattype}}"></div>
                                                                                </ng-template>
                                                                                </label>
                                                                            </span> 
                                                                        </span>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                            <!-- <span class="pos-rear">REAR</span> -->
                                        </span>
                                </div>
    
                                <ng-container *ngIf="pricesplit.length > 1">
                                
                                         <div role="tabpanel" *ngFor="let price of pricesplit;let index=index;" class="tab-pane-seat-{{bus.id}}  tab-pane fade " id="seat-{{bus.id}}-{{index}}">
                                                <p class="errorMessage" *ngIf="maxSeatMessageStatus"> <img src="{{cdnUrl}}images/vector/warning.png" alt="Error">{{maxSeatMessage}} </p>
                                        <span  *ngIf="totalUpperDeck">
                                                        <div class="label-small">Lower Berth</div>
                                        </span>
                                        <div class="lower-bus">
                                            <label class="seat-driver"><img src="{{cdnUrl}}images/icons/icon_steering.svg"></label>
                                            <table class="cabin fuselage" align="left">
                                                <tr class="row-no" *ngFor="let LD of Lowerdecks;let index=index; ">
                                                    <td *ngIf="LD && LD.length > 0" [attr.align]="(index==2 || LD.length > 10 ) ? 'right' : 'left'">
                                                        <table align="left" style="width:100%">
                                                            <tr>
                                                                <td *ngFor="let seat of LD">
                                                                    <span *ngIf="seat && seat.length==0 " class="seat noSeats">&nbsp;</span>
                                                                    <span *ngIf="seat && seat.length>0" class="seat {{seat.seattype}}"> 
                                                                    <span *ngIf="price.actfare == seat.baseFare; else blurseat">
                                                                        <label class="seat_label" (click)="seat.available == true && selectseat(seat,bus.id,bus.maxSeatsPerTicket,mobile=false)"   >

                                                                        <div class="s-{{seat.newseattype}}" *ngIf="selectedseats.indexOf(seat) != -1;else other_content" ></div>
                                                                        <ng-template #other_content>
                                                                        <div class="s-{{seat.seattype}}"  ></div>
                                                                        </ng-template>
                                                                        </label>
                                                                    </span>
                                                                    <ng-template #blurseat>
                                                                        <span>
                                                                            <label  class="seat_label" >
                                                                            <div class="s-{{seat.seattype}}_x"  ></div>
                                                                            </label>
                                                                        </span>
                                                                    </ng-template>
                                                                    </span>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <div class="clearfix"></div>
                                        <span *ngIf="totalUpperDeck">
                                            <div class="label-small">Upper Berth</div>
                                            <div class="upper-bus">
                                            <label class="seat-driver">&nbsp;</label>
                                                <table class="cabin fuselage" align="left">
                                                    <tr  class="row-no" *ngFor="let UD of Upperdecks;let index=index; " >
                                                        <td *ngIf="UD && UD.length > 0"   [attr.align]="(index==2 || UD.length > 10 ) ? 'right' : 'left'" > 
                                                            <table align="left" style="width:100%" >
                                                                <tr>
                                                                <td *ngFor="let seat of UD;">
                                                                    <span *ngIf="seat && seat.length==0" class="seat noSeats">&nbsp;</span>
                                                                    <span *ngIf="seat && seat.length>0" class="seat {{seat.seattype}}">
                                                                        <span *ngIf="price.actfare == seat.baseFare; else blurseat">
                                                                            <label class="seat_label"
                                                                                (click)="seat.available == true && selectseat(seat,bus.id,bus.maxSeatsPerTicket,mobile=false)">
                                                                                <div class="s-{{seat.newseattype}}"  *ngIf="selectedseats.indexOf(seat) != -1;else other_content"></div>
                                                                                <ng-template #other_content>
                                                                                <div class="s-{{seat.seattype}}"></div>
                                                                                </ng-template>
                                                                                
                                                                                
                                                                                <span> </span>
                                                                            </label>
                                                                        </span>
                                                                        <ng-template #blurseat>
                                                                            <span>
                                                                                <label class="seat_label">
                                                                                    <div class="s-{{seat.seattype}}_x"></div>
                                                                                </label>
                                                                            </span>
                                                                        </ng-template>
                                                                    </span>
                                                                </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </table>
    
                                            </div>
                        
                                            <!-- <span class="pos-rear">REAR</span> -->
                                        </span>
                                        </div>
                                </ng-container>
            
                               </div>
                            <!-- </ng-container> -->
                        </div>
                    </ng-template>
                </div>
    
                <div class="col-md-4 ">
                    <div class="float-left layout-w brd_drop" *ngIf="bus.rtc==true && rtcseatcall == false">Please select boarding & dropping points to continue for seat selection</div>
                    <div class="bus_details_view_form">
                    <div class="gray_text_small" [ngClass]="{'errorred':showError}">Please select seat(s), boarding & dropping points to continue</div>
                    <mat-form-field class="w-100 bus_details_form">
                        <mat-select placeholder="Boarding point"  [ngClass]="'check'">
                            <mat-option *ngFor="let boardingpoints of boardingtimes" (click)="Boardingdroping('boarding',boardingpoints.boardingPointId,bus.id)" [value]="boardingpoints.boardingPointId"><span *ngIf="boardingpoints.nextday" style="color:red;font-size: 10px">({{boardingpoints.nextday | date:'dd LLL'}}) </span>{{boardingpoints.ctime}} : {{boardingpoints.location}} ({{boardingpoints.address}})</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-form-field class="w-100 bus_details_form">
                        <mat-select placeholder="Dropping point">
                            <mat-option *ngFor="let droppingTimes of droppingtimes" (click)="Boardingdroping('dropping',droppingTimes.boardingPointId,bus.id)" [value]="droppingTimes.boardingPointId"><span *ngIf="droppingTimes.nextday" style="color:red;font-size: 10px">({{droppingTimes.nextday | date:'dd LLL'}}) </span> {{droppingTimes.ctime}} : {{droppingTimes.location}} ({{droppingTimes.address}})</mat-option>
                            <mat-option *ngIf="droppingtimes.length==0" (click)="Boardingdroping('dropping','NA',bus.id)" [value]="params.queryParamMap.get('searchTo')">{{bus.arrivalTime | date:'HH:mm'}} : {{params.queryParamMap.get('searchTo')}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="base-fare">
                        <div *ngIf="totalFareBus">
                            <div class="row mb-10" *ngFor="let seats of seatdetails">
                                <div class="gray-medium col-7" *ngIf="seats">
                                    <p class="price_seat"> {{seats.totalseats}} seats @ {{seats.fare | number:'1.2-2'}} </p>
                                </div>
                                <div class="black-medium col-5 text-right"> 
                                    <div class="fareTotal">
                                        ₹  {{seats.seatfaretotal | number:'1.2-2'}}
                                    </div>
                                </div>
                                <div class="col-12">
                                    <p class="seat-numbers">{{seats.selseats}} </p>
                                </div>
                            </div>
                            <div class="row" *ngIf="maxSeatMessageStatus">
                                <div class="col-2 text-center">
                                    <img src="{{cdnUrl}}images/icons/orange_warning.svg">
                                </div>
                                <div class="col-10 ps-0">
                                    <p class="maxseat_select_msg">{{maxSeatMessage}}</p>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col-6">
                                    <span class="float-left text-large">
                                        <span class="titleLable"> Total Fare </span><br>
                                        <span class="text-labels tax">(Includes Taxes)</span>
                                    </span>
                                </div>
                                <div class="col-6 text-right">
                                    <span class="titleLable black-medium"><span *ngIf="totalfare > 0; else zero"> ₹  {{totalfare | number:'1.2-2'}}</span>
                                        <ng-template #zero> ₹  {{totalfare}}</ng-template>
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        
                    </div>
                    </div>
                    <button class="btn-primary mt-15 w-100" id="{{bus.id}}" (click)="onSubmitSeats(bus.id,bus,rowvalue)" [disabled]="buttonstatus">
                        <ng-container *ngIf="rtcseatcall; else selseatbut">CONTINUE</ng-container>
                        <ng-template #selseatbut><span [ngClass]="{'spinner-border spinner-border-sm': buttonstatus }"></span>  {{button2_name}}</ng-template> 
                    </button>
            
                </div>
            </div>
    
        <!-- <ng-container *ngIf="show_dialog">  -->
    
        </div>
    </ng-container>

</div>


<div class="list-row-m" *ngIf="showrow && bus.availableSeats > 0" (click)="onDetails(bus.id,rowvalue,bus);">
    <div class="row">
        <div class="col-8">
            <div class="float-left label-name">
                {{bus.travels}}
            </div>
            <div class="label-gray float-left">{{bus.busType}}</div>
        </div>
        <div class="col-4">
             <div class="text-center amenities">

            <div *ngIf="bus.rating > 0">
                <div class="rating" [ngClass]="bus.rating >= 4 ? 'rating-green' : (bus.rating >= 3 ? 'rating-orange' : 'rating-red')"><i class="material-icons">
                            star_rate
                        </i>

                    <!-- <span class="rate-value">{{bus.rating}}</span> -->
                    <span class="rate-value">{{bus.rating}}</span>
                </div>

            </div>

            <div class="m-rate-count">{{bus.total_rating_count | number}} Ratings </div>
        </div>
        </div>

        <div class="col-7 d-flex align-items-center pt20 pe-0">
            <div class="d-flex align-items-center w-100">
                <div class="label-name-large">{{bus.departureTime | date:'HH:mm'}}
                    <p *ngIf="nextDayFlag" class="next_flag ml-1">Next Day</p>
                </div>
                <div class="label-gray mx-1 min_w_40 text-center"><span class="m_bus_duartion"><span>{{busHelper.timeDifferMin(bus.arrivalTime,bus.departureTime)}}</span></span></div>
                <div class="label-name-large">{{bus.arrivalTime | date:'HH:mm'}}</div>

            </div>
        </div>
        <div class="col-5 pt20">
            <div class=" d-flex align-items-center text-right bus_fare_pos">
                <div class="label-gray px-1">From</div>
                <div class="label-name-large text-right"> ₹  {{bus.fareDetails[0].baseFare | commaSeparator}}</div>
            </div>
        </div>
        <div class="col-12">
            <div class="label-black-x-small  pb5 text-left">{{bus.availableSeats}} available
                <ng-container *ngIf="bus.avlWindowSeats > 0"> ({{bus.avlWindowSeats}} Window) </ng-container>
            </div>

        </div>
    </div>
    <div class="row row_0_margin">
        <hr class="my-2">
    </div>
    <div class="row">
        <div class="d-flex align-items-center">
        <div>
            <img src="{{cdnUrl}}images/icons/live track.svg" >
            <span class="rat-text">Live Tracking</span>
        </div>
        <div>
            <span class="rat-text"> | </span>
        </div>
        <div class="mx-2">
            <img src="{{cdnUrl}}images/icons/mTicketEnabled.svg" >
            <span class="rat-text">M-ticket Supported</span>
        </div>
    </div>
    </div>
    <!-- <button class="bus-cashback" *ngIf="show_earnpoints">{{show_earnpoints_text}}</button> -->
</div>



<div class="seat-layout-m" *ngIf="searchParam.tripId == bus.id" [ngClass]="{'active': showDetails}">
    
          <div class="row">
              <div class="col-md-12 p-0 fixed-top"  >
              <div class="mob-listing-header">
                <div class="mob-listing-header-left">
                    <a href="javascript:;"  (click)="onCloseDetail()" >
                        <img src="{{cdnUrl}}/images/icons/left.png" alt="" />
                    </a>
                </div>
                <div class="mob-listing-header-center">
                    <div class="">
                            <p>{{departure  | date:'EEE, dd MMM' }}   </p>
                            <h6> {{bus.travels}}</h6>
                            <p class="">{{bus.busType}}</p>
                    </div>
                    
                </div>
                <div class="mob-listing-header-right">
                    <span (click)="seatTypeShow()">
                        <img src="{{cdnUrl}}/images/icons/info_bus.svg" alt="" />
                    </span>
                </div>
            </div>
          </div>
       </div>

   
    <div class="mlite_seat_layout">
        <div class="col-md-8 float-left layout-w" *ngIf="loading; else listngMlite">
            <div class="mt-150 d-flex justify-content-center">
                        <div class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                        </div>
                        </div>
        </div>
        <ng-template #listngMlite>
                <div id="tab-seats-m">
                    <mat-tab-group mat-align-tabs="center" animationDuration="0ms" style="padding:0px;margin-top:10px;">
                        <mat-tab label="All ({{bus.availableSeats}})">

                            <div class="seat_layover">
                                <div class="bus_seats_view">
                                    <div *ngIf="seatTypeMliteData">
                                        <div class="layout">
                                            <div>
                                                <img src="{{cdnUrl}}images/icons/close.png" alt="close" class="close_seatInfo" (click)="seatTypeClose()">
                                            </div>
                                            <div class="">
                                                <div class="seat_type_info_m">
                                                    <div class="bus_driver">
                                                        <div>
                                                            <div class="label text-left">Seat Types</div>
                                                        </div>
                                                        <div>
                                                            <!-- <div class="img-right float-right wi-50"><img src="{{cdnUrl}}images/icons/icon_steering.svg"></div> -->
                                                        </div>
                                                    </div>
                                                    <div class="seat_info">
                                                        <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/available_seats.svg" class="check_status_img"></div>
                                                        <div class="check_status_txt">Available
                                                        </div>
                                                    </div>
                                                    <div class="seat_info">
                                                        <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/sleeper_v.svg" width="38px" class="check_status_img"></div>
                                                        <div class="check_status_txt">Sleeper
                                                        </div>
                                                    </div>
                                                    <div class="seat_info">
                                                        <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/others_seats.svg" class="check_status_img"></div>
                                                        <div class="check_status_txt">Booked By Others
                                                        </div>
                                                    </div>
                                                    <div class="seat_info">
                                                        <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/selected_seats.svg" class="check_status_img"></div>
                                                        <div class="check_status_txt"> Selected By You</div>
                                                    </div>
                                                    <div class="seat_info">
                                                        <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/ladies_seats_m.svg" class="check_status_img" width="75px"></div>
                                                        <div class="check_status_txt"> Available only for 
                                                            female passenger</div>
                                                    </div>
                                
                                                    <div class="seat_info">
                                                        <div class="check_status_img_div"><img src="{{cdnUrl}}images/icons/male_seats.svg" class="check_status_img" width="66px"></div>
                                                        <div class="check_status_txt">Available for male 
                                                            passenger
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="" *ngIf="Lowerdecks.length">
                                        <div class="layout">
                                           
                                            <!-- <div class="info text-gary" *ngIf="showError" [ngClass]="{'errorred':showError}">Please select seat(s)</div> -->
            
            
                                            <div class="margin-auto content">
                                                <div class="bus_driver">
                                                    <div>
                                                        <div class="label text-left">Lower Berth</div>
                                                    </div>
                                                    <div>
                                                        <div class="img-right float-right wi-50"><img src="{{cdnUrl}}images/icons/icon_steering.svg"></div>
                                                    </div>
                                                </div>
                                                <div class="">
                                                <table  class="cabin fuselage">
                                                <tr  class="row-no" *ngFor="let LD of Lowerdecks " >
                                                <td *ngIf="LD && LD.length==0" align="right">&nbsp;&nbsp;&nbsp;</td>
                                                <td *ngFor="let seat of LD" align="right" >
                                                        <span *ngIf="seat && seat.length==0" class="seat ">&nbsp;&nbsp;&nbsp;</span>
                                                    <span *ngIf="seat && seat.length>0" class="seat {{seat.seattype}}-m"> 
                                                    <a  (click)="seat.available == true && selectseat(seat,bus.id,bus.maxSeatsPerTicket,mobile=true)"   >
                                                    
                                                       <div class="ms-{{seat.newseattype}}" *ngIf="selectedseats.indexOf(seat) != -1;else other_content"></div>
                                                       
                                                    
                                                    <ng-template #other_content><div class="ms-{{seat.seattype}}"></div></ng-template>
                                                
                                                    </a>
                                </span>
                                                    </td>
                                                    </tr>
                                                    </table>
            
                                                  
                                                </div>
                                                <!--<div class="text-center my-3" id="toggle">
                                                    <mat-button-toggle-group #group="matButtonToggleGroup" *ngIf="totalUpperDeck" [value]="selecteddeck" (change)="onValChange(group.value)" name="fontStyle" aria-label="Font Style">
                                                        <mat-button-toggle value="lower" checked>Lower</mat-button-toggle>
                                                    </mat-button-toggle-group>
                                                </div>-->
            
                                            </div>
                                        </div>
                                    </div>
                                    <div class="" *ngIf="Upperdecks.length">
                                        <div class="layout">
                                           
                                            <!-- <div class="info text-gary" *ngIf="showError" [ngClass]="{'errorred':showError}">Please select seat(s)</div> -->
            
            
                                            <div class="margin-auto content">
                                                <div class="bus_driver">
                                                    <div>
                                                        <div class="label text-left">Upper Berth</div>
                                                    </div>
                                                    <div>
                                                        <div class="img-right float-right wi-50"><img src="{{cdnUrl}}images/icons/icon_steering.svg"></div>
                                                    </div>
                                                </div>
                                                <div class="">
        
                                                <table  class="cabin fuselage" >
                                            <tr  class="row-no" *ngFor="let UD of Upperdecks " >
                                                <td *ngIf="UD && UD.length==0" align="right" >&nbsp;&nbsp;&nbsp;</td>
                                                <td *ngFor="let seat of UD"  align="right" >
                                                        <span *ngIf="seat && seat.length==0" class="seat ">&nbsp;&nbsp;&nbsp;</span>
                                                    <span *ngIf="seat && seat.length>0" class="seat {{seat.seattype}}-m"> 
                                                    <a  (click)="seat.available == true && selectseat(seat,bus.id,bus.maxSeatsPerTicket,mobile=true)"    >
                                                       <div class="ms-{{seat.newseattype}}" *ngIf="selectedseats.indexOf(seat) != -1;else other_content"></div>
                                                    <ng-template #other_content>    <div class="ms-{{seat.seattype}}"></div></ng-template>
                                                
                                                    </a>
                                                    </span>
                                                    </td>
                                                    </tr>
                                                    </table>
                                                    <!-- <span class="pos-rear">REAR</span> --> 
                                                </div>
                                                <!--<div class="text-center my-3" id="toggle">
                                                    <mat-button-toggle-group #group="matButtonToggleGroup" *ngIf="totalUpperDeck" [value]="selecteddeck" (change)="onValChange(group.value)" name="fontStyle" aria-label="Font Style">
                                                        <mat-button-toggle value="upper">upper</mat-button-toggle>
                                                    </mat-button-toggle-group>
                                                </div>-->
            
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <!-- <a class="info-m" hrref="#" (click)="onSeatInfo()"><i class="material-icons  xs-mark" >error_outline</i></a> -->
                            <!-- Mlite Error Msg -->
                            <div class="footer_error" *ngIf="mlite_seatError">
                                <div class="error_bg">
                                    <div>
                                        <i class="material-icons">warning</i>
                                    </div>
                                    <div>
                                        <p>Please select seat(s)</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Mlite Error Msg -->
                            <div class="footer_error" *ngIf="mlite_passengerError">
                                <div class="error_bg">
                                    <div>
                                        <i class="material-icons">warning</i>
                                    </div>
                                    <div>
                                        <p>You can only add upto 6 travelers at a time.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="fixed-f bg-white">
                                <div class="row">
                                    <div class="col-6" (click)="openAmentiesmlite()">
                                        <span class="blue_link float-start">Amenities & more</span>
                                    </div>
                                    <div class="col-6"  *ngIf="seatdetails.length > 0">
                                        <span class="blue_link float-end">Fare Summary</span>
                                    </div>
                                </div>
                                <hr class="my-2 row"> 
                                <div class="row">
                                    <div class="col-4" (click)="openBottomSheet()">
                                        <div class="xl-text"><span *ngIf="totalfare > 0; else zero1"> ₹{{totalfare | number:'1.2'}}</span>
                                            <ng-template #zero1> ₹{{totalfare | number:'1.2'}}</ng-template>
                                        </div>
                                        <div class="xs-text" *ngIf="seatdetails.length == 0">
                                            <span>Select Seats</span>
                                        </div>
                                        <div (click)="openBottomSheet()" *ngIf="seatdetails.length > 0">

                                        <div class="xs-text li-h">
                                            <span *ngFor="let seats of seatdetails;let lastRow=last;">{{seats.selseats}}<span *ngIf="!lastRow">,</span>
                                            </span>

                                        </div>

                                        </div>
                                    </div>
                                    
                                    <div class="col-8" (click)="openBoardingDroping(bus.id,bus,rowvalue)">
                                        <button class="btn-primary w-100">CONTINUE</button>
                                    </div>
                                </div>
                            </div>
                            <div class="fare-break" [ngClass]="{'active': showFare}" *ngIf="seatdetails.length > 0">
                                <h6>Fare Breakup</h6>
                                <div *ngFor="let seats of seatdetails">
                                    <div class="row" *ngIf="seats">
                                        <div class="col-6">
                                            <div> {{seats.totalseats}} Seat(s) @ {{seats.baseFare | number:'1.2-2'}} </div>
                                            <div>Seat no(s): {{seats.selseats}} </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="text-right"> ₹  {{seats.totalbaseFare | number:'1.2-2'}} </div>
                                        </div>
                                    </div>
                                    <!-- <li > <span></span></li> -->
                                </div>
                                <div class="row" *ngIf="totServtax > 0">
                                    <div class="col-6">
                                        <div>Taxes</div>
                                    </div>
                                    <div class="col-6">
                                        <div class="text-right">₹  {{totServtax | number:'1.2-2'}}</div>
                                    </div>
                                </div>
                            </div>

                        </mat-tab>

                        <span *ngIf="pricesplit.length > 1">
    <span>
    <mat-tab  *ngFor="let price of pricesplit" label=" ₹ {{price.actfare | number}} ({{price.seattotal}})">
                    
        <div class="seat_layover">
          <div class="bus_seats_view">
           <div class="">
        <div class="layout">
        <!-- <div class="info text-gary" *ngIf="showError" [ngClass]="{'errorred':showError}">Please select seat(s)</div> -->
        <div class="margin-auto content">
        <div class="label  text-right float-left w-50">Lower Berth</div>
        <label class="img-right float-right wi-50"><img src="{{cdnUrl}}images/icons/icon_steering.svg"></label>
        <div class="">
        <table class="cabin fuselage" >
        <tr  class="row-no" *ngFor="let LD of Lowerdecks " >
        <td *ngIf="LD && LD.length==0" align="right">&nbsp;&nbsp;&nbsp;</td>
        <td *ngFor="let seat of LD" align="right">
        <span *ngIf="seat && seat.length==0"  class="seat">&nbsp;&nbsp;&nbsp;</span>
        <span *ngIf="seat && seat.length>0" class="seat {{seat.seattype}}-m"> 
        <a  (click)="seat.available == true && selectseat(seat,bus.id,bus.maxSeatsPerTicket,mobile=true)"  *ngIf="price.actfare == seat.baseFare; else blurseat" >
        
            <div class="ms-{{seat.newseattype}}" *ngIf="selectedseats.indexOf(seat) != -1;else other_content"></div>
        
        <ng-template #other_content> <div class="ms-{{seat.seattype}}"></div></ng-template>
        </a>
        <ng-template #blurseat>
        <span><a> <div class="ms-{{seat.seattype}}_x"></div></a></span>
        </ng-template>
        </span>
        </td>
        </tr>
        </table>
        
        </div>
        <!--<div class="text-center my-3" id="toggle">
        <mat-button-toggle-group #group="matButtonToggleGroup" *ngIf="totalUpperDeck" [value]="selecteddeck" (change)="onValChange(group.value)" name="fontStyle" aria-label="Font Style">
        <mat-button-toggle value="lower" checked>Lower</mat-button-toggle>
        </mat-button-toggle-group>
        </div>-->
        </div>
        </div>
     </div>
     <div class="" *ngIf="Upperdecks.length">
        <div class="layout">
        <!-- <div class="info text-gary" *ngIf="showError" [ngClass]="{'errorred':showError}">Please select seat(s)</div> -->
        <div class="margin-auto content">
        <div class="label  text-right float-left w-50">Lower Berth</div>
        <label class="img-right float-right wi-50"><img src="{{cdnUrl}}images/icons/icon_steering.svg"></label>
        <div class="">
      
        <table  class="cabin fuselage" >
        <tr  class="row-no" *ngFor="let UD of Upperdecks " >
        <td *ngIf="UD && UD.length==0" align="right">&nbsp;&nbsp;&nbsp;</td>
        <td *ngFor="let seat of UD" align="right">
        <span *ngIf="seat && seat.length==0"  class="seat">&nbsp;&nbsp;&nbsp;</span>
        <span *ngIf="seat && seat.length>0" class="seat {{seat.seattype}}-m"> 
        <span *ngIf="price.actfare == seat.baseFare; else blurseat">
        <a  (click)="seat.available == true && selectseat(seat,bus.id,bus.maxSeatsPerTicket,mobile=true)"   >
        <div class="ms-{{seat.newseattype}}" *ngIf="selectedseats.indexOf(seat) != -1;else other_content"></div>
      
        <ng-template #other_content>  <div class="ms-{{seat.seattype}}"></div></ng-template>
        </a>
        </span>
        <ng-template #blurseat>
        <span><a>
          <div class="ms-{{seat.seattype}}_x"></div></a></span>
        </ng-template>
        </span>
        </td>
        </tr>
        </table>
        </div>
        <!--<div class="text-center my-3" id="toggle">
        <mat-button-toggle-group #group="matButtonToggleGroup" *ngIf="totalUpperDeck" [value]="selecteddeck" (change)="onValChange(group.value)" name="fontStyle" aria-label="Font Style">
        <mat-button-toggle value="upper">upper</mat-button-toggle>
        </mat-button-toggle-group>
        </div>-->
        </div>
        </div>
         </div>
        </div> 
        </div>              
    <div class="fixed-f">
    <div class="row">
        <div class="col" (click)="openBottomSheet()">
            <div class="xs-text">Total</div>
            <div class="xl-text"><span *ngIf="totalfare > 0; else zero1"> ₹ {{totalfare | number:'1.2'}}</span>
                <ng-template #zero1> ₹  {{totalfare | number:'1.2'}}</ng-template>
            </div>
        </div>
        <div class="col p0" (click)="openBottomSheet()" *ngIf="seatdetails.length > 0">
            <span class=""><i class="material-icons mobile-fare-info">error_outline</i></span>

            <div class="xs-text">Selected Seats</div>
            <div class="xs-text li-h">
                <span *ngFor="let seats of seatdetails;let lastRow=last;">{{seats.selseats}}<span *ngIf="!lastRow">,</span>
                </span>

            </div>
        </div>
        <div class="col" (click)="openBoardingDroping(bus.id,bus,rowvalue)">
            <button class="btn-primary">CONTINUE</button>
        </div>
    </div>
    </div>
    <div class="fare-break" [ngClass]="{'active': showFare}" *ngFor="let seats of seatdetails">
    <h6>Fare Breakup</h6>
    <div *ngFor="let seats of seatdetails">
        <div class="row" *ngIf="seats">
            <div class="col-6">
                <div> {{seats.totalseats}} Seat(s) @ {{seats.baseFare | number:'1.2-2'}} </div>
                <div>Seat no(s): {{seats.selseats}} </div>
            </div>
            <div class="col-6">
                <div class="text-right"> ₹  {{seats.totalbaseFare | number:'1.2-2'}} </div>
            </div>
        </div>
        <!-- <li > <span></span></li> -->
    </div>
    <div class="row" *ngIf="totServtax > 0">
        <div class="col-6">
            <div>Taxes</div>
        </div>
        <div class="col-6">
            <div class="text-right">₹  {{totServtax | number:'1.2-2'}}</div>
        </div>
    </div>
    </div>

    </mat-tab>
    <!-- <div class="seat-info-m"  *ngIf="seatinfo1">
        <div class="row m-0 p-2">
            <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/seat_empty.svg">
            <div class="xx-small-text">Available Seats</div>
        </div>
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/seat_selected.svg">
            <div class="xx-small-text">Selected Seats</div>
        </div>
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/seat_ladies_empty.svg">
            <div class="xx-small-text">Reserved for Ladies</div>
        </div>
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/seat_ladies.svg">
            <div class="xx-small-text">Reserved by Ladies</div>
        </div>
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/bookedSeat.svg">
            <div class="xx-small-text">Occupied Seats</div>
        </div>
        </div> 
        <div class="overlay" (click)="hideOverlay1()"> 

        </div> 
    </div> -->
    </span>
                        </span>
    </mat-tab-group>
    </div>

        </ng-template>
    </div>
    <!-- <mat-tab-group animationDuration="0ms">
        <mat-tab label="Seats">
            

        </mat-tab>
    </mat-tab-group> -->

</div>

<div class="seat-info-m" *ngIf="seatinfo">
    <div class="row m-0 p-2">
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/seat_empty.svg">
            <div class="xx-small-text">Available Seats</div>
        </div>
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/seat_selected.svg">
            <div class="xx-small-text">Selected Seats</div>
        </div>
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/seat_ladies_empty.svg">
            <div class="xx-small-text">Reserved for Ladies</div>
        </div>
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/seat_ladies.svg">
            <div class="xx-small-text">Reserved by Ladies</div>
        </div>
        <div class="col px-2">
            <img src="{{cdnUrl}}images/icons/bookedSeat.svg">
            <div class="xx-small-text">Occupied Seats</div>
        </div>
    </div>

</div>
<div class="overlay" *ngIf="seatinfo" (click)="hideOverlay()">

</div>
<!-- <ol>
       
        <li>
          <button mat-raised-button >Pick one</button>
        </li>
       
      </ol> -->

<!-- Mobile Boarding & Dropping -->

<div class="mobile-boarding-dropping" *ngIf="showBoardDrop">
    <div class="boarding-back-title-smartbuy" *ngIf="domainName=='SMARTBUY'">
        <!-- <span class="boarding-back" (click)="showBoardDrop=false"><i class="material-icons">arrow_back</i></span>
        <div>{{params.queryParamMap.get('searchFrom')}} to {{params.queryParamMap.get('searchTo')}}</div> -->


        <!-- mobile boarding and dropping static data-->
        <div class="row">
            <div class="col-12 text-center">
                <a (click)="showBoardDrop=false" class="m_fheader_link">
                    <img src="{{cdnUrl}}/images/icons/left.png" alt="" />
                </a>
                <p class="m_fheader_text">{{ departure  | date:'EEE, dd MMM' }}</p>
                <h6 class="m_fheader_title">{{params.queryParamMap.get('searchFrom')}} to {{params.queryParamMap.get('searchTo')}}</h6>
                <p class="m_fheader_text">{{bus.busType}}</p>
            </div>
        </div>
        <!-- end of mobile boarding static data -->


    </div>
    <div class="boarding-back-title-diners" *ngIf="domainName=='DINERS'">
        <span class="boarding-back" (click)="showBoardDrop=false"><i class="material-icons">arrow_back</i></span>
        <div>{{params.queryParamMap.get('searchFrom')}} to {{params.queryParamMap.get('searchTo')}}</div>
    </div>
    <div class="boarding-back-title-infinia" *ngIf="domainName=='INFINIA'">
        <span class="boarding-back" (click)="showBoardDrop=false"><i class="material-icons">arrow_back</i></span>
        <div>{{params.queryParamMap.get('searchFrom')}} to {{params.queryParamMap.get('searchTo')}}</div>
    </div>
    <div class="boarding-back-title-regalia" *ngIf="domainName=='REGALIA'">
        <span class="boarding-back" (click)="showBoardDrop=false"><i class="material-icons">arrow_back</i></span>
        <div>{{params.queryParamMap.get('searchFrom')}} to {{params.queryParamMap.get('searchTo')}}</div>
    </div>
    <div class="boarding-back-title-corporate" *ngIf="domainName=='CORPORATE'">
        <span class="boarding-back" (click)="showBoardDrop=false"><i class="material-icons">arrow_back</i></span>
        <div>{{params.queryParamMap.get('searchFrom')}} to {{params.queryParamMap.get('searchTo')}}</div>
    </div>
    <div class="boarding-back-title-business" *ngIf="domainName=='BUSINESS'">
        <span class="boarding-back" (click)="showBoardDrop=false"><i class="material-icons">arrow_back</i></span>
        <div>{{params.queryParamMap.get('searchFrom')}} to {{params.queryParamMap.get('searchTo')}}</div>
    </div>

    <div class="mob-sf-tabs mt-5">
    <ul class="nav nav-tabs m-popup-tabs mt-5 ">
        <li>
            <a class="active" href="#broading" role="tab" aria-controls="broading" data-bs-toggle="tab" [ngClass]="{'active' : boardPointActive}" (click)="pressBoardPoint()">Boarding Points</a>
        </li>
        <li class="nav-item">
            <a href="#dropping" role="tab" aria-controls="dropping" data-bs-toggle="tab" [ngClass]="{'active' : dropPointActive}">Dropping Points</a>
        </li>
    </ul>
    <div class="tab-content clearfix">
        <div class="tab-pane active" id="broading" role="tabpanel" aria-labelledby="broading-tab" [ngClass]="{'active' : boardPointActive}">
            <div class="m-bordng-drpng-div">
            <div class="info text-gary" *ngIf="showErrorBoarding" [ngClass]="{'errorred':showErrorBoarding}">Please select boarding & dropping point to continue</div>
            
            <label *ngFor="let boardingpoints of boardingtimes" for="{{boardingpoints.boardingPointId}}" class="radio" (click)="Boardingdroping('boarding',boardingpoints.boardingPointId,bus.id)">
                <div class="#">
                <table>
                    <tr> 
                      
                        <td><input type="radio" name="mobile-boarding" id="{{boardingpoints.boardingPointId}}" class="hidden" #selectAfterAdding (click)="changeTab(selectAfterAdding.checked)"  />
                            <span class="label"></span> </td>
                    
                        <td><p class="b-time">{{boardingpoints.ctime}}</p></td>
                        <td><p class="b-place-one">{{boardingpoints.location}}</p></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><span *ngIf="boardingpoints.nextday" style="color:red;font-size:9px" class="">({{boardingpoints.nextday | date:'dd LLL'}}) </span></td>
                        <td><p class="b-place-two">{{boardingpoints.address}}<span *ngIf="boardingpoints.landmark !=boardingpoints.address"> ,{{boardingpoints.landmark}}</span></p></td></tr>
                </table>
                </div>
            </label>
            </div>
        </div>
        <div class="tab-pane" id="dropping" role="tabpanel" aria-labelledby="dropping-tab" [ngClass]="{'active show' : dropPointActive}">
        <div class="m-bordng-drpng-div">
                        <div class="info text-gary" *ngIf="showErrorDropping" [ngClass]="{'errorred':showErrorDropping}">Please select boarding & dropping points to continue</div>

            <label *ngFor="let droppingtimes of droppingtimes" for="{{droppingtimes.boardingPointId}}" class="radio" (click)="Boardingdroping('dropping',droppingtimes.boardingPointId,bus.id)">
                        <div class="#">
                        <table>
                            <tr>
                                <td ><input type="radio" name="mobile-boarding1" id="{{droppingtimes.boardingPointId}}" class="hidden"/>
                                    <span class="label"></span> </td>
                                    <td class="text-left"> <p class="b-time">{{droppingtimes.ctime}}</p></td>
                                    <td class="text-left"><p class="b-place-one">{{droppingtimes.location}}</p></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><span *ngIf="droppingtimes.nextday" style="color:red;font-size:9px" class="">({{droppingtimes.nextday | date:'dd LLL'}}) </span></td>
                                <td><p class="b-place-two">{{droppingtimes.address}}<span *ngIf="droppingtimes.landmark !=droppingtimes.address"> ,{{droppingtimes.landmark}}</span></p></td></tr>
                        </table>
                        </div>
                    </label>
            <label *ngIf="droppingtimes.length==0" for="DNA" class="radio" (click)="Boardingdroping('dropping','NA',bus.id)">
                        <input type="radio" name="mobile-boarding1" id="DNA" class="hidden"/>
                        <span class="label"></span>
                        <span class="">
                        <span class="b-time">{{bus.arrivalTime | date:'HH:mm'}}</span>
                        <p class="d-inline">
                                <span class="b-place-one">{{params.queryParamMap.get('searchTo')}}</span> 
                                <span class="b-place-two"></span>
                        </p>
                        </span>
                    </label>
        </div>

            <!-- <p class="cancel-text mt-2" *ngIf="bus.partialCancellationAllowed; else noPartial"><b>Partial cancellation allowed. Please note that primary passenger booking cannot be cancelled.</b></p>

            <ng-template #noPartial>
                <p class="cancel-text mt-2 mb-2">
                    <b>Partial cancellation not allowed</b>
                </p>
            </ng-template> -->

        </div>
    </div>
    </div>

    <mat-tab-group #tabGroup [selectedIndex]="selected" (selectedIndexChange)="tabSelectionChanged($event)">
        <!-- <mat-tab label="Boarding Point">
            <div class="info text-gary" *ngIf="showErrorBoarding" [ngClass]="{'errorred':showErrorBoarding}">Please select boarding & dropping point to continue</div>
            <label *ngFor="let boardingpoints of boardingtimes" for="{{boardingpoints.boardingPointId}}" class="radio" (click)="Boardingdroping('boarding',boardingpoints.boardingPointId,bus.id)">
                        <div class="#">
                        <table>
                            <tr> 
                              
                                <td><input type="radio" name="mobile-boarding" id="{{boardingpoints.boardingPointId}}" class="hidden" #selectAfterAdding (click)="changeTab(selectAfterAdding.checked)"/>
                                    <span class="label"></span> </td>
                            
                                <td><p class="b-time">{{boardingpoints.ctime}}</p></td>
                                <td><p class="b-place-one">{{boardingpoints.location}}</p></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><span *ngIf="boardingpoints.nextday" style="color:red;font-size: 10px" class="">({{boardingpoints.nextday | date:'dd LLL'}}) </span></td>
                                <td><p class="b-place-two">{{boardingpoints.address}}<span *ngIf="boardingpoints.landmark !=boardingpoints.address"> ,{{boardingpoints.landmark}}</span></p></td></tr>
                        </table>
                        </div>
                    </label>
        </mat-tab>
        <mat-tab label="Dropping Point">

            <div class="info text-gary" *ngIf="showErrorDropping" [ngClass]="{'errorred':showErrorDropping}">Please select boarding & dropping points to continue</div>

            <label *ngFor="let droppingtimes of droppingtimes" for="{{droppingtimes.boardingPointId}}" class="radio" (click)="Boardingdroping('dropping',droppingtimes.boardingPointId,bus.id)">
                        <div class="#">
                        <table>
                            <tr>
                                <td ><input type="radio" name="mobile-boarding1" id="{{droppingtimes.boardingPointId}}" class="hidden"/>
                                    <span class="label"></span> </td>
                                    <td > <p class="b-time">{{droppingtimes.ctime}}</p></td>
                                    <td ><p class="b-place-one">{{droppingtimes.location}}</p></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><span *ngIf="droppingtimes.nextday" style="color:red;font-size:10px" class="">({{droppingtimes.nextday | date:'dd LLL'}}) </span></td>
                                <td><p class="b-place-two">{{droppingtimes.address}}<span *ngIf="droppingtimes.landmark !=droppingtimes.address"> ,{{droppingtimes.landmark}}</span></p></td></tr>
                        </table>
                        </div>
                    </label>
            <label *ngIf="droppingtimes.length==0" for="DNA" class="radio" (click)="Boardingdroping('dropping','NA',bus.id)">
                        <input type="radio" name="mobile-boarding1" id="DNA" class="hidden"/>
                        <span class="label"></span>
                        <span class="">
                        <span class="b-time">{{bus.arrivalTime | date:'HH:mm'}}</span>
                        <p class="d-inline">
                                <span class="b-place-one">{{params.queryParamMap.get('searchTo')}}</span> 
                                <span class="b-place-two"></span>
                        </p>
                        </span>
                    </label>
        </mat-tab> -->
    </mat-tab-group>
    <div class="boarding-footer bg-white">
        <button class="btn-primary btn w-100" [disabled]="bookButtonDisable" (click)="onSubmitSeats(bus.id,bus,rowvalue,mobile=true)">Book</button>
    </div>

</div>





                                <!-- amenities modal popup -->
                                <div class="mob-sf-area" id="Mobileamenities" style="left:0;">

                                    <div class="mob-sf-box">
                                        <div class="mob-title">
                                            <h3>More about the bus</h3>
                                            <a href="javascript:void(0)" (click)="closeAmenitiesmlite()" class="mob-close mob-ff-from-close">
                                                <img src="{{cdnUrl}}/images/icons/close.png" alt="">
                                            </a>
                                        </div>
                                        <div class="mob-sf-tabs ">
                                            <ul class="nav nav-tabs m-popup-tabs">
                                                <li>
                                                    <a class="active" href="#amenities" role="tab" aria-controls="amenities" data-bs-toggle="tab">Amenities</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a href="#policy" role="tab" aria-controls="policy" data-bs-toggle="tab">Cancellation Policy</a>
                                                </li>
                                            </ul>
                                            <div class="tab-content clearfix">
                                                <div class="tab-pane active" id="amenities" role="tabpanel" aria-labelledby="amenities-tab">

                                                    <div class=" px-5 py-3">
                                                        <ul class="amenities-m">
                                                            <li *ngIf="busamenities.length <= 0">No Amenities Found</li>
                                                            <li *ngFor="let amen of busamenities">
                                                                 <i><img src="{{cdnUrl}}images/icons/{{amen|removespace}}.svg"></i>{{amen}}
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="tab-pane" id="policy" role="tabpanel" aria-labelledby="policy-tab">
                                                <div class="m-policy-tbl">
                                                    <table class="table table-bordered ">
                                                        <thead>
                                                            <tr>
                                                                <th width="33%">Time of Cancellation</th>
                                                                <th width="33%">Deduction %</th>
                                                                <th width="33%">Cancellation Charges</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let cancel of retvalues">
                                                                <td><span *ngIf="cancel.from">After </span>{{cancel.from | date:'dd MMM y HH:mm a'}} <span *ngIf="cancel.from">& </span>Before {{cancel.to | date:'dd MMM y HH:mm a'}}</td>
                                                                <td class="text-center">{{cancel.amount}}<span *ngIf="cancel.amountType == 'Percentage'">%</span></td>
                                                                <td class="text-center"> ₹  {{cancel.cancharges}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                    <p class="cancel-text mt-2" *ngIf="bus.partialCancellationAllowed; else noPartial"><b>Partial cancellation allowed. Please note that primary passenger booking cannot be cancelled.</b></p>
                                                    <ng-template #noPartial>
                                                        <p class="cancel-text mt-2">
                                                            <b>Partial cancellation not allowed</b>
                                                        </p>
                                                    </ng-template>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- end of amenties modal pop up  -->

